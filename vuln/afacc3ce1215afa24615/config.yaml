id: afacc3ce1215afa24615
bug_link: https://syzkaller.appspot.com/bug?extid=afacc3ce1215afa24615
title: WARNING in fuse_get_tree
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 62dd1fc8cc6b22e3e568be46ebdb817e66f5d6a5
fix_commit: 5d5b74aa9c766f0dd37d5cc1a2a7a94586130501
datetime: '2021-08-05T05:57:27+02:00'
fix_commit_message: "fuse: allow sharing existing sb\n\nMake it possible to create\
  \ a new mount from a already working server.\n\nHere's a detailed description of\
  \ the problem from Jakob:\n\n  \"The background for this question is occasional\
  \ problems we see with our\n   fuse filesystem [1] and mount namespaces. On a usual\
  \ client, we have\n   system-wide, autofs managed mountpoints. When a new mount\
  \ namespace is\n   created (which can be done unprivileged in combination with user\n\
  \   namespaces), it can happen that a mountpoint is used inside the new\n   namespace\
  \ but idle in the root mount namespace. So autofs unmounts the\n   parent, system-wide\
  \ mountpoint. But the fuse module stays active and\n   still serves mountpoint in\
  \ the child mount namespace. Because the fuse\n   daemon also blocks other system\
  \ wide resources corresponding to the\n   mountpoint, this situation effectively\
  \ prevents new mounts until the\n   child mount namespaces closes.\n\n   [1] https://github.com/cvmfs/cvmfs\"\
  \n\nReported-by: Jakob Blomer <jblomer@cern.ch>\nSigned-off-by: Miklos Szeredi <mszeredi@redhat.com>\n"
submodule:
- fs/fuse
hunk_count: 2
covered_count: 2
