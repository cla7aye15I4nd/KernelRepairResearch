id: d3a7951ed361037407db
bug_link: https://syzkaller.appspot.com/bug?extid=d3a7951ed361037407db
title: 'upstream boot error: KASAN: slab-out-of-bounds Write in virtio_gpu_object_create'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c0f83d164fb8f3a2b7bc379a6c1e27d1123a9eab
fix_commit: b513b0d4563ab70a0a25e7a0ed94afaf88ac28bf
datetime: '2020-04-06T15:10:37+02:00'
fix_commit_message: 'drm/virtio: fix OOB in virtio_gpu_object_create


  After commit f651c8b05542 ("drm/virtio: factor out the sg_table from

  virtio_gpu_object"), virtio_gpu_create_object allocates too small space

  to fit everything in. It is because it allocates struct

  virtio_gpu_object, but should allocate a newly added struct

  virtio_gpu_object_shmem which has 2 more members.


  So fix that by using correct type in virtio_gpu_create_object.


  Signed-off-by: Jiri Slaby <jslaby@suse.cz>

  Link: http://patchwork.freedesktop.org/patch/msgid/20200319100421.16267-1-jslaby@suse.cz

  Fixes: f651c8b05542 ("drm/virtio: factor out the sg_table from virtio_gpu_object")

  Cc: Gurchetan Singh <gurchetansingh@chromium.org>

  Cc: Gerd Hoffmann <kraxel@redhat.com>

  Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>

  (cherry picked from commit 0666a8d7f6a4530440e59f2d22ed4091f4d3818c)

  '
submodule:
- drivers/gpu/drm/virtio
hunk_count: 1
covered_count: 1
