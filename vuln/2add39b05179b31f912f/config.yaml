id: 2add39b05179b31f912f
bug_link: https://syzkaller.appspot.com/bug?extid=2add39b05179b31f912f
title: 'WARNING: suspicious RCU usage in fib6_info_alloc'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: dcd1f572954f9d66d7b4a65df894ed5b4c467368
fix_commit: 27b10608a2fe3dd91c9ae1f8f8489bf547c12f08
datetime: '2018-04-19T15:40:13-04:00'
fix_commit_message: 'net/ipv6: Fix gfp_flags arg to addrconf_prefix_route


  Eric noticed that __ipv6_ifa_notify is called under rcu_read_lock, so

  the gfp argument to addrconf_prefix_route can not be GFP_KERNEL.


  While scrubbing other calls I noticed addrconf_addr_gen has one

  place with GFP_ATOMIC that can be GFP_KERNEL.


  Fixes: acb54e3cba404 ("net/ipv6: Add gfp_flags to route add functions")

  Reported-by: syzbot+2add39b05179b31f912f@syzkaller.appspotmail.com

  Reported-by: Eric Dumazet <eric.dumazet@gmail.com>

  Signed-off-by: David Ahern <dsahern@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/ipv6
hunk_count: 2
covered_count: 1
