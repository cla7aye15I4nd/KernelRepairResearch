id: d681aa1d5b9189045b7015bd620e77f8406b76d2
bug_link: https://syzkaller.appspot.com/bug?extid=d681aa1d5b9189045b7015bd620e77f8406b76d2
title: general protection fault in dax_alloc_inode
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 957ac8c421ad8b5eef9b17fe98e146d8311a541e
fix_commit: 9f586fff6574f6ecbf323f92d44ffaf0d96225fe
datetime: '2017-11-14T23:48:42-08:00'
fix_commit_message: "dax: fix general protection fault in dax_alloc_inode\n\nDon't\
  \ crash in case of allocation failure in dax_alloc_inode.\n\n    syzkaller hit the\
  \ following crash on e4880bc5dfb1\n\n    kasan: CONFIG_KASAN_INLINE enabled\n  \
  \  kasan: GPF could be caused by NULL-ptr deref or user memory access\n    [..]\n\
  \    RIP: 0010:dax_alloc_inode+0x3b/0x70 drivers/dax/super.c:348\n    Call Trace:\n\
  \    alloc_inode+0x65/0x180 fs/inode.c:208\n    new_inode_pseudo+0x69/0x190 fs/inode.c:890\n\
  \    new_inode+0x1c/0x40 fs/inode.c:919\n    mount_pseudo_xattr+0x288/0x560 fs/libfs.c:261\n\
  \    mount_pseudo include/linux/fs.h:2137 [inline]\n    dax_mount+0x2e/0x40 drivers/dax/super.c:388\n\
  \    mount_fs+0x66/0x2d0 fs/super.c:1223\n\nCc: <stable@vger.kernel.org>\nFixes:\
  \ 7b6be8444e0f (\"dax: refactor dax-fs into a generic provider...\")\nReported-by:\
  \ syzbot <syzkaller@googlegroups.com>\nSigned-off-by: Mikulas Patocka <mpatocka@redhat.com>\n\
  Signed-off-by: Dan Williams <dan.j.williams@intel.com>\n"
submodule:
- drivers/dax
hunk_count: 1
covered_count: 1
