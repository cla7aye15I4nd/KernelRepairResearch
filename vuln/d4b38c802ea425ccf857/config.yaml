id: d4b38c802ea425ccf857
bug_link: https://syzkaller.appspot.com/bug?extid=d4b38c802ea425ccf857
title: possible deadlock in bch2_alloc_sectors_start_trans
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9bdb3b73e73203546107eb11a4d8bb3ad3f48851
fix_commit: 2cd85fea49d850629404d4668e104466114598e3
datetime: '2024-12-21T01:36:21-05:00'
fix_commit_message: 'bcachefs: Don''t recurse in check_discard_freespace_key


  When calling check_discard_freeespace_key from the allocator, we can''t

  repair without recursing - run it asynchronously instead.


  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 6
covered_count: 4
