id: e099d407346c45275ce9
bug_link: https://syzkaller.appspot.com/bug?extid=e099d407346c45275ce9
title: 'KCSAN: data-race in mem_cgroup_iter / mem_cgroup_iter'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3d150e31a1f62f0b39bdd8b968f563f8f3915d7a
fix_commit: ec0db74b4b1f249ffca4df450f54c17573114045
datetime: '2024-09-09T16:39:16-07:00'
fix_commit_message: "mm: restart if multiple traversals raced\n\nCurrently, if multiple\
  \ reclaimers raced on the same position, the\nreclaimers which detect the race will\
  \ still reclaim from the same memcg. \nInstead, the reclaimers which detect the\
  \ race should move on to the next\nmemcg in the hierarchy.\n\nSo, in the case where\
  \ multiple traversals race, jump back to the start of\nthe mem_cgroup_iter() function\
  \ to find the next memcg in the hierarchy to\nreclaim from.\n\nLink: https://lkml.kernel.org/r/20240905003058.1859929-5-kinseyho@google.com\n\
  Reported-by: syzbot+e099d407346c45275ce9@syzkaller.appspotmail.com\nCloses: https://lore.kernel.org/000000000000817cf10620e20d33@google.com/\n\
  Signed-off-by: Kinsey Ho <kinseyho@google.com>\nReviewed-by: T.J. Mercier <tjmercier@google.com>\n\
  Cc: Johannes Weiner <hannes@cmpxchg.org>\nCc: Michal Hocko <mhocko@kernel.org>\n\
  Cc: Michal Koutn√Ω <mkoutny@suse.com>\nCc: Muchun Song <muchun.song@linux.dev>\n\
  Cc: Roman Gushchin <roman.gushchin@linux.dev>\nCc: Shakeel Butt <shakeel.butt@linux.dev>\n\
  Cc: Tejun Heo <tj@kernel.org>\nCc: Yosry Ahmed <yosryahmed@google.com>\nCc: Zefan\
  \ Li <lizefan.x@bytedance.com>\nCc: Hugh Dickins <hughd@google.com>\nSigned-off-by:\
  \ Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- include/linux
- mm
hunk_count: 6
covered_count: 6
