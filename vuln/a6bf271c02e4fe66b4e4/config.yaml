id: a6bf271c02e4fe66b4e4
bug_link: https://syzkaller.appspot.com/bug?extid=a6bf271c02e4fe66b4e4
title: kernel BUG in assertfail
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e7b2ec3d3d4ebeb4cff7ae45cf430182fa6a49fb
fix_commit: aefd7f7065567a4666f42c0fc8cdb379d2e036bf
datetime: '2021-06-04T13:12:06+02:00'
fix_commit_message: 'btrfs: promote debugging asserts to full-fledged checks in validate_super


  Syzbot managed to trigger this assert while performing its fuzzing.

  Turns out it''s better to have those asserts turned into full-fledged

  checks so that in case buggy btrfs images are mounted the users gets

  an error and mounting is stopped. Alternatively with CONFIG_BTRFS_ASSERT

  disabled such image would have been erroneously allowed to be mounted.


  Reported-by: syzbot+a6bf271c02e4fe66b4e4@syzkaller.appspotmail.com

  CC: stable@vger.kernel.org # 5.4+

  Reviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>

  Reviewed-by: Qu Wenruo <wqu@suse.com>

  Signed-off-by: Nikolay Borisov <nborisov@suse.com>

  Reviewed-by: David Sterba <dsterba@suse.com>

  [ add uuids to the messages ]

  Signed-off-by: David Sterba <dsterba@suse.com>

  '
submodule:
- fs/btrfs
hunk_count: 2
covered_count: 1
