id: 8b481578352d4637f510
bug_link: https://syzkaller.appspot.com/bug?extid=8b481578352d4637f510
title: 'KASAN: invalid-free in free_prealloced_shrinker'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 187e7c41445a0f202bb551f08ca7f8158fea1cd7
fix_commit: 14773bfa70e67f4d4ebd60e60cb6e25e8c84d4c0
datetime: '2022-07-29T18:07:13-07:00'
fix_commit_message: "mm: shrinkers: fix double kfree on shrinker name\n\nsyzbot is\
  \ reporting double kfree() at free_prealloced_shrinker() [1], for\ndestroy_unused_super()\
  \ calls free_prealloced_shrinker() even if\nprealloc_shrinker() returned an error.\
  \  Explicitly clear shrinker name\nwhen prealloc_shrinker() called kfree().\n\n\
  [roman.gushchin@linux.dev: zero shrinker->name in all cases where shrinker->name\
  \ is freed]\n  Link: https://lkml.kernel.org/r/YtgteTnQTgyuKUSY@castle\nLink: https://syzkaller.appspot.com/bug?extid=8b481578352d4637f510\
  \ [1]\nLink: https://lkml.kernel.org/r/ffa62ece-6a42-2644-16cf-0d33ef32c676@I-love.SAKURA.ne.jp\n\
  Fixes: e33c267ab70de424 (\"mm: shrinkers: provide shrinkers with names\")\nReported-by:\
  \ syzbot <syzbot+8b481578352d4637f510@syzkaller.appspotmail.com>\nSigned-off-by:\
  \ Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>\nAcked-by: Roman Gushchin <roman.gushchin@linux.dev>\n\
  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- mm
hunk_count: 4
covered_count: 3
