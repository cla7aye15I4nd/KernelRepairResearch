id: 5e11c83d62924135b4d6f902434d4c243acef8a5
bug_link: https://syzkaller.appspot.com/bug?extid=5e11c83d62924135b4d6f902434d4c243acef8a5
title: 'BUG: looking up invalid subclass: 8'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9b7d869ee5a77ed4a462372bb89af622e705bfb8
fix_commit: 3510c7aa069aa83a2de6dab2b41401a198317bdc
datetime: '2017-11-06T20:25:31+01:00'
fix_commit_message: "ALSA: seq: Avoid invalid lockdep class warning\n\nThe recent\
  \ fix for adding rwsem nesting annotation was using the given\n\"hop\" argument\
  \ as the lock subclass key.  Although the idea itself\nworks, it may trigger a kernel\
  \ warning like:\n  BUG: looking up invalid subclass: 8\n  ....\nsince the lockdep\
  \ has a smaller number of subclasses (8) than we\ncurrently allow for the hops there\
  \ (10).\n\nThe current definition is merely a sanity check for avoiding the too\n\
  deep delivery paths, and the 8 hops are already enough.  So, as a\nquick fix, just\
  \ follow the max hops as same as the max lockdep\nsubclasses.\n\nFixes: 1f20f9ff57ca\
  \ (\"ALSA: seq: Fix nested rwsem annotation for lockdep splat\")\nReported-by: syzbot\
  \ <syzkaller@googlegroups.com>\nCc: <stable@vger.kernel.org>\nSigned-off-by: Takashi\
  \ Iwai <tiwai@suse.de>\n"
submodule:
- include/sound
hunk_count: 1
covered_count: 0
