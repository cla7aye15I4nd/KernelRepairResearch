id: 4d2d56175b934b9a7bf9
bug_link: https://syzkaller.appspot.com/bug?extid=4d2d56175b934b9a7bf9
title: 'INFO: trying to register non-static key in ath9k_htc_rxep'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 01e782c891083f1847c0b62902bfe3c2812566c6
fix_commit: b0ec7e55fce65f125bd1d7f02e2dc4de62abee34
datetime: '2021-12-20T18:08:57+02:00'
fix_commit_message: "ath9k_htc: fix NULL pointer dereference at ath9k_htc_rxep()\n\
  \nsyzbot is reporting lockdep warning followed by kernel panic at\nath9k_htc_rxep()\
  \ [1], for ath9k_htc_rxep() depends on ath9k_rx_init()\nbeing already completed.\n\
  \nSince ath9k_htc_rxep() is set by ath9k_htc_connect_svc(WMI_BEACON_SVC)\n from\
  \ ath9k_init_htc_services(), it is possible that ath9k_htc_rxep() is\ncalled via\
  \ timer interrupt before ath9k_rx_init() from ath9k_init_device()\nis called.\n\n\
  Since we can't call ath9k_init_device() before ath9k_init_htc_services(),\nlet's\
  \ hold ath9k_htc_rxep() no-op until ath9k_rx_init() completes.\n\nLink: https://syzkaller.appspot.com/bug?extid=4d2d56175b934b9a7bf9\
  \ [1]\nReported-by: syzbot <syzbot+4d2d56175b934b9a7bf9@syzkaller.appspotmail.com>\n\
  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>\nTested-by: syzbot\
  \ <syzbot+4d2d56175b934b9a7bf9@syzkaller.appspotmail.com>\nSigned-off-by: Kalle\
  \ Valo <quic_kvalo@quicinc.com>\nLink: https://lore.kernel.org/r/2b88f416-b2cb-7a18-d688-951e6dc3fe92@i-love.sakura.ne.jp\n"
submodule:
- drivers/net/wireless/ath/ath9k
hunk_count: 3
covered_count: 2
