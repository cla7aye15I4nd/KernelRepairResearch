id: ff3aa851d46ab82953a3
bug_link: https://syzkaller.appspot.com/bug?extid=ff3aa851d46ab82953a3
title: WARNING in __free_event
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 277cc13a5d69f27b4095f06c1cc63b8c38a06f60
fix_commit: 10a77965760c6e2b3eef483be33ae407004df894
datetime: '2025-04-15T17:56:47-07:00'
fix_commit_message: "batman-adv: Fix double-hold of meshif when getting enabled\n\n\
  It was originally meant to replace the dev_hold with netdev_hold. But this\nwas\
  \ missed in batadv_hardif_enable_interface(). As result, there was an\nimbalance\
  \ and a hang when trying to remove the mesh-interface with\n(previously) active\
  \ hard-interfaces:\n\n  unregister_netdevice: waiting for batadv0 to become free.\
  \ Usage count = 3\n\nFixes: 00b35530811f (\"batman-adv: adopt netdev_hold() / netdev_put()\"\
  )\nSuggested-by: Eric Dumazet <edumazet@google.com>\nReported-by: syzbot+ff3aa851d46ab82953a3@syzkaller.appspotmail.com\n\
  Reported-by: syzbot+4036165fc595a74b09b2@syzkaller.appspotmail.com\nReported-by:\
  \ syzbot+c35d73ce910d86c0026e@syzkaller.appspotmail.com\nReported-by: syzbot+48c14f61594bdfadb086@syzkaller.appspotmail.com\n\
  Reported-by: syzbot+f37372d86207b3bb2941@syzkaller.appspotmail.com\nSigned-off-by:\
  \ Sven Eckelmann <sven@narfation.org>\nReviewed-by: Eric Dumazet <edumazet@google.com>\n\
  Link: https://patch.msgid.link/20250414-double_hold_fix-v5-1-10e056324cde@narfation.org\n\
  Signed-off-by: Jakub Kicinski <kuba@kernel.org>\n"
submodule:
- net/batman-adv
hunk_count: 1
covered_count: 0
