id: d4336c84ed0099fdbe47
bug_link: https://syzkaller.appspot.com/bug?extid=d4336c84ed0099fdbe47
title: WARNING in irqentry_exit
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2bb8945bcc1a768f2bc402a16c9610bba8d5187d
fix_commit: 4d004099a668c41522242aa146a38cc4eb59cb1e
datetime: '2020-10-09T08:53:30+02:00'
fix_commit_message: 'lockdep: Fix lockdep recursion


  Steve reported that lockdep_assert*irq*(), when nested inside lockdep

  itself, will trigger a false-positive.


  One example is the stack-trace code, as called from inside lockdep,

  triggering tracing, which in turn calls RCU, which then uses

  lockdep_assert_irqs_disabled().


  Fixes: a21ee6055c30 ("lockdep: Change hardirq{s_enabled,_context} to per-cpu variables")

  Reported-by: Steven Rostedt <rostedt@goodmis.org>

  Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>

  Signed-off-by: Ingo Molnar <mingo@kernel.org>

  '
submodule:
- include/linux
- kernel/locking
hunk_count: 27
covered_count: 6
