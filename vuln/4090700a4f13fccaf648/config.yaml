id: 4090700a4f13fccaf648
bug_link: https://syzkaller.appspot.com/bug?extid=4090700a4f13fccaf648
title: 'KASAN: use-after-free Read in snd_pcm_oss_get_formats'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a2ff19f7b70118ced291a28d5313469914de451b
fix_commit: 01c0b4265cc16bc1f43f475c5944c55c10d5768f
datetime: '2018-03-11T10:25:10+01:00'
fix_commit_message: 'ALSA: pcm: Fix UAF in snd_pcm_oss_get_formats()


  snd_pcm_oss_get_formats() has an obvious use-after-free around

  snd_mask_test() calls, as spotted by syzbot.  The passed format_mask

  argument is a pointer to the hw_params object that is freed before the

  loop.  What a surprise that it has been present since the original

  code of decades ago...


  Reported-by: syzbot+4090700a4f13fccaf648@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/oss
hunk_count: 2
covered_count: 2
