id: 9bbe2de1bc9d470eb5fe
bug_link: https://syzkaller.appspot.com/bug?extid=9bbe2de1bc9d470eb5fe
title: 'WARNING: suspicious RCU usage in br_mst_set_state (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 36c92936e868601fa1f43da6758cf55805043509
fix_commit: 546ceb1dfdac866648ec959cbc71d9525bd73462
datetime: '2024-06-12T18:24:24-07:00'
fix_commit_message: 'net: bridge: mst: fix suspicious rcu usage in br_mst_set_state


  I converted br_mst_set_state to RCU to avoid a vlan use-after-free

  but forgot to change the vlan group dereference helper. Switch to vlan

  group RCU deref helper to fix the suspicious rcu usage warning.


  Fixes: 3a7c1661ae13 ("net: bridge: mst: fix vlan use-after-free")

  Reported-by: syzbot+9bbe2de1bc9d470eb5fe@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=9bbe2de1bc9d470eb5fe

  Signed-off-by: Nikolay Aleksandrov <razor@blackwall.org>

  Link: https://lore.kernel.org/r/20240609103654.914987-3-razor@blackwall.org

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/bridge
hunk_count: 1
covered_count: 1
