id: 377b71db585c9c705f8e
bug_link: https://syzkaller.appspot.com/bug?extid=377b71db585c9c705f8e
title: possible deadlock in lapbeth_device_event
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4f1eaabb4b66a1f7473f584e14e15b2ac19dfaf3
fix_commit: 7220e8f4d4eec0b2f682eef45e2d36c092738413
datetime: '2025-03-31T16:43:55-07:00'
fix_commit_message: 'net: lapbether: use netdev_lockdep_set_classes() helper


  drivers/net/wan/lapbether.c uses stacked devices.

  Like similar drivers, it must use netdev_lockdep_set_classes()

  to avoid LOCKDEP splats.


  This is similar to commit 9bfc9d65a1dc ("hamradio:

  use netdev_lockdep_set_classes() helper")


  Fixes: 7e4d784f5810 ("net: hold netdev instance lock during rtnetlink operations")

  Reported-by: syzbot+377b71db585c9c705f8e@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/lkml/67cd611c.050a0220.14db68.0073.GAE@google.com/T/#u

  Signed-off-by: Eric Dumazet <edumazet@google.com>

  Acked-by: Stanislav Fomichev <sdf@fomichev.me>

  Link: https://patch.msgid.link/20250327144439.2463509-1-edumazet@google.com

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- drivers/net/wan
hunk_count: 2
covered_count: 2
