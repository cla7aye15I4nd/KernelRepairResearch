id: a7b60a176ec13cafb793
bug_link: https://syzkaller.appspot.com/bug?extid=a7b60a176ec13cafb793
title: WARNING in find_vma
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a0e44c64b6061dda7e00b7c458e4523e2331b739
fix_commit: d6f35446d0769a98e9d761593d267cdd24f09ecd
datetime: '2022-08-18T16:31:02+02:00'
fix_commit_message: 'binder_alloc: Add missing mmap_lock calls when using the VMA


  Take the mmap_read_lock() when using the VMA in

  binder_alloc_print_pages() and when checking for a VMA in

  binder_alloc_new_buf_locked().


  It is worth noting binder_alloc_new_buf_locked() drops the VMA read lock

  after it verifies a VMA exists, but may be taken again deeper in the

  call stack, if necessary.


  Fixes: a43cfc87caaf (android: binder: stop saving a pointer to the VMA)

  Cc: stable <stable@kernel.org>

  Reported-by: Ondrej Mosnacek <omosnace@redhat.com>

  Reported-by: syzbot+a7b60a176ec13cafb793@syzkaller.appspotmail.com

  Tested-by: Ondrej Mosnacek <omosnace@redhat.com>

  Acked-by: Carlos Llamas <cmllamas@google.com>

  Signed-off-by: Liam R. Howlett <Liam.Howlett@oracle.com>

  Link: https://lore.kernel.org/r/20220810160209.1630707-1-Liam.Howlett@oracle.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/android
hunk_count: 2
covered_count: 1
