id: e662df0ac1d753b57e80
bug_link: https://syzkaller.appspot.com/bug?extid=e662df0ac1d753b57e80
title: 'INFO: trying to register non-static key in tun_chr_write_iter'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 06e55addd3f40b5294e448c2cb7605ca4f28c2e3
fix_commit: c7256f579f8302ce2c038181c30060d0b40017b2
datetime: '2018-10-01T23:27:28-07:00'
fix_commit_message: 'tun: initialize napi_mutex unconditionally


  This is the first part to fix following syzbot report :


  console output: https://syzkaller.appspot.com/x/log.txt?x=145378e6400000

  kernel config:  https://syzkaller.appspot.com/x/.config?x=443816db871edd66

  dashboard link: https://syzkaller.appspot.com/bug?extid=e662df0ac1d753b57e80


  Following patch is fixing the race condition, but it seems safer

  to initialize this mutex at tfile creation anyway.


  Fixes: 90e33d459407 ("tun: enable napi_gro_frags() for TUN/TAP driver")

  Signed-off-by: Eric Dumazet <edumazet@google.com>

  Reported-by: syzbot+e662df0ac1d753b57e80@syzkaller.appspotmail.com

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net
hunk_count: 2
covered_count: 0
