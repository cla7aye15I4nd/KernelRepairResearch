id: aded2f2ab94d81727898
bug_link: https://syzkaller.appspot.com/bug?extid=aded2f2ab94d81727898
title: 'KASAN: null-ptr-deref Write in bdi_put'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 04b1ecb6a4844cf347a1c0d7eb9b63b5eddbfeff
fix_commit: 2d2f6f1b4799428d160c021dd652bc3e3593945e
datetime: '2021-01-07T20:57:53-07:00'
fix_commit_message: 'block: pre-initialize struct block_device in bdev_alloc_inode


  bdev_evict_inode and bdev_free_inode are also called for the root inode

  of bdevfs, for which bdev_alloc is never called.  Move the zeroing o

  f struct block_device and the initialization of the bd_bdi field into

  bdev_alloc_inode to make sure they are initialized for the root inode

  as well.


  Fixes: e6cb53827ed6 ("block: initialize struct block_device in bdev_alloc")

  Reported-by: Alexey Kardashevskiy <aik@ozlabs.ru>

  Tested-by: Alexey Kardashevskiy <aik@ozlabs.ru>

  Signed-off-by: Christoph Hellwig <hch@lst.de>

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 2
covered_count: 1
