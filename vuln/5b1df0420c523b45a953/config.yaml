id: 5b1df0420c523b45a953
bug_link: https://syzkaller.appspot.com/bug?extid=5b1df0420c523b45a953
title: possible deadlock in aio_poll
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: fa76da461bb0be13c8339d984dcf179151167c8f
fix_commit: ae62c16e105a869524afcf8a07ee85c5ae5d0479
datetime: '2018-10-26T16:25:18-07:00'
fix_commit_message: "userfaultfd: disable irqs when taking the waitqueue lock\n\n\
  userfaultfd contains howe-grown locking of the waitqueue lock, and does\nnot disable\
  \ interrupts.  This relies on the fact that no one else takes it\nfrom interrupt\
  \ context and violates an invariat of the normal waitqueue\nlocking scheme.  With\
  \ aio poll it is easy to trigger other locks that\ndisable interrupts (or are called\
  \ from interrupt context).\n\nLink: http://lkml.kernel.org/r/20181018154101.18750-1-hch@lst.de\n\
  Signed-off-by: Christoph Hellwig <hch@lst.de>\nReviewed-by: Andrea Arcangeli <aarcange@redhat.com>\n\
  Reviewed-by: Andrew Morton <akpm@linux-foundation.org>\nCc: <stable@vger.kernel.org>\t\
  [4.19.x]\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by:\
  \ Linus Torvalds <torvalds@linux-foundation.org>\n"
submodule:
- fs
hunk_count: 2
covered_count: 1
