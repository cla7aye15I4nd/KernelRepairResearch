id: 97c5bd9cc81eca63d36e
bug_link: https://syzkaller.appspot.com/bug?extid=97c5bd9cc81eca63d36e
title: 'UBSAN: shift-out-of-bounds in sfq_init'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a533b70a657c03137dd49cbcfee70aac086ab2b1
fix_commit: bd1248f1ddbc48b0c30565fce897a3b6423313b8
datetime: '2020-12-28T14:52:54-08:00'
fix_commit_message: "net: sched: prevent invalid Scell_log shift count\n\nCheck Scell_log\
  \ shift size in red_check_params() and modify all callers\nof red_check_params()\
  \ to pass Scell_log.\n\nThis prevents a shift out-of-bounds as detected by UBSAN:\n\
  \  UBSAN: shift-out-of-bounds in ./include/net/red.h:252:22\n  shift exponent 72\
  \ is too large for 32-bit type 'int'\n\nFixes: 8afa10cbe281 (\"net_sched: red: Avoid\
  \ illegal values\")\nSigned-off-by: Randy Dunlap <rdunlap@infradead.org>\nReported-by:\
  \ syzbot+97c5bd9cc81eca63d36e@syzkaller.appspotmail.com\nCc: Nogah Frankel <nogahf@mellanox.com>\n\
  Cc: Jamal Hadi Salim <jhs@mojatatu.com>\nCc: Cong Wang <xiyou.wangcong@gmail.com>\n\
  Cc: Jiri Pirko <jiri@resnulli.us>\nCc: netdev@vger.kernel.org\nCc: \"David S. Miller\"\
  \ <davem@davemloft.net>\nCc: Jakub Kicinski <kuba@kernel.org>\nSigned-off-by: David\
  \ S. Miller <davem@davemloft.net>\n"
submodule:
- include/net
- net/sched
hunk_count: 5
covered_count: 1
