id: 22794221ab96b0bab53a
bug_link: https://syzkaller.appspot.com/bug?extid=22794221ab96b0bab53a
title: 'KASAN: slab-out-of-bounds Read in prism2sta_probe_usb'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b15b4da88be52e7455acc59318f6c97b8740b329
fix_commit: fea22e159d51c766ba70473f473a0ec914cc7e92
datetime: '2020-08-18T16:12:54+02:00'
fix_commit_message: 'staging: wlan-ng: fix out of bounds read in prism2sta_probe_usb()


  let''s use usb_find_common_endpoints() to discover endpoints, it does all

  necessary checks for type and xfer direction


  remove memset() in hfa384x_create(), because we now assign endpoints in

  prism2sta_probe_usb() and because create_wlan() uses kzalloc() to

  allocate hfa384x struct before calling hfa384x_create()


  Fixes: faaff9765664 ("staging: wlan-ng: properly check endpoint types")

  Reported-and-tested-by: syzbot+22794221ab96b0bab53a@syzkaller.appspotmail.com

  Link: https://syzkaller.appspot.com/bug?extid=22794221ab96b0bab53a

  Signed-off-by: Rustam Kovhaev <rkovhaev@gmail.com>

  Cc: stable <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20200804145614.104320-1-rkovhaev@gmail.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/staging/wlan-ng
hunk_count: 3
covered_count: 2
