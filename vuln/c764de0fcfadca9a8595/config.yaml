id: c764de0fcfadca9a8595
bug_link: https://syzkaller.appspot.com/bug?extid=c764de0fcfadca9a8595
title: WARNING in batadv_is_on_batman_iface
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b71acb0e372160167bf6d5500b88b30b52ccef6e
fix_commit: 955d3411a17f590364238bd0d3329b61f20c1cd2
datetime: '2018-12-30T13:34:12+01:00'
fix_commit_message: 'batman-adv: Avoid WARN on net_device without parent in netns


  It is not allowed to use WARN* helpers on potential incorrect input from

  the user or transient problems because systems configured as panic_on_warn

  will reboot due to such a problem.


  A NULL return value of __dev_get_by_index can be caused by various problems

  which can either be related to the system configuration or problems

  (incorrectly returned network namespaces) in other (virtual) net_device

  drivers. batman-adv should not cause a (harmful) WARN in this situation and

  instead only report it via a simple message.


  Fixes: b7eddd0b3950 ("batman-adv: prevent using any virtual device created on batman-adv
  as hard-interface")

  Reported-by: syzbot+c764de0fcfadca9a8595@syzkaller.appspotmail.com

  Reported-by: Dmitry Vyukov <dvyukov@google.com>

  Signed-off-by: Sven Eckelmann <sven@narfation.org>

  Signed-off-by: Simon Wunderlich <sw@simonwunderlich.de>

  '
submodule:
- net/batman-adv
hunk_count: 2
covered_count: 2
