id: 8f4e2dcfcb3209ac35f9
bug_link: https://syzkaller.appspot.com/bug?extid=8f4e2dcfcb3209ac35f9
title: 'KASAN: use-after-free Read in ovs_vport_locate'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f2575c8f404911da83f25b688e12afcf4273e640
fix_commit: 95637d91fefdb94d6e7389222ba9ddab0e9f5abe
datetime: '2022-12-21T17:48:12-08:00'
fix_commit_message: 'net: openvswitch: release vport resources on failure


  A recent commit introducing upcall packet accounting failed to properly

  release the vport object when the per-cpu stats struct couldn''t be

  allocated.  This can cause dangling pointers to dp objects long after

  they''ve been released.


  Cc: wangchuanlei <wangchuanlei@inspur.com>

  Fixes: 1933ea365aa7 ("net: openvswitch: Add support to count upcall packets")

  Reported-by: syzbot+8f4e2dcfcb3209ac35f9@syzkaller.appspotmail.com

  Signed-off-by: Aaron Conole <aconole@redhat.com>

  Acked-by: Eelco Chaudron <echaudro@redhat.com>

  Reviewed-by: Michal Swiatkowski <michal.swiatkowski@linux.intel.com>

  Link: https://lore.kernel.org/r/20221220212717.526780-1-aconole@redhat.com

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/openvswitch
hunk_count: 4
covered_count: 2
