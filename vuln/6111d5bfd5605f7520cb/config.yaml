id: 6111d5bfd5605f7520cb
bug_link: https://syzkaller.appspot.com/bug?extid=6111d5bfd5605f7520cb
title: general protection fault in kernel_sock_shutdown
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a60faa60da891e311e19fd3e88d611863f431130
fix_commit: 1255fcb2a655f05e02f3a74675a6d6525f187afd
datetime: '2018-04-19T16:38:39-04:00'
fix_commit_message: "net/smc: fix shutdown in state SMC_LISTEN\n\nCalling shutdown\
  \ with SHUT_RD and SHUT_RDWR for a listening SMC socket\ncrashes, because\n   commit\
  \ 127f49705823 (\"net/smc: release clcsock from tcp_listen_worker\")\nreleases the\
  \ internal clcsock in smc_close_active() and sets smc->clcsock\nto NULL.\nFor SHUT_RD\
  \ the smc_close_active() call is removed.\nFor SHUT_RDWR the kernel_sock_shutdown()\
  \ call is omitted, since the\nclcsock is already released.\n\nFixes: 127f49705823\
  \ (\"net/smc: release clcsock from tcp_listen_worker\")\nSigned-off-by: Ursula Braun\
  \ <ubraun@linux.vnet.ibm.com>\nReported-by: Stephen Hemminger <stephen@networkplumber.org>\n\
  Signed-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- net/smc
hunk_count: 1
covered_count: 1
