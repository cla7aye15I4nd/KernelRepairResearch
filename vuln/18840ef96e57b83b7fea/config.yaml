id: 18840ef96e57b83b7fea
bug_link: https://syzkaller.appspot.com/bug?extid=18840ef96e57b83b7fea
title: possible deadlock in _snd_pcm_stream_lock_irqsave (4)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9b714a59b719b1ba9382c092f0f7aa4bbe94eba1
fix_commit: 587d67fd929ad89801bcc429675bda90d53f6592
datetime: '2024-03-15T11:16:47+01:00'
fix_commit_message: 'ALSA: timer: Fix missing irq-disable at closing


  The conversion to guard macro dropped the irq-disablement at closing

  mistakenly, which may lead to a race.  Fix it.


  Fixes: beb45974dd49 ("ALSA: timer: Use guard() for locking")

  Reported-by: syzbot+28c1a5a5b041a754b947@syzkaller.appspotmail.com

  Closes: http://lore.kernel.org/r/0000000000000b9a510613b0145f@google.com

  Message-ID: <20240315101447.18395-1-tiwai@suse.de>

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core
hunk_count: 1
covered_count: 1
