id: ae6bb869cbed29b29040
bug_link: https://syzkaller.appspot.com/bug?extid=ae6bb869cbed29b29040
title: 'KASAN: use-after-free Read in ax25_fillin_cb'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7f334a7e1ae113212e39aafba51352ea9ab8c9f9
fix_commit: c433570458e49bccea5c551df628d058b3526289
datetime: '2018-12-30T14:07:54-08:00'
fix_commit_message: "ax25: fix a use-after-free in ax25_fillin_cb()\n\nThere are multiple\
  \ issues here:\n\n1. After freeing dev->ax25_ptr, we need to set it to NULL otherwise\n\
  \   we may use a dangling pointer.\n\n2. There is a race between ax25_setsockopt()\
  \ and device notifier as\n   reported by syzbot. Close it by holding RTNL lock.\n\
  \n3. We need to test if dev->ax25_ptr is NULL before using it.\n\nReported-and-tested-by:\
  \ syzbot+ae6bb869cbed29b29040@syzkaller.appspotmail.com\nSigned-off-by: Cong Wang\
  \ <xiyou.wangcong@gmail.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- net/ax25
hunk_count: 3
covered_count: 3
