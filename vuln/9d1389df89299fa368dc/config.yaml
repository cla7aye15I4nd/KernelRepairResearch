id: 9d1389df89299fa368dc
bug_link: https://syzkaller.appspot.com/bug?extid=9d1389df89299fa368dc
title: 'KASAN: slab-out-of-bounds Read in strset_parse_request'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9d49aea13f1e35869158abe7e314e16dc8f50ff1
fix_commit: db972e5325183df1265bf851b32dc7530dd4393a
datetime: '2020-10-08T16:06:01-07:00'
fix_commit_message: 'ethtool: strset: allow ETHTOOL_A_STRSET_COUNTS_ONLY attr


  The ETHTOOL_A_STRSET_COUNTS_ONLY flag attribute was previously

  not allowed to be used, but now due to the policy size reduction

  we would access the tb[] array out of bounds since we tried to

  check for the attribute despite it not being accepted.


  Fix both issues by adding it correctly to the appropriate policy.


  Fixes: ff419afa4310 ("ethtool: trim policy tables")

  Fixes: 71921690f974 ("ethtool: provide string sets with STRSET_GET request")

  Reported-by: Leon Romanovsky <leon@kernel.org>

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  Tested-by: Leon Romanovsky <leonro@nvidia.com>

  Reviewed-by: Jakub Kicinski <kuba@kernel.org>

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/ethtool
hunk_count: 2
covered_count: 0
