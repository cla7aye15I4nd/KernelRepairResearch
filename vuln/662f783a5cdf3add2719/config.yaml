id: 662f783a5cdf3add2719
bug_link: https://syzkaller.appspot.com/bug?extid=662f783a5cdf3add2719
title: WARNING in unregister_vlan_dev
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: cc941e548bffc01b5816b4edc5cb432a137a58b3
fix_commit: ace0ab3a4b54205a01d3f4a0fd9bdb4616cfb60b
datetime: '2023-08-14T08:14:00+01:00'
fix_commit_message: 'Revert "vlan: Fix VLAN 0 memory leak"


  This reverts commit 718cb09aaa6fa78cc8124e9517efbc6c92665384.


  The commit triggers multiple syzbot issues, probably due to possibility of

  manually creating VLAN 0 on netdevice which will cause the code to delete

  it since it can''t distinguish such VLAN from implicit VLAN 0 automatically

  created for devices with NETIF_F_HW_VLAN_CTAG_FILTER feature.


  Reported-by: syzbot+662f783a5cdf3add2719@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/all/00000000000090196d0602a6167d@google.com/

  Reported-by: syzbot+4b4f06495414e92701d5@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/all/00000000000096ae870602a61602@google.com/

  Reported-by: syzbot+d810d3cd45ed1848c3f7@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/all/0000000000009f0f9c0602a616ce@google.com/

  Fixes: 718cb09aaa6f ("vlan: Fix VLAN 0 memory leak")

  Signed-off-by: Vlad Buslov <vladbu@nvidia.com>

  Reviewed-by: Ido Schimmel <idosch@nvidia.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/8021q
hunk_count: 1
covered_count: 0
