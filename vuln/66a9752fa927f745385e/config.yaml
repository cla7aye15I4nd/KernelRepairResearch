id: 66a9752fa927f745385e
bug_link: https://syzkaller.appspot.com/bug?extid=66a9752fa927f745385e
title: 'WARNING: bad unlock balance in ovl_llseek'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 11a48a5a18c63fd7621bb050228cebf13566e4d8
fix_commit: 531d3040bc5cf37dea01b118608347cca9325f9d
datetime: '2020-03-12T16:38:10+01:00'
fix_commit_message: 'ovl: fix lock in ovl_llseek()


  ovl_inode_lock() is interruptible. When inode_lock() in ovl_llseek()

  was replaced with ovl_inode_lock(), we did not add a check for error.


  Fix this by making ovl_inode_lock() uninterruptible and change the

  existing call sites to use an _interruptible variant.


  Reported-by: syzbot+66a9752fa927f745385e@syzkaller.appspotmail.com

  Fixes: b1f9d3858f72 ("ovl: use ovl_inode_lock in ovl_llseek()")

  Signed-off-by: Amir Goldstein <amir73il@gmail.com>

  Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>

  '
submodule:
- fs/overlayfs
hunk_count: 3
covered_count: 1
