id: 92e45ae45543f89e8c88
bug_link: https://syzkaller.appspot.com/bug?extid=92e45ae45543f89e8c88
title: 'UBSAN: shift-out-of-bounds in snd_usbmidi_get_ms_info'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c1e8952395c1f44a6304c71401519d19ed2ac56a
fix_commit: c06ccf3ebb7503706ea49fd248e709287ef385a3
datetime: '2020-12-23T18:46:54+01:00'
fix_commit_message: 'ALSA: usb-audio: Fix UBSAN warnings for MIDI jacks


  The calculation of in_cables and out_cables bitmaps are done with the

  bit shift by the value from the descriptor, which is an arbitrary

  value, and can lead to UBSAN shift-out-of-bounds warnings.


  Fix it by filtering the bad descriptor values with the check of the

  upper bound 0x10 (the cable bitmaps are 16 bits).


  Reported-by: syzbot+92e45ae45543f89e8c88@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20201223174557.10249-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/usb
hunk_count: 2
covered_count: 1
