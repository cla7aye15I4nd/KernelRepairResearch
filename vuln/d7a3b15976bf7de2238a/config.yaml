id: d7a3b15976bf7de2238a
bug_link: https://syzkaller.appspot.com/bug?extid=d7a3b15976bf7de2238a
title: general protection fault in ieee80211_subif_start_xmit
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5122565188bae59d507d90a9a9fd2fd6107f4439
fix_commit: 054c9939b4800a91475d8d89905827bf9e1ad97a
datetime: '2021-01-26T11:59:45+01:00'
fix_commit_message: 'mac80211: pause TX while changing interface type


  syzbot reported a crash that happened when changing the interface

  type around a lot, and while it might have been easy to fix just

  the symptom there, a little deeper investigation found that really

  the reason is that we allowed packets to be transmitted while in

  the middle of changing the interface type.


  Disallow TX by stopping the queues while changing the type.


  Fixes: 34d4bc4d41d2 ("mac80211: support runtime interface type changes")

  Reported-by: syzbot+d7a3b15976bf7de2238a@syzkaller.appspotmail.com

  Link: https://lore.kernel.org/r/20210122171115.b321f98f4d4f.I6997841933c17b093535c31d29355be3c0c39628@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/mac80211
hunk_count: 3
covered_count: 0
