id: 544248a761451c0df72f
bug_link: https://syzkaller.appspot.com/bug?extid=544248a761451c0df72f
title: kernel BUG in ext4_update_inline_data
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a3ce570a5d6a70df616ae9a78635a188e6b5fd2f
fix_commit: 099b847ccc6c1ad2f805d13cfbcc83f5b6d4bc42
datetime: '2025-07-25T09:14:17-04:00'
fix_commit_message: 'ext4: do not BUG when INLINE_DATA_FL lacks system.data xattr


  A syzbot fuzzed image triggered a BUG_ON in ext4_update_inline_data()

  when an inode had the INLINE_DATA_FL flag set but was missing the

  system.data extended attribute.


  Since this can happen due to a maiciouly fuzzed file system, we

  shouldn''t BUG, but rather, report it as a corrupted file system.


  Add similar replacements of BUG_ON with EXT4_ERROR_INODE() ii

  ext4_create_inline_data() and ext4_inline_data_truncate().


  Reported-by: syzbot+544248a761451c0df72f@syzkaller.appspotmail.com

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 3
covered_count: 2
