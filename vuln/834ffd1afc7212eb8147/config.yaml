id: 834ffd1afc7212eb8147
bug_link: https://syzkaller.appspot.com/bug?extid=834ffd1afc7212eb8147
title: WARNING in xfrm_alloc_compat (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c7dbf4c08868d9db89b8bfe8f8245ca61b01ed2f
fix_commit: ef19e111337f6c3dca7019a8bad5fbc6fb18d635
datetime: '2021-03-30T07:29:09+02:00'
fix_commit_message: "xfrm/compat: Cleanup WARN()s that can be user-triggered\n\nReplace\
  \ WARN_ONCE() that can be triggered from userspace with\npr_warn_once(). Those still\
  \ give user a hint what's the issue.\n\nI've left WARN()s that are not possible\
  \ to trigger with current\ncode-base and that would mean that the code has issues:\n\
  - relying on current compat_msg_min[type] <= xfrm_msg_min[type]\n- expected 4-byte\
  \ padding size difference between\n  compat_msg_min[type] and xfrm_msg_min[type]\n\
  - compat_policy[type].len <= xfrma_policy[type].len\n(for every type)\n\nReported-by:\
  \ syzbot+834ffd1afc7212eb8147@syzkaller.appspotmail.com\nFixes: 5f3eea6b7e8f (\"\
  xfrm/compat: Attach xfrm dumps to 64=>32 bit translator\")\nCc: \"David S. Miller\"\
  \ <davem@davemloft.net>\nCc: Eric Dumazet <eric.dumazet@gmail.com>\nCc: Herbert\
  \ Xu <herbert@gondor.apana.org.au>\nCc: Jakub Kicinski <kuba@kernel.org>\nCc: Steffen\
  \ Klassert <steffen.klassert@secunet.com>\nCc: netdev@vger.kernel.org\nCc: stable@vger.kernel.org\n\
  Signed-off-by: Dmitry Safonov <dima@arista.com>\nSigned-off-by: Steffen Klassert\
  \ <steffen.klassert@secunet.com>\n"
submodule:
- net/xfrm
hunk_count: 4
covered_count: 3
