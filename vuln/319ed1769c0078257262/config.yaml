id: 319ed1769c0078257262
bug_link: https://syzkaller.appspot.com/bug?extid=319ed1769c0078257262
title: 'KCSAN: data-race in inode_doinit_with_dentry / selinux_file_open'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: fc328c869c4128fc1f975b8cfe92e9ec320d477f
fix_commit: 2571bb9d553ba2b8db1971bd3c903bff07d0bb11
datetime: '2024-08-26T18:39:16-04:00'
fix_commit_message: 'selinux: annotate false positive data race to avoid KCSAN warnings


  KCSAN flags the check of isec->initialized by

  __inode_security_revalidate() as a data race. This is indeed a racy

  check, but inode_doinit_with_dentry() will recheck with isec->lock held.

  Annotate the check with the data_race() macro to silence the KCSAN false

  positive.


  Reported-by: syzbot+319ed1769c0078257262@syzkaller.appspotmail.com

  Signed-off-by: Stephen Smalley <stephen.smalley.work@gmail.com>

  Signed-off-by: Paul Moore <paul@paul-moore.com>

  '
submodule:
- security/selinux
hunk_count: 1
covered_count: 1
