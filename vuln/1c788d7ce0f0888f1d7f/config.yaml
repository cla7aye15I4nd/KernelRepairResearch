id: 1c788d7ce0f0888f1d7f
bug_link: https://syzkaller.appspot.com/bug?extid=1c788d7ce0f0888f1d7f
title: WARNING in xdp_rxq_info_unreg
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 208e0b17329cd802088c79f399835d51b9710df8
fix_commit: c13da21cdb8085f1d9a53463c88a4d3967fe90fd
datetime: '2018-01-22T16:55:18-05:00'
fix_commit_message: 'tun: avoid calling xdp_rxq_info_unreg() twice


  Similarly to tx ring, xdp_rxq_info is only registered

  when !tfile->detached, so we need to avoid calling

  xdp_rxq_info_unreg() twice too. The helper tun_cleanup_tx_ring()

  already checks for this properly, so it is correct to put

  xdp_rxq_info_unreg() just inside there.


  Reported-by: syzbot+1c788d7ce0f0888f1d7f@syzkaller.appspotmail.com

  Fixes: 8565d26bcb2f ("Merge git://git.kernel.org/pub/scm/linux/kernel/git/davem/net")

  Cc: Jason Wang <jasowang@redhat.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net
hunk_count: 1
covered_count: 1
