id: 4f789823c1abc5accf13
bug_link: https://syzkaller.appspot.com/bug?extid=4f789823c1abc5accf13
title: 'KASAN: use-after-free Read in srcu_invoke_callbacks'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e6a2e5116e07ce5acc8698785c29e9e47f010fd5
fix_commit: 850fd2abbe02eb2b52cbb1550adbcc89b36d65de
datetime: '2022-01-17T07:24:45-07:00'
fix_commit_message: 'block: cleanup q->srcu


  srcu structure has to be cleanup via cleanup_srcu_struct(), so fix it.


  Reported-by: syzbot+4f789823c1abc5accf13@syzkaller.appspotmail.com

  Fixes: 704b914f15fb ("blk-mq: move srcu from blk_mq_hw_ctx to request_queue")

  Signed-off-by: Ming Lei <ming.lei@redhat.com>

  Reviewed-by: Christoph Hellwig <hch@lst.de>

  Link: https://lore.kernel.org/r/20220111123401.520192-1-ming.lei@redhat.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- block
hunk_count: 1
covered_count: 0
