id: b29f436493184ea42e2b
bug_link: https://syzkaller.appspot.com/bug?extid=b29f436493184ea42e2b
title: 'WARNING: kmalloc bug in bch2_dev_buckets_resize'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 18b4abcead744322feb90ba31450e7d770e928bd
fix_commit: db42549d402cb44fe67c95d08f1a9ea902d32e7e
datetime: '2024-05-06T10:58:17-04:00'
fix_commit_message: 'bcachefs: Add a better limit for maximum number of buckets


  The bucket_gens array is a single array allocation (one byte per

  bucket), and kernel allocations are still limited to INT_MAX.


  Check this limit to avoid failing the bucket_gens array allocation.


  Reported-by: syzbot+b29f436493184ea42e2b@syzkaller.appspotmail.com

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 4
covered_count: 0
