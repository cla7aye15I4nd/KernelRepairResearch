id: 256e56ddde8b8957eabd
bug_link: https://syzkaller.appspot.com/bug?extid=256e56ddde8b8957eabd
title: 'KASAN: slab-out-of-bounds Read in read_descriptors (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a6498d51821edf9615b42b968fb419a40197a982
fix_commit: a18cd6c9b6bc73dc17e8b7e9bd07decaa8833c97
datetime: '2020-09-04T16:41:22+02:00'
fix_commit_message: 'usb: core: fix slab-out-of-bounds Read in read_descriptors


  The USB device descriptor may get changed between two consecutive

  enumerations on the same device for some reason, such as DFU or

  malicius device.

  In that case, we may access the changing descriptor if we don''t take

  the device lock here.


  The issue is reported:

  https://syzkaller.appspot.com/bug?id=901a0d9e6519ef8dc7acab25344bd287dd3c7be9


  Cc: stable <stable@vger.kernel.org>

  Cc: Alan Stern <stern@rowland.harvard.edu>

  Reported-by: syzbot+256e56ddde8b8957eabd@syzkaller.appspotmail.com

  Fixes: 217a9081d8e6 ("USB: add all configs to the "descriptors" attribute")

  Signed-off-by: Zeng Tao <prime.zeng@hisilicon.com>

  Link: https://lore.kernel.org/r/1599201467-11000-1-git-send-email-prime.zeng@hisilicon.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/usb/core
hunk_count: 2
covered_count: 2
