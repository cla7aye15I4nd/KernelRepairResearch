id: 91edf9178386a07d06a7
bug_link: https://syzkaller.appspot.com/bug?extid=91edf9178386a07d06a7
title: memory leak in prctl
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3de0c269adc6c2fac0bb1fb11965f0de699dc32b
fix_commit: a1193de562f54c7c9f60ca9f2db96e50a7608de1
datetime: '2023-01-11T16:14:20-08:00'
fix_commit_message: 'mm: fix vma->anon_name memory leak for anonymous shmem VMAs


  free_anon_vma_name() is missing a check for anonymous shmem VMA which

  leads to a memory leak due to refcount not being dropped.  Fix this by

  calling anon_vma_name_put() unconditionally.  It will free vma->anon_name

  whenever it''s non-NULL.


  Link: https://lkml.kernel.org/r/20230105000241.1450843-1-surenb@google.com

  Fixes: d09e8ca6cb93 ("mm: anonymous shared memory naming")

  Signed-off-by: Suren Baghdasaryan <surenb@google.com>

  Suggested-by: David Hildenbrand <david@redhat.com>

  Reviewed-by: David Hildenbrand <david@redhat.com>

  Reported-by: syzbot+91edf9178386a07d06a7@syzkaller.appspotmail.com

  Cc: Hugh Dickins <hughd@google.com>

  Cc: Pasha Tatashin <pasha.tatashin@soleen.com>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  '
submodule:
- include/linux
hunk_count: 1
covered_count: 0
