id: 25bdb7b1703639abd498
bug_link: https://syzkaller.appspot.com/bug?extid=25bdb7b1703639abd498
title: memory leak in fbcon_set_font (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b20a558d377c73ed1eb1247046a5e16fe41da173
fix_commit: 3c3bfb8586f848317ceba5d777e11204ba3e5758
datetime: '2022-12-14T20:01:51+01:00'
fix_commit_message: 'fbdev: fbcon: release buffer when fbcon_do_set_font() failed


  syzbot is reporting memory leak at fbcon_do_set_font() [1], for

  commit a5a923038d70 ("fbdev: fbcon: Properly revert changes when

  vc_resize() failed") missed that the buffer might be newly allocated

  by fbcon_set_font().


  Link: https://syzkaller.appspot.com/bug?extid=25bdb7b1703639abd498 [1]

  Reported-by: syzbot <syzbot+25bdb7b1703639abd498@syzkaller.appspotmail.com>

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Tested-by: syzbot <syzbot+25bdb7b1703639abd498@syzkaller.appspotmail.com>

  Fixes: a5a923038d70 ("fbdev: fbcon: Properly revert changes when vc_resize() failed")

  CC: stable@vger.kernel.org # 5.15+

  Signed-off-by: Helge Deller <deller@gmx.de>

  '
submodule:
- drivers/video/fbdev/core
hunk_count: 1
covered_count: 0
