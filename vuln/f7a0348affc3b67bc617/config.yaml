id: f7a0348affc3b67bc617
bug_link: https://syzkaller.appspot.com/bug?extid=f7a0348affc3b67bc617
title: general protection fault in snd_rawmidi_ioctl_compat
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a3dafb2200bf3c13905a088e82ae11f1eb275a83
fix_commit: 8a56ef4f3ffba9ebf4967b61ef600b0a7ba10f11
datetime: '2018-04-19T18:16:15+02:00'
fix_commit_message: 'ALSA: rawmidi: Fix missing input substream checks in compat ioctls


  Some rawmidi compat ioctls lack of the input substream checks

  (although they do check only for rfile->output).  This many eventually

  lead to an Oops as NULL substream is passed to the rawmidi core

  functions.


  Fix it by adding the proper checks before each function call.


  The bug was spotted by syzkaller.


  Reported-by: syzbot+f7a0348affc3b67bc617@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core
hunk_count: 4
covered_count: 4
