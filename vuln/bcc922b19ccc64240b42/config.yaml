id: bcc922b19ccc64240b42
bug_link: https://syzkaller.appspot.com/bug?extid=bcc922b19ccc64240b42
title: memory leak in con_do_clear_unimap
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9f299d3264c67a892af87337dbaa0bdd20830c0c
fix_commit: 211b4d42b70f1c1660feaa968dac0efc2a96ac4d
datetime: '2021-03-28T14:16:47+02:00'
fix_commit_message: 'tty: fix memory leak in vc_deallocate


  syzbot reported memory leak in tty/vt.

  The problem was in VT_DISALLOCATE ioctl cmd.

  After allocating unimap with PIO_UNIMAP it wasn''t

  freed via VT_DISALLOCATE, but vc_cons[currcons].d was

  zeroed.


  Reported-by: syzbot+bcc922b19ccc64240b42@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Cc: stable <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20210327214443.21548-1-paskripkin@gmail.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/tty/vt
hunk_count: 1
covered_count: 0
