id: 889397c820fa56adf25d
bug_link: https://syzkaller.appspot.com/bug?extid=889397c820fa56adf25d
title: memory leak in em28xx_dvb_init
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 73c9a3f3b3465be8b7c71ba736c2696290a43bf8
fix_commit: 0ae10a7dc8992ee682ff0b1752ff7c83d472eef1
datetime: '2021-04-06T10:36:58+02:00'
fix_commit_message: 'media: em28xx: fix memory leak


  If some error occurs, URB buffers should also be freed. If they aren''t

  freed with the dvb here, the em28xx_dvb_fini call doesn''t frees the URB

  buffers as dvb is set to NULL. The function in which error occurs should

  do all the cleanup for the allocations it had done.


  Tested the patch with the reproducer provided by syzbot. This patch

  fixes the memleak.


  Reported-by: syzbot+889397c820fa56adf25d@syzkaller.appspotmail.com

  Signed-off-by: Muhammad Usama Anjum <musamaanjum@gmail.com>

  Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>

  '
submodule:
- drivers/media/usb/em28xx
hunk_count: 1
covered_count: 0
