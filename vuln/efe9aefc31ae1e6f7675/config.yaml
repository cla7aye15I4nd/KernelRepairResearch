id: efe9aefc31ae1e6f7675
bug_link: https://syzkaller.appspot.com/bug?extid=efe9aefc31ae1e6f7675
title: memory leak in v4l2_ctrl_handler_init_class
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 18a4ca76ada464b3240f194800d41ea21fbb4229
fix_commit: 9c39be40c0155c43343f53e3a439290c0fec5542
datetime: '2021-03-11T11:59:44+01:00'
fix_commit_message: 'media: drivers/media/usb: fix memory leak in zr364xx_probe


  syzbot reported memory leak in zr364xx_probe()[1].

  The problem was in invalid error handling order.

  All error conditions rigth after v4l2_ctrl_handler_init()

  must call v4l2_ctrl_handler_free().


  Reported-by: syzbot+efe9aefc31ae1e6f7675@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>

  '
submodule:
- drivers/media/usb/zr364xx
hunk_count: 5
covered_count: 1
