id: 98edc2df894917b3431f
bug_link: https://syzkaller.appspot.com/bug?extid=98edc2df894917b3431f
title: 'KASAN: slab-use-after-free Read in vhost_task_fn'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ba704ff4e142fd3cfaf3379dd3b3b946754e06e3
fix_commit: db5247d9bf5c6ade9fd70b4e4897441e0269b233
datetime: '2024-05-22T08:31:15-04:00'
fix_commit_message: "vhost_task: Handle SIGKILL by flushing work and exiting\n\nInstead\
  \ of lingering until the device is closed, this has us handle\nSIGKILL by:\n\n1.\
  \ marking the worker as killed so we no longer try to use it with\n   new virtqueues\
  \ and new flush operations.\n2. setting the virtqueue to worker mapping so no new\
  \ works are queued.\n3. running all the exiting works.\n\nSuggested-by: Edward Adam\
  \ Davis <eadavis@qq.com>\nReported-and-tested-by: syzbot+98edc2df894917b3431f@syzkaller.appspotmail.com\n\
  Message-Id: <tencent_546DA49414E876EEBECF2C78D26D242EE50A@qq.com>\nSigned-off-by:\
  \ Mike Christie <michael.christie@oracle.com>\nMessage-Id: <20240316004707.45557-9-michael.christie@oracle.com>\n\
  Signed-off-by: Michael S. Tsirkin <mst@redhat.com>\n"
submodule:
- drivers/vhost
- include/linux/sched
- kernel
hunk_count: 14
covered_count: 8
