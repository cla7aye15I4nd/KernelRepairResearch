id: 568dc81cd20b72d4a49f
bug_link: https://syzkaller.appspot.com/bug?extid=568dc81cd20b72d4a49f
title: WARNING in cpuset_write_resmask
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: daadb3bd0e8d3e317e36bc2c1542e86c528665e5
fix_commit: d068eebbd4822b6c14a7ea375dfe53ca5c69c776
datetime: '2022-01-12T11:24:45-10:00'
fix_commit_message: 'cgroup/cpuset: Make child cpusets restrict parents on v1 hierarchy


  The commit 1f1562fcd04a ("cgroup/cpuset: Don''t let child cpusets

  restrict parent in default hierarchy") inteded to relax the check only

  on the default hierarchy (or v2 mode) but it dropped the check in v1

  too.


  This patch returns and separates the legacy-only validations so that

  they can be considered only in the v1 mode, which should enforce the old

  constraints for the sake of compatibility.


  Fixes: 1f1562fcd04a ("cgroup/cpuset: Don''t let child cpusets restrict parent in
  default hierarchy")

  Suggested-by: Waiman Long <longman@redhat.com>

  Signed-off-by: Michal Koutn√Ω <mkoutny@suse.com>

  Reviewed-by: Waiman Long <longman@redhat.com>

  Signed-off-by: Tejun Heo <tj@kernel.org>

  '
submodule:
- kernel/cgroup
hunk_count: 3
covered_count: 0
