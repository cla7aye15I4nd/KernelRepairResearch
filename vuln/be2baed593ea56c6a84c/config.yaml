id: be2baed593ea56c6a84c
bug_link: https://syzkaller.appspot.com/bug?extid=be2baed593ea56c6a84c
title: 'INFO: task hung in hci_req_sync'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8274db0776d12de1be87a8504e60a608cb1b2212
fix_commit: f41a4b2b5eb7872109723dab8ae1603bdd9d9ec1
datetime: '2021-08-19T17:27:39+02:00'
fix_commit_message: 'Bluetooth: add timeout sanity check to hci_inquiry


  Syzbot hit "task hung" bug in hci_req_sync(). The problem was in

  unreasonable huge inquiry timeout passed from userspace.

  Fix it by adding sanity check for timeout value to hci_inquiry().


  Since hci_inquiry() is the only user of hci_req_sync() with user

  controlled timeout value, it makes sense to check timeout value in

  hci_inquiry() and don''t touch hci_req_sync().


  Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")

  Reported-and-tested-by: syzbot+be2baed593ea56c6a84c@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

  '
submodule:
- net/bluetooth
hunk_count: 1
covered_count: 1
