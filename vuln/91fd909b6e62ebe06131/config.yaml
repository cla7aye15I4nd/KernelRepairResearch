id: 91fd909b6e62ebe06131
bug_link: https://syzkaller.appspot.com/bug?extid=91fd909b6e62ebe06131
title: 'BUG: MAX_LOCKDEP_CHAIN_HLOCKS too low!'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ea84c842900872f5b8d6d4754cf0fa37d6672011
fix_commit: 1a33e10e4a95cb109ff1145098175df3113313ef
datetime: '2020-05-04T12:05:56-07:00'
fix_commit_message: 'net: partially revert dynamic lockdep key changes


  This patch reverts the folowing commits:


  commit 064ff66e2bef84f1153087612032b5b9eab005bd

  "bonding: add missing netdev_update_lockdep_key()"


  commit 53d374979ef147ab51f5d632dfe20b14aebeccd0

  "net: avoid updating qdisc_xmit_lock_key in netdev_update_lockdep_key()"


  commit 1f26c0d3d24125992ab0026b0dab16c08df947c7

  "net: fix kernel-doc warning in <linux/netdevice.h>"


  commit ab92d68fc22f9afab480153bd82a20f6e2533769

  "net: core: add generic lockdep keys"


  but keeps the addr_list_lock_key because we still lock

  addr_list_lock nestedly on stack devices, unlikely xmit_lock

  this is safe because we don''t take addr_list_lock on any fast

  path.


  Reported-and-tested-by: syzbot+aaa6fa4949cc5d9b7b25@syzkaller.appspotmail.com

  Cc: Dmitry Vyukov <dvyukov@google.com>

  Cc: Taehee Yoo <ap420073@gmail.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Acked-by: Taehee Yoo <ap420073@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net
- drivers/net/bonding
- drivers/net/ethernet/netronome/nfp
- drivers/net/hamradio
- drivers/net/hyperv
- drivers/net/ipvlan
- drivers/net/ppp
- drivers/net/team
- drivers/net/wireless/intersil/hostap
- include/linux
- net/8021q
- net/batman-adv
- net/bluetooth
- net/core
- net/dsa
- net/ieee802154
- net/l2tp
- net/netrom
- net/rose
- net/sched
hunk_count: 39
covered_count: 0
