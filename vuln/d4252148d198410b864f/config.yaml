id: d4252148d198410b864f
bug_link: https://syzkaller.appspot.com/bug?extid=d4252148d198410b864f
title: 'KASAN: invalid-free in p9stat_free'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 81c99089bce693b94b775b6eb888115d2d540086
fix_commit: 62e3941776fea8678bb8120607039410b1b61a65
datetime: '2018-08-29T13:39:57+09:00'
fix_commit_message: '9p: clear dangling pointers in p9stat_free


  p9stat_free is more of a cleanup function than a ''free'' function as it

  only frees the content of the struct; there are chances of use-after-free

  if it is improperly used (e.g. p9stat_free called twice as it used to be

  possible to)


  Clearing dangling pointers makes the function idempotent and safer to use.


  Link: http://lkml.kernel.org/r/1535410108-20650-2-git-send-email-asmadeus@codewreck.org

  Signed-off-by: Dominique Martinet <dominique.martinet@cea.fr>

  Reported-by: syzbot+d4252148d198410b864f@syzkaller.appspotmail.com

  '
submodule:
- net/9p
hunk_count: 1
covered_count: 1
