id: cce1ee31614c171f5595
bug_link: https://syzkaller.appspot.com/bug?extid=cce1ee31614c171f5595
title: WARNING in rtl92cu_hw_init
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b250200e2ee4579932ba38c610cb90bef642011b
fix_commit: 8b144dedb928e4e2f433a328d58f44c3c098d63e
datetime: '2021-12-20T21:04:49+02:00'
fix_commit_message: "rtlwifi: rtl8192cu: Fix WARNING when calling local_irq_restore()\
  \ with interrupts enabled\n\nSyzbot reports the following WARNING:\n\n[200~raw_local_irq_restore()\
  \ called with IRQs enabled\nWARNING: CPU: 1 PID: 1206 at kernel/locking/irqflag-debug.c:10\n\
  \   warn_bogus_irq_restore+0x1d/0x20 kernel/locking/irqflag-debug.c:10\n\nHardware\
  \ initialization for the rtl8188cu can run for as long as 350 ms,\nand the routine\
  \ may be called with interrupts disabled. To avoid locking\nthe machine for this\
  \ long, the current routine saves the interrupt flags\nand enables local interrupts.\
  \ The problem is that it restores the flags\nat the end without disabling local\
  \ interrupts first.\n\nThis patch fixes commit a53268be0cb9 (\"rtlwifi: rtl8192cu:\
  \ Fix too long\ndisable of IRQs\").\n\nReported-by: syzbot+cce1ee31614c171f5595@syzkaller.appspotmail.com\n\
  Cc: stable@vger.kernel.org\nFixes: a53268be0cb9 (\"rtlwifi: rtl8192cu: Fix too long\
  \ disable of IRQs\")\nSigned-off-by: Larry Finger <Larry.Finger@lwfinger.net>\n\
  Signed-off-by: Kalle Valo <kvalo@kernel.org>\nLink: https://lore.kernel.org/r/20211215171105.20623-1-Larry.Finger@lwfinger.net\n"
submodule:
- drivers/net/wireless/realtek/rtlwifi/rtl8192cu
hunk_count: 1
covered_count: 1
