id: aea1ad91e854d0a83e04
bug_link: https://syzkaller.appspot.com/bug?extid=aea1ad91e854d0a83e04
title: 'UBSAN: array-index-out-of-bounds in dbFindLeaf'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 64933ab7b04881c6c18b21ff206c12278341c72e
fix_commit: 22cad8bc1d36547cdae0eef316c47d917ce3147c
datetime: '2023-10-04T09:17:53-05:00'
fix_commit_message: 'jfs: fix array-index-out-of-bounds in dbFindLeaf


  Currently while searching for dmtree_t for sufficient free blocks there

  is an array out of bounds while getting element in tp->dm_stree. To add

  the required check for out of bound we first need to determine the type

  of dmtree. Thus added an extra parameter to dbFindLeaf so that the type

  of tree can be determined and the required check can be applied.


  Reported-by: syzbot+aea1ad91e854d0a83e04@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=aea1ad91e854d0a83e04

  Signed-off-by: Manas Ghandat <ghandatmanas@gmail.com>

  Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>

  '
submodule:
- fs/jfs
hunk_count: 5
covered_count: 4
