id: 0ba9909df31c6a36974d
bug_link: https://syzkaller.appspot.com/bug?extid=0ba9909df31c6a36974d
title: divide error in do_journal_end (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5b9fedb31e476693c90d8ee040e7d4c51b3e7cc4
fix_commit: a149127be52fa7eaf5b3681a0317a2bbb772d5a9
datetime: '2021-05-17T15:07:54+02:00'
fix_commit_message: 'reiserfs: add check for invalid 1st journal block


  syzbot reported divide error in reiserfs.

  The problem was in incorrect journal 1st block.


  Syzbot''s reproducer manualy generated wrong superblock

  with incorrect 1st block. In journal_init() wasn''t

  any checks about this particular case.


  For example, if 1st journal block is before superblock

  1st block, it can cause zeroing important superblock members

  in do_journal_end().


  Link: https://lore.kernel.org/r/20210517121545.29645-1-paskripkin@gmail.com

  Reported-by: syzbot+0ba9909df31c6a36974d@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Signed-off-by: Jan Kara <jack@suse.cz>

  '
submodule:
- fs/reiserfs
hunk_count: 1
covered_count: 0
