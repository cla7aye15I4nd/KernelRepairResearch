id: a64a382964bf6c71a9c0
bug_link: https://syzkaller.appspot.com/bug?extid=a64a382964bf6c71a9c0
title: possible deadlock in usb_deregister_dev
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2ca359f4f8b954b3a9d15a89f22a8b7283e7669f
fix_commit: c468a8aa790e0dfe0a7f8a39db282d39c2c00b46
datetime: '2019-08-08T12:43:18+02:00'
fix_commit_message: 'usb: iowarrior: fix deadlock on disconnect


  We have to drop the mutex before we close() upon disconnect()

  as close() needs the lock. This is safe to do by dropping the

  mutex as intfdata is already set to NULL, so open() will fail.


  Fixes: 03f36e885fc26 ("USB: open disconnect race in iowarrior")

  Reported-by: syzbot+a64a382964bf6c71a9c0@syzkaller.appspotmail.com

  Cc: stable <stable@vger.kernel.org>

  Signed-off-by: Oliver Neukum <oneukum@suse.com>

  Link: https://lore.kernel.org/r/20190808092728.23417-1-oneukum@suse.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/usb/misc
hunk_count: 1
covered_count: 1
