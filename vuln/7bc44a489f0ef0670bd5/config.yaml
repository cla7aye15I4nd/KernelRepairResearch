id: 7bc44a489f0ef0670bd5
bug_link: https://syzkaller.appspot.com/bug?extid=7bc44a489f0ef0670bd5
title: 'KMSAN: uninit-value in ima_add_template_entry'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 90d35da658da8cff0d4ecbb5113f5fac9d00eb72
fix_commit: 893e5e9b7369a02e7ceaa6d98db6739162005b03
datetime: '2024-03-07T10:21:00+08:00'
fix_commit_message: 'erofs: fix uninitialized page cache reported by KMSAN


  syzbot reports a KMSAN reproducer [1] which generates a crafted

  filesystem image and causes IMA to read uninitialized page cache.


  Later, (rq->outputsize > rq->inputsize) will be formally supported

  after either large uncompressed pclusters (> block size) or big

  lclusters are landed.  However, currently there is no way to generate

  such filesystems by using mkfs.erofs.


  Thus, let''s mark this condition as unsupported for now.


  [1] https://lore.kernel.org/r/0000000000002be12a0611ca7ff8@google.com


  Reported-and-tested-by: syzbot+7bc44a489f0ef0670bd5@syzkaller.appspotmail.com

  Fixes: 1ca01520148a ("erofs: refine z_erofs_transform_plain() for sub-page block
  support")

  Reviewed-by: Sandeep Dhavale <dhavale@google.com>

  Reviewed-by: Yue Hu <huyue2@coolpad.com>

  Reviewed-by: Chao Yu <chao@kernel.org>

  Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  Link: https://lore.kernel.org/r/20240304035339.425857-1-hsiangkao@linux.alibaba.com

  '
submodule:
- fs/erofs
hunk_count: 1
covered_count: 0
