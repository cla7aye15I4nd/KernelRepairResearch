id: bbc3a11c4da63c1b74d6
bug_link: https://syzkaller.appspot.com/bug?extid=bbc3a11c4da63c1b74d6
title: 'KASAN: use-after-free Write in __linkwatch_run_queue'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 76be93fc0702322179bb0ea87295d820ee46ad14
fix_commit: c75d1d5248c0c97996051809ad0e9f154ba5d76e
datetime: '2020-07-23T15:17:04-07:00'
fix_commit_message: 'bonding: check return value of register_netdevice() in bond_newlink()


  Very similar to commit 544f287b8495

  ("bonding: check error value of register_netdevice() immediately"),

  we should immediately check the return value of register_netdevice()

  before doing anything else.


  Fixes: 005db31d5f5f ("bonding: set carrier off for devices created through netlink")

  Reported-and-tested-by: syzbot+bbc3a11c4da63c1b74d6@syzkaller.appspotmail.com

  Cc: Beniamino Galvani <bgalvani@redhat.com>

  Cc: Taehee Yoo <ap420073@gmail.com>

  Cc: Jay Vosburgh <j.vosburgh@gmail.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net/bonding
hunk_count: 1
covered_count: 0
