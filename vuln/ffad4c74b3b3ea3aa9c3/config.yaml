id: ffad4c74b3b3ea3aa9c3
bug_link: https://syzkaller.appspot.com/bug?extid=ffad4c74b3b3ea3aa9c3
title: 'KASAN: use-after-free Read in usb_audio_disconnect'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 30dea07180de3aa0ad613af88431ef4e34b5ef68
fix_commit: c5aa956eaeb05fe87e33433d7fd9f5e4d23c7416
datetime: '2021-03-09T07:40:46+01:00'
fix_commit_message: 'ALSA: usb-audio: fix use after free in usb_audio_disconnect


  The problem was in wrong "if" placement. chip->quirk_type is freed

  in snd_card_free_when_closed(), but inside if statement it''s accesed.


  Fixes: 9799110825db ("ALSA: usb-audio: Disable USB autosuspend properly in setup_disable_autosuspend()")

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/16da19126ff461e5e64a9aec648cce28fb8ed73e.1615242183.git.paskripkin@gmail.com

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/usb
hunk_count: 2
covered_count: 2
