id: 36218cddfd84b5cc263e
bug_link: https://syzkaller.appspot.com/bug?extid=36218cddfd84b5cc263e
title: 'KASAN: slab-use-after-free Write in kvfree_call_rcu'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9b15c6cf8d2e82c8427cd06f535d8de93b5b995c
fix_commit: d5fee261dfd9e17b08b1df8471ac5d5736070917
datetime: '2024-10-25T17:53:40+02:00'
fix_commit_message: 'wifi: cfg80211: clear wdev->cqm_config pointer on free


  When we free wdev->cqm_config when unregistering, we also

  need to clear out the pointer since the same wdev/netdev

  may get re-registered in another network namespace, then

  destroyed later, running this code again, which results in

  a double-free.


  Reported-by: syzbot+36218cddfd84b5cc263e@syzkaller.appspotmail.com

  Fixes: 37c20b2effe9 ("wifi: cfg80211: fix cqm_config access race")

  Cc: stable@vger.kernel.org

  Link: https://patch.msgid.link/20241022161742.7c34b2037726.I121b9cdb7eb180802eafc90b493522950d57ee18@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/wireless
hunk_count: 1
covered_count: 1
