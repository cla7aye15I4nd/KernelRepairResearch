id: 02d9172bf4c43104cd70
bug_link: https://syzkaller.appspot.com/bug?extid=02d9172bf4c43104cd70
title: 'KASAN: global-out-of-bounds Read in precalculate_color'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 209d926b2a2ea6cde9f3cd8cdfab408c4eedb4f3
fix_commit: e3158a5e7e661786b3ab650c7e4d21024e8eff0f
datetime: '2020-08-26T18:51:16+02:00'
fix_commit_message: 'media: vivid: Fix global-out-of-bounds read in precalculate_color()


  vivid_meta_out_process() is setting `brightness`, `contrast`, `saturation`

  and `hue` using tpg_s_*(). This is wrong, since tpg_s_*() do not provide

  range checks. Using tpg_s_*() here also makes the control framework

  out-of-sync with the actual values. Use v4l2_ctrl_s_ctrl() instead.


  This issue has been reported by syzbot as an out-of-bounds read bug in

  precalculate_color().


  Reported-and-tested-by: syzbot+02d9172bf4c43104cd70@syzkaller.appspotmail.com

  Link: https://syzkaller.appspot.com/bug?extid=02d9172bf4c43104cd70


  Fixes: 746facd39370 ("media: vivid: Add metadata output support")

  Suggested-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Peilin Ye <yepeilin.cs@gmail.com>

  Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>

  '
submodule:
- drivers/media/test-drivers/vivid
hunk_count: 1
covered_count: 0
