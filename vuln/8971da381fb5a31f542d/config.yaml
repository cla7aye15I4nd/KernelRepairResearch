id: 8971da381fb5a31f542d
bug_link: https://syzkaller.appspot.com/bug?extid=8971da381fb5a31f542d
title: general protection fault in taprio_dequeue_soft
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5b33afee93a1e7665a5ffae027fc66f9376f4ea7
fix_commit: 44d4775ca51805b376a8db5b34f650434a08e556
datetime: '2020-12-17T10:57:57-08:00'
fix_commit_message: 'net/sched: sch_taprio: reset child qdiscs before freeing them


  syzkaller shows that packets can still be dequeued while taprio_destroy()

  is running. Let sch_taprio use the reset() function to cancel the advance

  timer and drop all skbs from the child qdiscs.


  Fixes: 5a781ccbd19e ("tc: Add support for configuring the taprio scheduler")

  Link: https://syzkaller.appspot.com/bug?id=f362872379bf8f0017fb667c1ab158f2d1e764ae

  Reported-by: syzbot+8971da381fb5a31f542d@syzkaller.appspotmail.com

  Signed-off-by: Davide Caratti <dcaratti@redhat.com>

  Acked-by: Vinicius Costa Gomes <vinicius.gomes@intel.com>

  Link: https://lore.kernel.org/r/63b6d79b0e830ebb0283e020db4df3cdfdfb2b94.1608142843.git.dcaratti@redhat.com

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/sched
hunk_count: 3
covered_count: 0
