id: 21b29db13c065852f64b
bug_link: https://syzkaller.appspot.com/bug?extid=21b29db13c065852f64b
title: 'BUG: unable to handle kernel NULL pointer dereference in tc_bind_tclass'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 94a72b3f024fc7e9ab640897a1e38583a470659d
fix_commit: 8b142a00edcf8422ca48b8de88d286efb500cb53
datetime: '2019-09-10T18:28:56+01:00'
fix_commit_message: 'net_sched: check cops->tcf_block in tc_bind_tclass()


  At least sch_red and sch_tbf don''t implement ->tcf_block()

  while still have a non-zero tc "class".


  Instead of adding nop implementations to each of such qdisc''s,

  we can just relax the check of cops->tcf_block() in

  tc_bind_tclass(). They don''t support TC filter anyway.


  Reported-by: syzbot+21b29db13c065852f64b@syzkaller.appspotmail.com

  Cc: Jamal Hadi Salim <jhs@mojatatu.com>

  Cc: Jiri Pirko <jiri@resnulli.us>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sched
hunk_count: 1
covered_count: 1
