id: 401145a9a237779feb26
bug_link: https://syzkaller.appspot.com/bug?extid=401145a9a237779feb26
title: 'BUG: unable to handle kernel paging request in clear_user_rep_good'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: adfcf4231b8cbc2d9c1e7bfaa965b907e60639eb
fix_commit: d2c95f9d6802cc518d71d9795f4d9da54fb4e24d
datetime: '2023-04-18T17:05:28-07:00'
fix_commit_message: 'x86: don''t use REP_GOOD or ERMS for user memory clearing


  The modern target to use is FSRS (Fast Short REP STOS), and the other

  cases should only be used for bigger areas (ie mainly things like page

  clearing).


  Note! This changes the conditional for the inlining from FSRM ("fast

  short rep movs") to FSRS ("fast short rep stos").


  We''ll have a separate fixup for AMD microarchitectures that have a good

  ''rep stosb'' yet do not set the new Intel-specific FSRS bit (because FSRM

  was there first).


  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- arch/x86/include/asm
- arch/x86/lib
- tools/objtool
hunk_count: 4
covered_count: 3
