id: 91adee8d9ebb9193d22d
bug_link: https://syzkaller.appspot.com/bug?extid=91adee8d9ebb9193d22d
title: memory leak in pcan_usb_fd_init
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 98184612aca0a9ee42b8eb0262a49900ee9eef0d
fix_commit: a0b96b4a62745397aee662670cfc2157bac03f55
datetime: '2021-04-01T15:55:15-07:00'
fix_commit_message: "drivers: net: fix memory leak in peak_usb_create_dev\n\nsyzbot\
  \ reported memory leak in peak_usb.\nThe problem was in case of failure after calling\n\
  ->dev_init()[2] in peak_usb_create_dev()[1]. The data\nallocated int dev_init()\
  \ wasn't freed, so simple\n->dev_free() call fix this problem.\n\nbacktrace:\n \
  \   [<0000000079d6542a>] kmalloc include/linux/slab.h:552 [inline]\n    [<0000000079d6542a>]\
  \ kzalloc include/linux/slab.h:682 [inline]\n    [<0000000079d6542a>] pcan_usb_fd_init+0x156/0x210\
  \ drivers/net/can/usb/peak_usb/pcan_usb_fd.c:868   [2]\n    [<00000000c09f9057>]\
  \ peak_usb_create_dev drivers/net/can/usb/peak_usb/pcan_usb_core.c:851 [inline]\
  \ [1]\n    [<00000000c09f9057>] peak_usb_probe+0x389/0x490 drivers/net/can/usb/peak_usb/pcan_usb_core.c:949\n\
  \nReported-by: syzbot+91adee8d9ebb9193d22d@syzkaller.appspotmail.com\nSigned-off-by:\
  \ Pavel Skripkin <paskripkin@gmail.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- drivers/net/can/usb/peak_usb
hunk_count: 2
covered_count: 2
