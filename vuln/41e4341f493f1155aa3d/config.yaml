id: 41e4341f493f1155aa3d
bug_link: https://syzkaller.appspot.com/bug?extid=41e4341f493f1155aa3d
title: WARNING in hrtimer_forward (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2d63e6530ec1f50f57c1cde598274d055fb7a36c
fix_commit: 6ee0270943b5af02fd6703d5b580d7ca96ff1176
datetime: '2024-10-23T16:46:53+02:00'
fix_commit_message: 'wifi: mac80211_hwsim: use hrtimer_active()


  Instead of hrtimer_is_queued(), use hrtimer_active() since

  it might be running concurrently, and then it''s not queued

  at that point in time, as suggested by Thomas Gleixner in

  https://lore.kernel.org/87plqn5psu.ffs@tglx, I just never

  got to this for ages.


  I think the concurrency is otherwise fine since we''ll get

  to cancel if we''re actually removing things, and otherwise

  we just send a beacon at slightly the wrong time or so.


  Reported-by: syzbot+41e4341f493f1155aa3d@syzkaller.appspotmail.com

  Link: https://patch.msgid.link/20241011145230.5a4d38d4ff9b.Iac0ec316a0c9a7b2619abe52ddc8e04c25d8c7e1@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- drivers/net/wireless/virtual
hunk_count: 2
covered_count: 0
