id: 47dd250f527cb7bebf24
bug_link: https://syzkaller.appspot.com/bug?extid=47dd250f527cb7bebf24
title: 'KASAN: use-after-free Read in filp_close'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6319194ec57b0452dcda4589d24c4e7db299c5bf
fix_commit: 40a1926022d128057376d35167128a7c74e3dca4
datetime: '2022-06-05T15:03:03-04:00'
fix_commit_message: 'fix the breakage in close_fd_get_file() calling conventions change


  It used to grab an extra reference to struct file rather than

  just transferring to caller the one it had removed from descriptor

  table.  New variant doesn''t, and callers need to be adjusted.


  Reported-and-tested-by: syzbot+47dd250f527cb7bebf24@syzkaller.appspotmail.com

  Fixes: 6319194ec57b ("Unify the primitives for file descriptor closing")

  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>

  '
submodule:
- drivers/android
- fs
hunk_count: 5
covered_count: 0
