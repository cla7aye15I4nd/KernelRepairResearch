id: 51baee846ddab52d5230
bug_link: https://syzkaller.appspot.com/bug?extid=51baee846ddab52d5230
title: 'KASAN: null-ptr-deref Read in ida_free (4)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a9e01ac8c5ff32669119c40dfdc9e80eb0b7d7aa
fix_commit: af73483f4e8b6f5c68c9aa63257bdd929a9c194a
datetime: '2023-12-21T10:02:28-08:00'
fix_commit_message: 'ida: Fix crash in ida_free when the bitmap is empty


  The IDA usually detects double-frees, but that detection failed to

  consider the case when there are no nearby IDs allocated and so we have a

  NULL bitmap rather than simply having a clear bit.  Add some tests to the

  test-suite to be sure we don''t inadvertently reintroduce this problem.

  Unfortunately they''re quite noisy so include a message to disregard

  the warnings.


  Reported-by: Zhenghan Wang <wzhmmmmm@gmail.com>

  Signed-off-by: Matthew Wilcox (Oracle) <willy@infradead.org>

  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- lib
hunk_count: 3
covered_count: 1
