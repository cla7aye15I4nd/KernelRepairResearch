id: 2ae90e873e97f1faf6f2
bug_link: https://syzkaller.appspot.com/bug?extid=2ae90e873e97f1faf6f2
title: 'KASAN: use-after-free Read in z_erofs_transform_plain'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d5d188b8f8b38d3d71dd05993874b4fc9284ce95
fix_commit: c505feba4c0d76084e56ec498ce819f02a7043ae
datetime: '2022-12-07T10:56:31+08:00'
fix_commit_message: "erofs: validate the extent length for uncompressed pclusters\n\
  \nsyzkaller reported a KASAN use-after-free:\nhttps://syzkaller.appspot.com/bug?extid=2ae90e873e97f1faf6f2\n\
  \nThe referenced fuzzed image actually has two issues:\n - m_pa == 0 as a non-inlined\
  \ pcluster;\n - The logical length is longer than its physical length.\n\nThe first\
  \ issue has already been addressed.  This patch addresses\nthe second issue by checking\
  \ the extent length validity.\n\nReported-by: syzbot+2ae90e873e97f1faf6f2@syzkaller.appspotmail.com\n\
  Fixes: 02827e1796b3 (\"staging: erofs: add erofs_map_blocks_iter\")\nReviewed-by:\
  \ Chao Yu <chao@kernel.org>\nSigned-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>\n\
  Link: https://lore.kernel.org/r/20221205150050.47784-2-hsiangkao@linux.alibaba.com\n"
submodule:
- fs/erofs
hunk_count: 1
covered_count: 0
