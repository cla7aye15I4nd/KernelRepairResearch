id: 200ab9a0f030458682a9
bug_link: https://syzkaller.appspot.com/bug?extid=200ab9a0f030458682a9
title: WARNING in io_get_cqe_overflow
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 423d5081d0451faa59a707e57373801da5b40141
fix_commit: e12d7a46f65ae4b7d58a5e0c1cbfa825cf8d830d
datetime: '2023-01-19T10:43:59-07:00'
fix_commit_message: 'io_uring/msg_ring: fix missing lock on overflow for IOPOLL


  If the target ring is configured with IOPOLL, then we always need to hold

  the target ring uring_lock before posting CQEs. We could just grab it

  unconditionally, but since we don''t expect many target rings to be of this

  type, make grabbing the uring_lock conditional on the ring type.


  Link: https://lore.kernel.org/io-uring/Y8krlYa52%2F0YGqkg@ip-172-31-85-199.ec2.internal/

  Reported-by: Xingyuan Mo <hdthky0@gmail.com>

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- io_uring
hunk_count: 3
covered_count: 3
