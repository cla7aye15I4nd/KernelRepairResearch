id: cb1e0978f6bf46b83a58
bug_link: https://syzkaller.appspot.com/bug?extid=cb1e0978f6bf46b83a58
title: 'KMSAN: kernel-infoleak in iommufd_vfio_ioctl'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: bed9e516f1183faa0e484479701cc669efd9049a
fix_commit: b3551ead616318ea155558cdbe7e91495b8d9b33
datetime: '2023-02-14T16:49:55-04:00'
fix_commit_message: 'iommufd: Make sure to zero vfio_iommu_type1_info before copying
  to user


  Missed a zero initialization here. Most of the struct is filled with

  a copy_from_user(), however minsz for that copy is smaller than the

  actual struct by 8 bytes, thus we don''t fill the padding.


  Cc: stable@vger.kernel.org # 6.1+

  Fixes: d624d6652a65 ("iommufd: vfio container FD ioctl compatibility")

  Link: https://lore.kernel.org/r/0-v1-a74499ece799+1a-iommufd_get_info_leak_jgg@nvidia.com

  Reviewed-by: Kevin Tian <kevin.tian@intel.com>

  Reported-by: syzbot+cb1e0978f6bf46b83a58@syzkaller.appspotmail.com

  Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>

  '
submodule:
- drivers/iommu/iommufd
hunk_count: 1
covered_count: 1
