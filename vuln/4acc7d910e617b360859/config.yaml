id: 4acc7d910e617b360859
bug_link: https://syzkaller.appspot.com/bug?extid=4acc7d910e617b360859
title: 'BUG: sleeping function called from invalid context in ext4_update_super'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 19482792113fa1dc419f9bc7b04b9dbdaa5256fd
fix_commit: f451fd97dd2b78f286379203a47d9d295c467255
datetime: '2023-06-14T22:24:05-04:00'
fix_commit_message: 'ext4: drop the call to ext4_error() from ext4_get_group_info()


  A recent patch added a call to ext4_error() which is problematic since

  some callers of the ext4_get_group_info() function may be holding a

  spinlock, whereas ext4_error() must never be called in atomic context.


  This triggered a report from Syzbot: "BUG: sleeping function called from

  invalid context in ext4_update_super" (see the link below).


  Therefore, drop the call to ext4_error() from ext4_get_group_info(). In

  the meantime use eight characters tabs instead of nine characters ones.


  Reported-by: syzbot+4acc7d910e617b360859@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/all/00000000000070575805fdc6cdb2@google.com/

  Fixes: 5354b2af3406 ("ext4: allow ext4_get_group_info() to fail")

  Suggested-by: Theodore Ts''o <tytso@mit.edu>

  Signed-off-by: Fabio M. De Francesco <fmdefrancesco@gmail.com>

  Link: https://lore.kernel.org/r/20230614100446.14337-1-fmdefrancesco@gmail.com

  '
submodule:
- fs/ext4
hunk_count: 1
covered_count: 1
