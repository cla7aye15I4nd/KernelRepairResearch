id: dcdc9deefaec44785f32
bug_link: https://syzkaller.appspot.com/bug?extid=dcdc9deefaec44785f32
title: general protection fault in tls_write_space
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6d0d779dca73cd5acb649c54f81401f93098b298
fix_commit: 57c722e932cfb82e9820bbaae1b1f7222ea97b52
datetime: '2019-08-09T19:55:22-07:00'
fix_commit_message: 'net/tls: swap sk_write_space on close


  Now that we swap the original proto and clear the ULP pointer

  on close we have to make sure no callback will try to access

  the freed state. sk_write_space is not part of sk_prot, remember

  to swap it.


  Reported-by: syzbot+dcdc9deefaec44785f32@syzkaller.appspotmail.com

  Fixes: 95fa145479fb ("bpf: sockmap/tls, close can race with map free")

  Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tls
hunk_count: 1
covered_count: 0
