id: a38b0e9f694c379ca7ce
bug_link: https://syzkaller.appspot.com/bug?extid=a38b0e9f694c379ca7ce
title: 'WARNING: kmalloc bug in memdup_user'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: bb7f8f199c354c4cf155b1d6d55f86eaaed7fa5a
fix_commit: 6a21dfc0d0db7b7e0acedce67ca533a6eb19283c
datetime: '2018-03-07T15:18:03-05:00'
fix_commit_message: 'RDMA/ucma: Limit possible option size


  Users of ucma are supposed to provide size of option level,

  in most paths it is supposed to be equal to u8 or u16, but

  it is not the case for the IB path record, where it can be

  multiple of struct ib_path_rec_data.


  This patch takes simplest possible approach and prevents providing

  values more than possible to allocate.


  Reported-by: syzbot+a38b0e9f694c379ca7ce@syzkaller.appspotmail.com

  Fixes: 7ce86409adcd ("RDMA/ucma: Allow user space to set service type")

  Signed-off-by: Leon Romanovsky <leonro@mellanox.com>

  Signed-off-by: Doug Ledford <dledford@redhat.com>

  '
submodule:
- drivers/infiniband/core
hunk_count: 1
covered_count: 1
