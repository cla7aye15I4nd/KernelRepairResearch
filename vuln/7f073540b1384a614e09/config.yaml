id: 7f073540b1384a614e09
bug_link: https://syzkaller.appspot.com/bug?extid=7f073540b1384a614e09
title: possible deadlock in handle_rx
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f3d801baf118c9d452ee7c278df16880c892e669
fix_commit: aaa3149bbee9ba9b4e6f0bd6e3e7d191edeae942
datetime: '2018-03-26T12:59:01-04:00'
fix_commit_message: 'vhost_net: add missing lock nesting notation


  We try to hold TX virtqueue mutex in vhost_net_rx_peek_head_len()

  after RX virtqueue mutex is held in handle_rx(). This requires an

  appropriate lock nesting notation to calm down deadlock detector.


  Fixes: 0308813724606 ("vhost_net: basic polling support")

  Reported-by: syzbot+7f073540b1384a614e09@syzkaller.appspotmail.com

  Signed-off-by: Jason Wang <jasowang@redhat.com>

  Acked-by: Michael S. Tsirkin <mst@redhat.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/vhost
hunk_count: 2
covered_count: 2
