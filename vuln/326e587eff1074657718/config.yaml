id: 326e587eff1074657718
bug_link: https://syzkaller.appspot.com/bug?extid=326e587eff1074657718
title: general protection fault in tipc_sk_fill_sock_diag
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9e8445a56c253f01f6716ac14526a7dae6bc0d46
fix_commit: 4b2e6877b8793b60abb75c15abaaa4377807a358
datetime: '2018-04-04T11:54:35-04:00'
fix_commit_message: 'tipc: Fix namespace violation in tipc_sk_fill_sock_diag


  To fetch UID info for socket diagnostics, we determine the

  namespace of user context using tipc socket instance. This

  may cause namespace violation, as the kernel will remap based

  on UID.


  We fix this by fetching namespace info using the calling userspace

  netlink socket.


  Fixes: c30b70deb5f4 (tipc: implement socket diagnostics for AF_TIPC)

  Reported-by: syzbot+326e587eff1074657718@syzkaller.appspotmail.com

  Acked-by: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: GhantaKrishnamurthy MohanKrishna <mohan.krishna.ghanta.krishnamurthy@ericsson.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tipc
hunk_count: 1
covered_count: 1
