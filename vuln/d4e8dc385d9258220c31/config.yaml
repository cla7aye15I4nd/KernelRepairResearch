id: d4e8dc385d9258220c31
bug_link: https://syzkaller.appspot.com/bug?extid=d4e8dc385d9258220c31
title: 'WARNING: refcount bug in sk_skb_reason_drop'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 30447a1bc0e066e492552b3e5ffeb63c1605dfe2
fix_commit: a8c695005bfe6569acd73d777ca298ddddd66105
datetime: '2024-12-02T09:53:39+01:00'
fix_commit_message: 'can: j1939: j1939_session_new(): fix skb reference counting


  Since j1939_session_skb_queue() does an extra skb_get() for each new

  skb, do the same for the initial one in j1939_session_new() to avoid

  refcount underflow.


  Reported-by: syzbot+d4e8dc385d9258220c31@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=d4e8dc385d9258220c31

  Fixes: 9d71dd0c7009 ("can: add support of SAE J1939 protocol")

  Signed-off-by: Dmitry Antipov <dmantipov@yandex.ru>

  Tested-by: Oleksij Rempel <o.rempel@pengutronix.de>

  Acked-by: Oleksij Rempel <o.rempel@pengutronix.de>

  Link: https://patch.msgid.link/20241105094823.2403806-1-dmantipov@yandex.ru

  [mkl: clean up commit message]

  Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>

  '
submodule:
- net/can
hunk_count: 1
covered_count: 0
