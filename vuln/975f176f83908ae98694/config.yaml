id: 975f176f83908ae98694
bug_link: https://syzkaller.appspot.com/bug?extid=975f176f83908ae98694
title: WARNING in mc1NUM_get_time
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 211e5db19d15a721b2953ea54b8f26c2963720eb
fix_commit: ebb22a05943666155e6da04407cc6e913974c78c
datetime: '2021-02-02T20:35:02+01:00'
fix_commit_message: 'rtc: mc146818: Dont test for bit 0-5 in Register D


  The recent change to validate the RTC turned out to be overly tight.


  While it cures the problem on the reporters machine it breaks machines

  with Intel chipsets which use bit 0-5 of the D register. So check only

  for bit 6 being 0 which is the case on these Intel machines as well.


  Fixes: 211e5db19d15 ("rtc: mc146818: Detect and handle broken RTCs")

  Reported-by: Serge Belyshev <belyshev@depni.sinp.msu.ru>

  Reported-by: Dirk Gouders <dirk@gouders.net>

  Reported-by: Borislav Petkov <bp@suse.de>

  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

  Tested-by: Dirk Gouders <dirk@gouders.net>

  Tested-by: Len Brown <len.brown@intel.com>

  Tested-by: Borislav Petkov <bp@suse.de>

  Acked-by: Alexandre Belloni <alexandre.belloni@bootlin.com>

  Link: https://lore.kernel.org/r/87zh0nbnha.fsf@nanos.tec.linutronix.de


  '
submodule:
- drivers/rtc
hunk_count: 2
covered_count: 1
