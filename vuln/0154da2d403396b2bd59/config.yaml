id: 0154da2d403396b2bd59
bug_link: https://syzkaller.appspot.com/bug?extid=0154da2d403396b2bd59
title: 'KASAN: slab-use-after-free Read in steam_input_open'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a6a4f4e9b8018806cca30049b59a1c3c8b513701
fix_commit: e53fc232a65f7488ab75d03a5b95f06aaada7262
datetime: '2025-03-04T21:46:12+01:00'
fix_commit_message: 'HID: hid-steam: Fix use-after-free when detaching device


  When a hid-steam device is removed it must clean up the client_hdev used for

  intercepting hidraw access. This can lead to scheduling deferred work to

  reattach the input device. Though the cleanup cancels the deferred work, this

  was done before the client_hdev itself is cleaned up, so it gets rescheduled.

  This patch fixes the ordering to make sure the deferred work is properly

  canceled.


  Reported-by: syzbot+0154da2d403396b2bd59@syzkaller.appspotmail.com

  Fixes: 79504249d7e2 ("HID: hid-steam: Move hidraw input (un)registering to work")

  Signed-off-by: Vicki Pfau <vi@endrift.com>

  Signed-off-by: Jiri Kosina <jkosina@suse.com>

  '
submodule:
- drivers/hid
hunk_count: 1
covered_count: 0
