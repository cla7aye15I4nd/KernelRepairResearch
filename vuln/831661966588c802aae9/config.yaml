id: 831661966588c802aae9
bug_link: https://syzkaller.appspot.com/bug?extid=831661966588c802aae9
title: possible deadlock in worker_thread
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c46fa8911b17e3f808679061a8af8bee219f4602
fix_commit: 081bdc9fe05bb23248f5effb6f811da3da4b8252
datetime: '2022-02-23T15:03:58-04:00'
fix_commit_message: 'RDMA/ib_srp: Fix a deadlock


  Remove the flush_workqueue(system_long_wq) call since flushing

  system_long_wq is deadlock-prone and since that call is redundant with a

  preceding cancel_work_sync()


  Link: https://lore.kernel.org/r/20220215210511.28303-3-bvanassche@acm.org

  Fixes: ef6c49d87c34 ("IB/srp: Eliminate state SRP_TARGET_DEAD")

  Reported-by: syzbot+831661966588c802aae9@syzkaller.appspotmail.com

  Signed-off-by: Bart Van Assche <bvanassche@acm.org>

  Reviewed-by: Leon Romanovsky <leonro@nvidia.com>

  Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>

  '
submodule:
- drivers/infiniband/ulp/srp
hunk_count: 1
covered_count: 1
