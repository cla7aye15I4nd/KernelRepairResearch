id: 3ae18325f96190606754
bug_link: https://syzkaller.appspot.com/bug?extid=3ae18325f96190606754
title: kernel BUG at drivers/android/binder_alloc.c:LINE! (4)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 25c7eabed5b219e975c8aee527ae202604d10911
fix_commit: bb4a2e48d5100ed3ff614df158a636bca3c6bf9f
datetime: '2019-07-01T08:42:47+02:00'
fix_commit_message: 'binder: return errors from buffer copy functions


  The buffer copy functions assumed the caller would ensure

  correct alignment and that the memory to be copied was

  completely within the binder buffer. There have been

  a few cases discovered by syzkallar where a malformed

  transaction created by a user could violated the

  assumptions and resulted in a BUG_ON.


  The fix is to remove the BUG_ON and always return the

  error to be handled appropriately by the caller.


  Acked-by: Martijn Coenen <maco@android.com>

  Reported-by: syzbot+3ae18325f96190606754@syzkaller.appspotmail.com

  Fixes: bde4a19fc04f ("binder: use userspace pointer as base of buffer space")

  Suggested-by: Dan Carpenter <dan.carpenter@oracle.com>

  Signed-off-by: Todd Kjos <tkjos@google.com>

  Cc: stable <stable@vger.kernel.org>

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/android
hunk_count: 17
covered_count: 6
