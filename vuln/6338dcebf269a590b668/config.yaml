id: 6338dcebf269a590b668
bug_link: https://syzkaller.appspot.com/bug?extid=6338dcebf269a590b668
title: 'INFO: task hung in io_uring_flush'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c183edff33fdcd639d222a8f473bf44602adc655
fix_commit: b7ddce3cbf010edbfac6c6d8cc708560a7bcd7a4
datetime: '2020-09-05T15:59:51-06:00'
fix_commit_message: 'io_uring: fix cancel of deferred reqs with ->files


  While trying to cancel requests with ->files, it also should look for

  requests in ->defer_list, otherwise it might end up hanging a thread.


  Cancel all requests in ->defer_list up to the last request there with

  matching ->files, that''s needed to follow drain ordering semantics.


  Signed-off-by: Pavel Begunkov <asml.silence@gmail.com>

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 1
covered_count: 1
