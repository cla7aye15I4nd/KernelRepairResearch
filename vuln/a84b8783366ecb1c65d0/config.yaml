id: a84b8783366ecb1c65d0
bug_link: https://syzkaller.appspot.com/bug?extid=a84b8783366ecb1c65d0
title: 'BUG: unable to handle kernel paging request in corrupted (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 489809e2e22b3dedc0737163d97eb2b574137b42
fix_commit: 7a274727702cc07d27cdebd36d1d5132abeea12f
datetime: '2021-05-17T07:28:48-06:00'
fix_commit_message: 'io_uring: don''t modify req->poll for rw


  __io_queue_proc() is used by both poll and apoll, so we should not

  access req->poll directly but selecting right struct io_poll_iocb

  depending on use case.


  Reported-and-tested-by: syzbot+a84b8783366ecb1c65d0@syzkaller.appspotmail.com

  Fixes: ea6a693d862d ("io_uring: disable multishot poll for double poll add cases")

  Signed-off-by: Pavel Begunkov <asml.silence@gmail.com>

  Link: https://lore.kernel.org/r/4a6a1de31142d8e0250fe2dfd4c8923d82a5bbfc.1621251795.git.asml.silence@gmail.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 1
covered_count: 0
