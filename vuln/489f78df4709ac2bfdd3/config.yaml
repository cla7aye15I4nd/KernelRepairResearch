id: 489f78df4709ac2bfdd3
bug_link: https://syzkaller.appspot.com/bug?extid=489f78df4709ac2bfdd3
title: 'KASAN: slab-use-after-free Read in sco_sock_connect'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a66dfaf18fd61bb75ef8cee83db46b2aadf153d0
fix_commit: ed9588554943097bdf09588a8a105fbb058869c5
datetime: '2024-11-26T11:07:28-05:00'
fix_commit_message: 'Bluetooth: SCO: remove the redundant sco_conn_put


  When adding conn, it is necessary to increase and retain the conn reference

  count at the same time.


  Another problem was fixed along the way, conn_put is missing when hcon is NULL

  in the timeout routine.


  Fixes: e6720779ae61 ("Bluetooth: SCO: Use kref to track lifetime of sco_conn")

  Reported-and-tested-by: syzbot+489f78df4709ac2bfdd3@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=489f78df4709ac2bfdd3

  Signed-off-by: Edward Adam Davis <eadavis@qq.com>

  Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>

  '
submodule:
- net/bluetooth
hunk_count: 2
covered_count: 2
