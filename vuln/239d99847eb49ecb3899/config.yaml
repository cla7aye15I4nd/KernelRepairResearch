id: 239d99847eb49ecb3899
bug_link: https://syzkaller.appspot.com/bug?extid=239d99847eb49ecb3899
title: 'KASAN: use-after-free Read in posix_lock_inode'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8e143b90e4d45cca3dc53760d3cfab988bc74571
fix_commit: bf77ae4c98d721a9aae3840970d46669a78e034a
datetime: '2019-01-02T20:14:50-05:00'
fix_commit_message: "locks: fix error in locks_move_blocks()\n\nAfter moving all requests\
  \ from\n   fl->fl_blocked_requests\nto\n   new->fl_blocked_requests\n\nit is nonsensical\
  \ to do anything to all the remaining elements, there\naren't any.  This should\
  \ do something to all the requests that have been\nmoved. For simplicity, it does\
  \ it to all requests in the target list.\n\nSetting \"f->fl_blocker = new\" to all\
  \ members of new->fl_blocked_requests\nis \"obviously correct\" as it preserves\
  \ the invariant of the linkage\namong requests.\n\nReported-by: syzbot+239d99847eb49ecb3899@syzkaller.appspotmail.com\n\
  Fixes: 5946c4319ebb (\"fs/locks: allow a lock request to block other requests.\"\
  )\nSigned-off-by: NeilBrown <neilb@suse.com>\nSigned-off-by: Jeff Layton <jlayton@kernel.org>\n"
submodule:
- fs
hunk_count: 1
covered_count: 0
