id: 92209502e7aab127c75f
bug_link: https://syzkaller.appspot.com/bug?extid=92209502e7aab127c75f
title: 'WARNING: ODEBUG bug in __sk_destruct'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 438b43bdb95d3189e0098919f321c014ed71f410
fix_commit: f9cedf1a9b1cdcfb0c52edb391d01771e43994a4
datetime: '2019-08-05T13:23:05-07:00'
fix_commit_message: 'net/smc: do not schedule tx_work in SMC_CLOSED state


  The setsockopts options TCP_NODELAY and TCP_CORK may schedule the

  tx worker. Make sure the socket is not yet moved into SMC_CLOSED

  state (for instance by a shutdown SHUT_RDWR call).


  Reported-by: syzbot+92209502e7aab127c75f@syzkaller.appspotmail.com

  Reported-by: syzbot+b972214bb803a343f4fe@syzkaller.appspotmail.com

  Fixes: 01d2f7e2cdd31 ("net/smc: sockopts TCP_NODELAY and TCP_CORK")

  Signed-off-by: Ursula Braun <ubraun@linux.ibm.com>

  Signed-off-by: Karsten Graul <kgraul@linux.ibm.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/smc
hunk_count: 1
covered_count: 0
