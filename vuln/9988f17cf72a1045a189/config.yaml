id: 9988f17cf72a1045a189
bug_link: https://syzkaller.appspot.com/bug?extid=9988f17cf72a1045a189
title: 'KASAN: use-after-free Read in snd_mixer_oss_get_volume1'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 29664923725a384dc7e0f74af7c66e5ab7bb2a26
fix_commit: 411cef6adfb38a5bb6bd9af3941b28198e7fb680
datetime: '2021-10-21T07:03:47+02:00'
fix_commit_message: 'ALSA: mixer: oss: Fix racy access to slots


  The OSS mixer can reassign the mapping slots dynamically via proc

  file.  Although the addition and deletion of those slots are protected

  by mixer->reg_mutex, the access to slots aren''t, hence this may cause

  UAF when the slots in use are deleted concurrently.


  This patch applies the mixer->reg_mutex in all appropriate code paths

  (i.e. the ioctl functions) that may access slots.


  Reported-by: syzbot+9988f17cf72a1045a189@syzkaller.appspotmail.com

  Reviewed-by: Jaroslav Kysela <perex@perex.cz>

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/00000000000036adc005ceca9175@google.com

  Link: https://lore.kernel.org/r/20211020164846.922-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/oss
hunk_count: 12
covered_count: 11
