id: debee9ab7ae2b34b0307
bug_link: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307
title: 'UBSAN: shift-out-of-bounds in dbAlloc (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5e62ed3b1c8a397185af53d6b94f04b9ff21ec7d
fix_commit: 525b861a008143048535011f3816d407940f4bfa
datetime: '2023-10-03T18:26:59-05:00'
fix_commit_message: 'fs/jfs: Add check for negative db_l2nbperpage


  l2nbperpage is log2(number of blks per page), and the minimum legal

  value should be 0, not negative.


  In the case of l2nbperpage being negative, an error will occur

  when subsequently used as shift exponent.


  Syzbot reported this bug:


  UBSAN: shift-out-of-bounds in fs/jfs/jfs_dmap.c:799:12

  shift exponent -16777216 is negative


  Reported-by: syzbot+debee9ab7ae2b34b0307@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=debee9ab7ae2b34b0307

  Signed-off-by: Juntong Deng <juntong.deng@outlook.com>

  Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>

  '
submodule:
- fs/jfs
hunk_count: 1
covered_count: 0
