id: f03d384f3455d28833eb
bug_link: https://syzkaller.appspot.com/bug?extid=f03d384f3455d28833eb
title: general protection fault in j1939_netdev_start
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: cd3b3636c99fcac52c598b64061f3fe4413c6a12
fix_commit: af804b7826350d5af728dca4715e473338fbd7e5
datetime: '2020-08-14T12:38:47+02:00'
fix_commit_message: 'can: j1939: socket: j1939_sk_bind(): make sure ml_priv is allocated


  This patch adds check to ensure that the struct net_device::ml_priv is

  allocated, as it is used later by the j1939 stack.


  The allocation is done by all mainline CAN network drivers, but when using

  bond or team devices this is not the case.


  Bail out if no ml_priv is allocated.


  Reported-by: syzbot+f03d384f3455d28833eb@syzkaller.appspotmail.com

  Fixes: 9d71dd0c7009 ("can: add support of SAE J1939 protocol")

  Cc: linux-stable <stable@vger.kernel.org> # >= v5.4

  Signed-off-by: Oleksij Rempel <o.rempel@pengutronix.de>

  Link: https://lore.kernel.org/r/20200807105200.26441-4-o.rempel@pengutronix.de

  Signed-off-by: Marc Kleine-Budde <mkl@pengutronix.de>

  '
submodule:
- net/can
hunk_count: 1
covered_count: 1
