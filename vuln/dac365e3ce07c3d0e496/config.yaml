id: dac365e3ce07c3d0e496
bug_link: https://syzkaller.appspot.com/bug?extid=dac365e3ce07c3d0e496
title: 'WARNING: can''t access registers at entry_SYSCALL_64_after_hwframe'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1c34496e5856886d565665fb64029ecdeb080ffb
fix_commit: 00c8f01c4e84637c3db76f368b8687cb61f4dd9d
datetime: '2023-02-23T09:21:50+01:00'
fix_commit_message: "objtool: Fix ORC 'signal' propagation\n\nThere have been some\
  \ recently reported ORC unwinder warnings like:\n\n  WARNING: can't access registers\
  \ at entry_SYSCALL_64_after_hwframe+0x63/0xcd\n  WARNING: stack going in the wrong\
  \ direction? at __sys_setsockopt+0x2c6/0x5b0 net/socket.c:2271\n\nAnd a KASAN warning:\n\
  \n  BUG: KASAN: stack-out-of-bounds in unwind_next_frame (arch/x86/include/asm/ptrace.h:136\
  \ arch/x86/kernel/unwind_orc.c:455)\n\nIt turns out the 'signal' bit isn't getting\
  \ propagated from the unwind\nhints to the ORC entries, making the unwinder confused\
  \ at times.\n\nFixes: ffb1b4a41016 (\"x86/unwind/orc: Add 'signal' field to ORC\
  \ metadata\")\nReported-by: kernel test robot <oliver.sang@intel.com>\nReported-by:\
  \ Dmitry Vyukov <dvyukov@google.com>\nSigned-off-by: Josh Poimboeuf <jpoimboe@kernel.org>\n\
  Signed-off-by: Ingo Molnar <mingo@kernel.org>\nLink: https://lore.kernel.org/r/97eef9db60cd86d376a9a40d49d77bb67a8f6526.1676579666.git.jpoimboe@kernel.org\n"
submodule:
- tools/objtool
- tools/objtool/include/objtool
hunk_count: 3
covered_count: 0
