id: 34a0ee986f61f15da35d
bug_link: https://syzkaller.appspot.com/bug?extid=34a0ee986f61f15da35d
title: 'BUG: unable to handle kernel NULL pointer dereference in path_from_stashed'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b40c8e7a033ff2cafd33adbe50e2a516f88fa223
fix_commit: f60d38cb02d03f39576f9c7ad13652babded2410
datetime: '2024-07-24T10:53:12+02:00'
fix_commit_message: 'pidfs: when time ns disabled add check for ioctl


  syzbot call pidfd_ioctl() with cmd "PIDFD_GET_TIME_NAMESPACE" and disabled

  CONFIG_TIME_NS, since time_ns is NULL, it will make NULL ponter deref in

  open_namespace.


  Fixes: 5b08bd408534 ("pidfs: allow retrieval of namespace file descriptors") # mainline
  only

  Reported-and-tested-by: syzbot+34a0ee986f61f15da35d@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=34a0ee986f61f15da35d

  Signed-off-by: Edward Adam Davis <eadavis@qq.com>

  Link: https://lore.kernel.org/r/tencent_7FAE8DB725EE0DD69236DDABDDDE195E4F07@qq.com

  Signed-off-by: Christian Brauner <brauner@kernel.org>

  '
submodule:
- fs
hunk_count: 1
covered_count: 1
