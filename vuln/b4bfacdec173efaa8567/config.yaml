id: b4bfacdec173efaa8567
bug_link: https://syzkaller.appspot.com/bug?extid=b4bfacdec173efaa8567
title: kernel BUG in dma_alloc_attrs
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c964ced7726294d40913f2127c3f185a92cb4a41
fix_commit: 78b2770c935fc1434a95cc17613fe31165b02dfe
datetime: '2024-10-17T17:41:29+02:00'
fix_commit_message: 'dma-mapping: fix tracing dma_alloc/free with vmalloc''d memory


  Not all virtual addresses have physical addresses, such as if they were

  vmalloc''d. Just trace the virtual address instead of trying to trace a

  physical address. This aligns with the API, and is good enough to

  associate dma_alloc with dma_free.


  Fixes: 038eb433dc14 ("dma-mapping: add tracing for dma-mapping API calls")

  Reported-by: syzbot+b4bfacdec173efaa8567@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/all/670ebde5.050a0220.d9b66.0154.GAE@google.com/

  Signed-off-by: Sean Anderson <sean.anderson@linux.dev>

  Signed-off-by: Christoph Hellwig <hch@lst.de>

  '
submodule:
- include/trace/events
hunk_count: 4
covered_count: 4
