id: dc9071cc5a85950bdfce
bug_link: https://syzkaller.appspot.com/bug?extid=dc9071cc5a85950bdfce
title: 'INFO: rcu detected stall in br_handle_frame (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b969fee12b6330fd6a0b15337a314d5b5ee56916
fix_commit: d9e15a2733067c9328fb56d98fe8e574fa19ec31
datetime: '2020-01-08T12:40:47-08:00'
fix_commit_message: "pkt_sched: fq: do not accept silly TCA_FQ_QUANTUM\n\nAs diagnosed\
  \ by Florian :\n\nIf TCA_FQ_QUANTUM is set to 0x80000000, fq_deueue()\ncan loop\
  \ forever in :\n\nif (f->credit <= 0) {\n  f->credit += q->quantum;\n  goto begin;\n\
  }\n\n... because f->credit is either 0 or -2147483648.\n\nLet's limit TCA_FQ_QUANTUM\
  \ to no more than 1 << 20 :\nThis max value should limit risks of breaking user\
  \ setups\nwhile fixing this bug.\n\nFixes: afe4fd062416 (\"pkt_sched: fq: Fair Queue\
  \ packet scheduler\")\nSigned-off-by: Eric Dumazet <edumazet@google.com>\nDiagnosed-by:\
  \ Florian Westphal <fw@strlen.de>\nReported-by: syzbot+dc9071cc5a85950bdfce@syzkaller.appspotmail.com\n\
  Signed-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- net/sched
hunk_count: 1
covered_count: 0
