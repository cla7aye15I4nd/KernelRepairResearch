id: 6f1624f937d9d6911e2d
bug_link: https://syzkaller.appspot.com/bug?extid=6f1624f937d9d6911e2d
title: 'KCSAN: data-race in __fat_write_inode / fat12_ent_get'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ada4ab7af1a67db7eb8596709071a97afb2bf7de
fix_commit: b1b65750b8db67834482f758fc385bfa7560d228
datetime: '2020-06-04T19:06:25-07:00'
fix_commit_message: 'fat: don''t allow to mount if the FAT length == 0


  If FAT length == 0, the image doesn''t have any data. And it can be the

  cause of overlapping the root dir and FAT entries.


  Also Windows treats it as invalid format.


  Reported-by: syzbot+6f1624f937d9d6911e2d@syzkaller.appspotmail.com

  Signed-off-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  Cc: Marco Elver <elver@google.com>

  Cc: Dmitry Vyukov <dvyukov@google.com>

  Link: http://lkml.kernel.org/r/87r1wz8mrd.fsf@mail.parknet.co.jp

  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- fs/fat
hunk_count: 1
covered_count: 0
