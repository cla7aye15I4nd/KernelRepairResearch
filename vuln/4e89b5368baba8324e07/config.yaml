id: 4e89b5368baba8324e07
bug_link: https://syzkaller.appspot.com/bug?extid=4e89b5368baba8324e07
title: 'BUG: unable to handle kernel paging request in txBeginAnon'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0176e69743ecc02961f2ae1ea42439cd2bf9ed58
fix_commit: b5799dd77054c1ec49b0088b006c9908e256843b
datetime: '2025-02-19T15:29:08-06:00'
fix_commit_message: "jfs: add check read-only before truncation in jfs_truncate_nolock()\n\
  \nAdded a check for \"read-only\" mode in the `jfs_truncate_nolock`\nfunction to\
  \ avoid errors related to writing to a read-only\nfilesystem.\n\nCall stack:\n\n\
  block_write_begin() {\n  jfs_write_failed() {\n    jfs_truncate() {\n      jfs_truncate_nolock()\
  \ {\n        txEnd() {\n          ...\n          log = JFS_SBI(tblk->sb)->log;\n\
  \          // (log == NULL)\n\nIf the `isReadOnly(ip)` condition is triggered in\n\
  `jfs_truncate_nolock`, the function execution will stop, and no\nfurther data modification\
  \ will occur. Instead, the `xtTruncate`\nfunction will be called with the \"COMMIT_WMAP\"\
  \ flag, preventing\nmodifications in \"read-only\" mode.\n\nFixes: 1da177e4c3f4\
  \ (\"Linux-2.6.12-rc2\")\nReported-by: syzbot+4e89b5368baba8324e07@syzkaller.appspotmail.com\n\
  Link: https://syzkaller.appspot.com/bug?extid=4e89b5368baba8324e07\nSigned-off-by:\
  \ Vasiliy Kovalev <kovalev@altlinux.org>\nSigned-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>\n"
submodule:
- fs/jfs
hunk_count: 1
covered_count: 0
