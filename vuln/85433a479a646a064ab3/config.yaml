id: 85433a479a646a064ab3
bug_link: https://syzkaller.appspot.com/bug?extid=85433a479a646a064ab3
title: 'KMSAN: kernel-infoleak in scsi_cmd_ioctl'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 632bfb6323799c087fcb4108dfe59518609667a7
fix_commit: 6d53a9fe5a1983490bc14b3a64d49fabb4ccc651
datetime: '2020-10-02T12:01:47-06:00'
fix_commit_message: 'block/scsi-ioctl: Fix kernel-infoleak in scsi_put_cdrom_generic_arg()


  scsi_put_cdrom_generic_arg() is copying uninitialized stack memory to

  userspace, since the compiler may leave a 3-byte hole in the middle of

  `cgc32`. Fix it by adding a padding field to `struct

  compat_cdrom_generic_command`.


  Cc: stable@vger.kernel.org

  Fixes: f3ee6e63a9df ("compat_ioctl: move CDROM_SEND_PACKET handling into scsi")

  Suggested-by: Dan Carpenter <dan.carpenter@oracle.com>

  Suggested-by: Arnd Bergmann <arnd@arndb.de>

  Reported-by: syzbot+85433a479a646a064ab3@syzkaller.appspotmail.com

  Signed-off-by: Peilin Ye <yepeilin.cs@gmail.com>

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- block
hunk_count: 1
covered_count: 1
