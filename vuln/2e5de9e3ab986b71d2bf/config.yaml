id: 2e5de9e3ab986b71d2bf
bug_link: https://syzkaller.appspot.com/bug?extid=2e5de9e3ab986b71d2bf
title: WARNING in nsim_udp_tunnel_set_port
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5de7665e0a0746b5ad7943554b34db8f8614a196
fix_commit: 50bf398e1ceacb9a7f85bd3bdca065ebe5cb6159
datetime: '2025-01-27T14:24:34-08:00'
fix_commit_message: 'net: netdevsim: try to close UDP port harness races


  syzbot discovered that we remove the debugfs files after we free

  the netdev. Try to clean up the relevant dir while the device

  is still around.


  Reported-by: syzbot+2e5de9e3ab986b71d2bf@syzkaller.appspotmail.com

  Fixes: 424be63ad831 ("netdevsim: add UDP tunnel port offload support")

  Reviewed-by: Michal Swiatkowski <michal.swiatkowski@linux.intel.com>

  Link: https://patch.msgid.link/20250122224503.762705-1-kuba@kernel.org

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- drivers/net/netdevsim
- tools/testing/selftests/drivers/net/netdevsim
hunk_count: 12
covered_count: 2
