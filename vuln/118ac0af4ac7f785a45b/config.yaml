id: 118ac0af4ac7f785a45b
bug_link: https://syzkaller.appspot.com/bug?extid=118ac0af4ac7f785a45b
title: general protection fault in unpin_user_pages
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4f65e2f483b6f764c15094d14dd53dda048a4048
fix_commit: f78cdbd75a57245ecc68f5a40e470933426a082b
datetime: '2020-05-20T14:08:06-07:00'
fix_commit_message: 'rds: fix crash in rds_info_getsockopt()


  The conversion to pin_user_pages() had a bug: it overlooked

  the case of allocation of pages failing. Fix that by restoring

  an equivalent check.


  Reported-by: syzbot+118ac0af4ac7f785a45b@syzkaller.appspotmail.com

  Fixes: dbfe7d74376e ("rds: convert get_user_pages() --> pin_user_pages()")


  Cc: David S. Miller <davem@davemloft.net>

  Cc: Jakub Kicinski <kuba@kernel.org>

  Cc: netdev@vger.kernel.org

  Cc: linux-rdma@vger.kernel.org

  Cc: rds-devel@oss.oracle.com

  Signed-off-by: John Hubbard <jhubbard@nvidia.com>

  Acked-by: Santosh Shilimkar <santosh.shilimkar@oracle.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/rds
hunk_count: 1
covered_count: 1
