id: 5141f6db57a2f7614352
bug_link: https://syzkaller.appspot.com/bug?extid=5141f6db57a2f7614352
title: 'KMSAN: uninit-value in f2fs_new_node_page'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e9a844f6e487ee0f64d995d1d8ffde2e270e2479
fix_commit: 76f01376df398304972bf337ba430a62062add31
datetime: '2024-12-16T16:12:54+00:00'
fix_commit_message: "f2fs: ensure that node info flags are always initialized\n\n\
  Syzbot has reported the following KMSAN splat:\n\nBUG: KMSAN: uninit-value in f2fs_new_node_page+0x1494/0x1630\n\
  \ f2fs_new_node_page+0x1494/0x1630\n f2fs_new_inode_page+0xb9/0x100\n f2fs_init_inode_metadata+0x176/0x1e90\n\
  \ f2fs_add_inline_entry+0x723/0xc90\n f2fs_do_add_link+0x48f/0xa70\n f2fs_symlink+0x6af/0xfc0\n\
  \ vfs_symlink+0x1f1/0x470\n do_symlinkat+0x471/0xbc0\n __x64_sys_symlink+0xcf/0x140\n\
  \ x64_sys_call+0x2fcc/0x3d90\n do_syscall_64+0xd9/0x1b0\n entry_SYSCALL_64_after_hwframe+0x77/0x7f\n\
  \nLocal variable new_ni created at:\n f2fs_new_node_page+0x9d/0x1630\n f2fs_new_inode_page+0xb9/0x100\n\
  \nSo adjust 'f2fs_get_node_info()' to ensure that 'flag'\nfield of 'struct node_info'\
  \ is always initialized.\n\nReported-by: syzbot+5141f6db57a2f7614352@syzkaller.appspotmail.com\n\
  Closes: https://syzkaller.appspot.com/bug?extid=5141f6db57a2f7614352\nFixes: e05df3b115e7\
  \ (\"f2fs: add node operations\")\nSuggested-by: Chao Yu <chao@kernel.org>\nSigned-off-by:\
  \ Dmitry Antipov <dmantipov@yandex.ru>\nReviewed-by: Chao Yu <chao@kernel.org>\n\
  Signed-off-by: Jaegeuk Kim <jaegeuk@kernel.org>\n"
submodule:
- fs/f2fs
hunk_count: 1
covered_count: 0
