id: b8bf7edf9f83071ea0a9
bug_link: https://syzkaller.appspot.com/bug?extid=b8bf7edf9f83071ea0a9
title: general protection fault in wpan_phy_register
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0bb80ecc33a8fb5a682236443c1e740d5c917d1d
fix_commit: fd6f7ad2fd4d53fa14f4fd190f9b05d043973892
datetime: '2023-09-12T15:54:44+02:00'
fix_commit_message: 'driver core: return an error when dev_set_name() hasn''t happened


  The commit d21fdd07cea4 ("driver core: Return proper error code when

  dev_set_name() fails") rewrote the logic of handling the dev_set_name()

  error codes, but missed the point that initially set error value to

  -EINVAL might be rewritten and hence the error path can''t be triggered

  at some circumstances. To fix this, make sure that error variable is

  set to -EINVAL when other conditionals are false.


  Reported-by: syzbot+bdfb03b1ec8b342c12cb@syzkaller.appspotmail.com

  Fixes: d21fdd07cea4 ("driver core: Return proper error code when dev_set_name()
  fails")

  Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>

  Link: https://lore.kernel.org/r/20230828145824.3895288-1-andriy.shevchenko@linux.intel.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/base
hunk_count: 1
covered_count: 1
