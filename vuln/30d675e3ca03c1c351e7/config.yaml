id: 30d675e3ca03c1c351e7
bug_link: https://syzkaller.appspot.com/bug?extid=30d675e3ca03c1c351e7
title: WARNING in arch_uprobe_analyze_insn
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a89d0c2acff952935cb37d501eaa702db5a63a05
fix_commit: 90718e32e1dcc2479acfa208ccfc6442850b594c
datetime: '2018-06-21T17:11:02+02:00'
fix_commit_message: 'uprobes/x86: Remove incorrect WARN_ON() in uprobe_init_insn()


  insn_get_length() has the side-effect of processing the entire instruction

  but only if it was decoded successfully, otherwise insn_complete() can fail

  and in this case we need to just return an error without warning.


  Reported-by: syzbot+30d675e3ca03c1c351e7@syzkaller.appspotmail.com

  Signed-off-by: Oleg Nesterov <oleg@redhat.com>

  Reviewed-by: Masami Hiramatsu <mhiramat@kernel.org>

  Cc: Linus Torvalds <torvalds@linux-foundation.org>

  Cc: Peter Zijlstra <peterz@infradead.org>

  Cc: Thomas Gleixner <tglx@linutronix.de>

  Cc: syzkaller-bugs@googlegroups.com

  Link: https://lkml.kernel.org/lkml/20180518162739.GA5559@redhat.com

  Signed-off-by: Ingo Molnar <mingo@kernel.org>

  '
submodule:
- arch/x86/kernel
hunk_count: 1
covered_count: 1
