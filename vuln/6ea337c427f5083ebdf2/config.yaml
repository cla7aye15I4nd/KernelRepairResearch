id: 6ea337c427f5083ebdf2
bug_link: https://syzkaller.appspot.com/bug?extid=6ea337c427f5083ebdf2
title: 'WARNING: lock held when returning to user space in set_property_atomic'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 66a8d5bfb518f9f12d47e1d2dce1732279f9451e
fix_commit: 4089e272ac61603931beb024d4d640de2cb390e0
datetime: '2019-01-10T11:31:58+01:00'
fix_commit_message: 'gpu/drm: Fix lock held when returning to user space.


  We need to call drm_modeset_acquire_fini() when drm_atomic_state_alloc()

  failed or call drm_modeset_acquire_init() after drm_atomic_state_alloc()

  succeeded.


  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Reported-by: syzbot <syzbot+6ea337c427f5083ebdf2@syzkaller.appspotmail.com>

  Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>

  Link: https://patchwork.freedesktop.org/patch/msgid/1547115571-21219-1-git-send-email-penguin-kernel@I-love.SAKURA.ne.jp

  '
submodule:
- drivers/gpu/drm
hunk_count: 2
covered_count: 1
