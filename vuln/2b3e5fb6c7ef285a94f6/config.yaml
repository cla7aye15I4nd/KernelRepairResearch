id: 2b3e5fb6c7ef285a94f6
bug_link: https://syzkaller.appspot.com/bug?extid=2b3e5fb6c7ef285a94f6
title: 'UBSAN: array-index-out-of-bounds in taprio_change'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e842cb60e8ac1d8a15b01e0dd4dad453807a597d
fix_commit: efe487fce3061d94222c6501d7be3aa549b3dc78
datetime: '2021-08-30T12:24:40+01:00'
fix_commit_message: 'fix array-index-out-of-bounds in taprio_change


  syzbot report an array-index-out-of-bounds in taprio_change

  index 16 is out of range for type ''__u16 [16]''

  that''s because mqprio->num_tc is lager than TC_MAX_QUEUE,so we check

  the return value of netdev_set_num_tc.


  Reported-by: syzbot+2b3e5fb6c7ef285a94f6@syzkaller.appspotmail.com

  Signed-off-by: Haimin Zhang <tcs_kernel@tencent.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sched
hunk_count: 1
covered_count: 1
