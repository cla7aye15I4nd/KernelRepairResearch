id: 24cd636199753ac5e0ca
bug_link: https://syzkaller.appspot.com/bug?extid=24cd636199753ac5e0ca
title: 'KASAN: slab-use-after-free Read in rhashtable_walk_enter'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 509abfc7a0ba66afa648e8216306acdc55ec54ed
fix_commit: dc0d0f885aa422f621bc1c2124133eff566b0bc8
datetime: '2024-09-23T10:37:20-04:00'
fix_commit_message: 'NFSD: Mark filecache "down" if init fails


  NeilBrown says:

  > The handling of NFSD_FILE_CACHE_UP is strange.  nfsd_file_cache_init()

  > sets it, but doesn''t clear it on failure.  So if nfsd_file_cache_init()

  > fails for some reason, nfsd_file_cache_shutdown() would still try to

  > clean up if it was called.


  Reported-by: NeilBrown <neilb@suse.de>

  Fixes: c7b824c3d06c ("NFSD: Replace the "init once" mechanism")

  Signed-off-by: Chuck Lever <chuck.lever@oracle.com>

  '
submodule:
- fs/nfsd
hunk_count: 2
covered_count: 0
