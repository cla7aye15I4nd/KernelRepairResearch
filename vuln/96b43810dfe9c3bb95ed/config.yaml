id: 96b43810dfe9c3bb95ed
bug_link: https://syzkaller.appspot.com/bug?extid=96b43810dfe9c3bb95ed
title: memory leak in iovec_from_user
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 701521403cfb228536b3947035c8a6eca40d8e58
fix_commit: 323b190ba2debbcc03c01d2edaf1ec6b43e6ae43
datetime: '2022-04-16T21:14:00-06:00'
fix_commit_message: 'io_uring: free iovec if file assignment fails


  We just return failure in this case, but we need to release the iovec

  first. If we''re doing IO with more than FAST_IOV segments, then the

  iovec is allocated and must be freed.


  Reported-by: syzbot+96b43810dfe9c3bb95ed@syzkaller.appspotmail.com

  Fixes: 584b0180f0f4 ("io_uring: move read/write file prep state into actual opcode
  handler")

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 2
covered_count: 1
