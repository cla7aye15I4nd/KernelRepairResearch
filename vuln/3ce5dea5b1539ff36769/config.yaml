id: 3ce5dea5b1539ff36769
bug_link: https://syzkaller.appspot.com/bug?extid=3ce5dea5b1539ff36769
title: 'KMSAN: uninit-value in bcmp (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a1fb1c77950fbe47eb4a8f5be303bea4ee753b93
fix_commit: fde2497d2bc3a063d8af88b258dbadc86bd7b57c
datetime: '2024-02-22T15:38:55-08:00'
fix_commit_message: 'fat: fix uninitialized field in nostale filehandles


  When fat_encode_fh_nostale() encodes file handle without a parent it

  stores only first 10 bytes of the file handle. However the length of the

  file handle must be a multiple of 4 so the file handle is actually 12

  bytes long and the last two bytes remain uninitialized. This is not

  great at we potentially leak uninitialized information with the handle

  to userspace. Properly initialize the full handle length.


  Link: https://lkml.kernel.org/r/20240205122626.13701-1-jack@suse.cz

  Reported-by: syzbot+3ce5dea5b1539ff36769@syzkaller.appspotmail.com

  Fixes: ea3983ace6b7 ("fat: restructure export_operations")

  Signed-off-by: Jan Kara <jack@suse.cz>

  Acked-by: OGAWA Hirofumi <hirofumi@mail.parknet.co.jp>

  Cc: Amir Goldstein <amir73il@gmail.com>

  Cc: <stable@vger.kernel.org>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  '
submodule:
- fs/fat
hunk_count: 1
covered_count: 0
