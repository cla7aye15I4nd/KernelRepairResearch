id: 2393580080a2da190f04
bug_link: https://syzkaller.appspot.com/bug?extid=2393580080a2da190f04
title: kernel BUG at net/core/dev.c:NUM!
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5b55299eed78538cc4746e50ee97103a1643249c
fix_commit: 47e4bb147a96f1c9b4e7691e7e994e53838bfff8
datetime: '2021-01-14T10:26:46-08:00'
fix_commit_message: 'net: sit: unregister_netdevice on newlink''s error path


  We need to unregister the netdevice if config failed.

  .ndo_uninit takes care of most of the heavy lifting.


  This was uncovered by recent commit c269a24ce057 ("net: make

  free_netdev() more lenient with unregistering devices").

  Previously the partially-initialized device would be left

  in the system.


  Reported-and-tested-by: syzbot+2393580080a2da190f04@syzkaller.appspotmail.com

  Fixes: e2f1f072db8d ("sit: allow to configure 6rd tunnels via netlink")

  Acked-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>

  Link: https://lore.kernel.org/r/20210114012947.2515313-1-kuba@kernel.org

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/ipv6
hunk_count: 1
covered_count: 0
