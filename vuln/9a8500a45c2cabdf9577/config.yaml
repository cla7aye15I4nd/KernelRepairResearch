id: 9a8500a45c2cabdf9577
bug_link: https://syzkaller.appspot.com/bug?extid=9a8500a45c2cabdf9577
title: 'KMSAN: uninit-value in io_nop'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f46b9cdb22f7a167c36b6bcddaef7e8aee2598fa
fix_commit: ee116574de8415b0673c466e6cd28ba5f70c41a2
datetime: '2024-11-21T07:15:30-07:00'
fix_commit_message: 'io_uring/nop: ensure nop->fd is always initialized


  A previous commit added file support for nop, but it only initializes

  nop->fd if IORING_NOP_FIXED_FILE is set. That check should be

  IORING_NOP_FILE. Fix up the condition in nop preparation, and initialize

  it to a sane value even if we''re not going to be directly using it.


  While in there, do the same thing for the nop->buffer field.


  Reported-by: syzbot+9a8500a45c2cabdf9577@syzkaller.appspotmail.com

  Fixes: a85f31052bce ("io_uring/nop: add support for testing registered files and
  buffers")

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- io_uring
hunk_count: 1
covered_count: 1
