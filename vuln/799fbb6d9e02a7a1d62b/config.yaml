id: 799fbb6d9e02a7a1d62b
bug_link: https://syzkaller.appspot.com/bug?extid=799fbb6d9e02a7a1d62b
title: 'upstream test error: KMSAN: uninit-value in receive_buf'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1e1fdcbdde3b7663e5d8faeb2245b9b151417d22
fix_commit: 840b2d39a2dc1b96deb3f5c7fef76c9b24f08f51
datetime: '2024-07-04T11:00:31-04:00'
fix_commit_message: "virtio_ring: fix KMSAN error for premapped mode\n\nAdd kmsan\
  \ for virtqueue_dma_map_single_attrs to fix:\n\nBUG: KMSAN: uninit-value in receive_buf+0x45ca/0x6990\n\
  \ receive_buf+0x45ca/0x6990\n virtnet_poll+0x17e0/0x3130\n net_rx_action+0x832/0x26e0\n\
  \ handle_softirqs+0x330/0x10f0\n [...]\n\nUninit was created at:\n __alloc_pages_noprof+0x62a/0xe60\n\
  \ alloc_pages_noprof+0x392/0x830\n skb_page_frag_refill+0x21a/0x5c0\n virtnet_rq_alloc+0x50/0x1500\n\
  \ try_fill_recv+0x372/0x54c0\n virtnet_open+0x210/0xbe0\n __dev_open+0x56e/0x920\n\
  \ __dev_change_flags+0x39c/0x2000\n dev_change_flags+0xaa/0x200\n do_setlink+0x197a/0x7420\n\
  \ rtnl_setlink+0x77c/0x860\n [...]\n\nSigned-off-by: Xuan Zhuo <xuanzhuo@linux.alibaba.com>\n\
  Tested-by: Alexander Potapenko <glider@google.com>\nMessage-Id: <20240606111345.93600-1-xuanzhuo@linux.alibaba.com>\n\
  Signed-off-by: Michael S. Tsirkin <mst@redhat.com>\nTested-by: Ilya Leoshkevich\
  \ <iii@linux.ibm.com>  # s390x\nAcked-by: Jason Wang <jasowang@redhat.com>\n"
submodule:
- drivers/virtio
hunk_count: 1
covered_count: 0
