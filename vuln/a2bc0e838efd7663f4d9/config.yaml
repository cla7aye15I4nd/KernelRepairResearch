id: a2bc0e838efd7663f4d9
bug_link: https://syzkaller.appspot.com/bug?extid=a2bc0e838efd7663f4d9
title: 'KASAN: slab-use-after-free Read in bch2_sb_errors_from_cpu'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 89d21b69b4f88e7a04b66bec38a01470cd40d703
fix_commit: 211c581de28e7741898720b5f74da4e62f37f972
datetime: '2024-06-25T17:51:26-04:00'
fix_commit_message: 'bcachefs: slab-use-after-free Read in bch2_sb_errors_from_cpu


  Acquire fsck_error_counts_lock before accessing the critical section

  protected by this lock.


  syzbot has tested the proposed patch and the reproducer did not trigger

  any issue.


  Reported-by: syzbot+a2bc0e838efd7663f4d9@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=a2bc0e838efd7663f4d9

  Signed-off-by: Pei Li <peili.dev@gmail.com>

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
