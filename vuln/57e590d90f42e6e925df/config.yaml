id: 57e590d90f42e6e925df
bug_link: https://syzkaller.appspot.com/bug?extid=57e590d90f42e6e925df
title: general protection fault in gfs2_lookup_simple
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5f02d16868b9d738d70656d074518cac760d39ab
fix_commit: 111c7d27a1b7954954afde46f9db01d5ad24b316
datetime: '2023-09-05T15:58:15+02:00'
fix_commit_message: 'gfs2: Use mapping->gfp_mask for metadata inodes


  Set mapping->gfp mask to GFP_NOFS for all metadata inodes so that

  allocating pages in the address space of those inodes won''t call back

  into the filesystem.  This allows to switch back from

  find_or_create_page() to grab_cache_page() in two places.


  Partially reverts commit 220cca2a4f58 ("GFS2: Change truncate page

  allocation to be GFP_NOFS").


  Thanks to Dan Carpenter <dan.carpenter@linaro.org> for pointing out a

  Smatch static checker warning.


  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>

  '
submodule:
- fs/gfs2
hunk_count: 5
covered_count: 1
