id: 8ce4113dadc4789fac74
bug_link: https://syzkaller.appspot.com/bug?extid=8ce4113dadc4789fac74
title: WARNING in bpf_warn_invalid_xdp_action
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e94fac3829ddd3d9f21efa27d1512215b630782c
fix_commit: 2cbad989033bff0256675c38f96f5faab852af4b
datetime: '2021-12-13T22:25:51+01:00'
fix_commit_message: 'bpf: Do not WARN in bpf_warn_invalid_xdp_action()


  The WARN_ONCE() in bpf_warn_invalid_xdp_action() can be triggered by

  any bugged program, and even attaching a correct program to a NIC

  not supporting the given action.


  The resulting splat, beyond polluting the logs, fouls automated tools:

  e.g. a syzkaller reproducers using an XDP program returning an

  unsupported action will never pass validation.


  Replace the WARN_ONCE with a less intrusive pr_warn_once().


  Signed-off-by: Paolo Abeni <pabeni@redhat.com>

  Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>

  Acked-by: Toke Høiland-Jørgensen <toke@redhat.com>

  Link: https://lore.kernel.org/bpf/016ceec56e4817ebb2a9e35ce794d5c917df572c.1638189075.git.pabeni@redhat.com

  '
submodule:
- net/core
hunk_count: 1
covered_count: 1
