id: 001516d86dbe88862cec
bug_link: https://syzkaller.appspot.com/bug?extid=001516d86dbe88862cec
title: 'KMSAN: uninit-value in __dev_mc_add'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 63cf32389925e234d166fb1a336b46de7f846003
fix_commit: cca8ea3b05c972ffb5295367e6c544369b45fbdd
datetime: '2021-04-06T16:52:21-07:00'
fix_commit_message: 'net: tun: set tun->dev->addr_len during TUNSETLINK processing


  When changing type with TUNSETLINK ioctl command, set tun->dev->addr_len

  to match the appropriate type, using new tun_get_addr_len utility function

  which returns appropriate address length for given type. Fixes a

  KMSAN-found uninit-value bug reported by syzbot at:

  https://syzkaller.appspot.com/bug?id=0766d38c656abeace60621896d705743aeefed51


  Reported-by: syzbot+001516d86dbe88862cec@syzkaller.appspotmail.com

  Diagnosed-by: Eric Dumazet <edumazet@google.com>

  Signed-off-by: Phillip Potter <phil@philpotter.co.uk>

  Reviewed-by: Eric Dumazet <edumazet@google.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net
hunk_count: 3
covered_count: 0
