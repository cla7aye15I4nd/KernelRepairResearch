id: 5dda108b672b54141857
bug_link: https://syzkaller.appspot.com/bug?extid=5dda108b672b54141857
title: general protection fault in smc_tx_sendmsg
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4e3db44a242a4e2afe33b59793898ecbb61d478e
fix_commit: 17081633e22d83be928a779fd7acd04b247dec90
datetime: '2021-06-25T11:53:51-07:00'
fix_commit_message: 'net/smc: Ensure correct state of the socket in send path


  When smc_sendmsg() is called before the SMC socket initialization has

  completed, smc_tx_sendmsg() will access un-initialized fields of the

  SMC socket which results in a null-pointer dereference.

  Fix this by checking the socket state first in smc_tx_sendmsg().


  Fixes: e0e4b8fa5338 ("net/smc: Add SMC statistics support")

  Reported-by: syzbot+5dda108b672b54141857@syzkaller.appspotmail.com

  Reviewed-by: Karsten Graul <kgraul@linux.ibm.com>

  Signed-off-by: Guvenc Gulce <guvenc@linux.ibm.com>

  Signed-off-by: Karsten Graul <kgraul@linux.ibm.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/smc
hunk_count: 2
covered_count: 2
