id: 912776840162c13db1a3
bug_link: https://syzkaller.appspot.com/bug?extid=912776840162c13db1a3
title: 'KASAN: use-after-free Read in xfs_qm_dqfree_one'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1f5619ed881081be300db61da552ffae7163bb72
fix_commit: 52f31ed228212ba572c44e15e818a3a5c74122c0
datetime: '2022-12-08T08:29:58-08:00'
fix_commit_message: 'xfs: dquot shrinker doesn''t check for XFS_DQFLAG_FREEING


  Resulting in a UAF if the shrinker races with some other dquot

  freeing mechanism that sets XFS_DQFLAG_FREEING before the dquot is

  removed from the LRU. This can occur if a dquot purge races with

  drop_caches.


  Reported-by: syzbot+912776840162c13db1a3@syzkaller.appspotmail.com

  Signed-off-by: Dave Chinner <dchinner@redhat.com>

  Reviewed-by: Darrick J. Wong <djwong@kernel.org>

  Signed-off-by: Darrick J. Wong <djwong@kernel.org>

  '
submodule:
- fs/xfs
hunk_count: 3
covered_count: 1
