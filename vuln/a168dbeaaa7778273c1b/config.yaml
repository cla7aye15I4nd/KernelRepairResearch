id: a168dbeaaa7778273c1b
bug_link: https://syzkaller.appspot.com/bug?extid=a168dbeaaa7778273c1b
title: 'BUG: unable to handle kernel paging request in bitfill_aligned (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8d0268585b9c07dd01b77b63913a4f31ad99239b
fix_commit: a5a923038d70d2d4a86cb4e3f32625a5ee6e7e24
datetime: '2022-08-26T19:56:18+02:00'
fix_commit_message: 'fbdev: fbcon: Properly revert changes when vc_resize() failed


  fbcon_do_set_font() calls vc_resize() when font size is changed.

  However, if if vc_resize() failed, current implementation doesn''t

  revert changes for font size, and this causes inconsistent state.


  syzbot reported unable to handle page fault due to this issue [1].

  syzbot''s repro uses fault injection which cause failure for memory

  allocation, so vc_resize() failed.


  This patch fixes this issue by properly revert changes for font

  related date when vc_resize() failed.


  Link: https://syzkaller.appspot.com/bug?id=3443d3a1fa6d964dd7310a0cb1696d165a3e07c4
  [1]

  Reported-by: syzbot+a168dbeaaa7778273c1b@syzkaller.appspotmail.com

  Signed-off-by: Shigeru Yoshida <syoshida@redhat.com>

  Signed-off-by: Helge Deller <deller@gmx.de>

  CC: stable@vger.kernel.org # 5.15+

  '
submodule:
- drivers/video/fbdev/core
hunk_count: 3
covered_count: 3
