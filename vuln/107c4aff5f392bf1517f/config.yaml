id: 107c4aff5f392bf1517f
bug_link: https://syzkaller.appspot.com/bug?extid=107c4aff5f392bf1517f
title: memory leak in _sctp_make_chunk
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a7869e5f9174f246b662b2db6390bc128a351388
fix_commit: be7a7729207797476b6666f046d765bdf9630407
datetime: '2020-01-06T13:28:37-08:00'
fix_commit_message: 'sctp: free cmd->obj.chunk for the unprocessed SCTP_CMD_REPLY


  This patch is to fix a memleak caused by no place to free cmd->obj.chunk

  for the unprocessed SCTP_CMD_REPLY. This issue occurs when failing to

  process a cmd while there''re still SCTP_CMD_REPLY cmds on the cmd seq

  with an allocated chunk in cmd->obj.chunk.


  So fix it by freeing cmd->obj.chunk for each SCTP_CMD_REPLY cmd left on

  the cmd seq when any cmd returns error. While at it, also remove ''nomem''

  label.


  Reported-by: syzbot+107c4aff5f392bf1517f@syzkaller.appspotmail.com

  Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")

  Signed-off-by: Xin Long <lucien.xin@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sctp
hunk_count: 5
covered_count: 2
