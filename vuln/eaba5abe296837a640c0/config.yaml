id: eaba5abe296837a640c0
bug_link: https://syzkaller.appspot.com/bug?extid=eaba5abe296837a640c0
title: 'KMSAN: uninit-value in ext4_inlinedir_to_tree'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: be210737fe6cef2d0d578e23342261688c9317e1
fix_commit: 8dc9c3da79c84b13fdb135e2fb0a149a8175bffe
datetime: '2024-06-27T10:08:36-04:00'
fix_commit_message: 'ext4: fix uninitialized variable in ext4_inlinedir_to_tree


  Syzbot has found an uninit-value bug in ext4_inlinedir_to_tree


  This error happens because ext4_inlinedir_to_tree does not

  handle the case when ext4fs_dirhash returns an error


  This can be avoided by checking the return value of ext4fs_dirhash

  and propagating the error,

  similar to how it''s done with ext4_htree_store_dirent


  Signed-off-by: Xiaxi Shen <shenxiaxi26@gmail.com>

  Reported-and-tested-by: syzbot+eaba5abe296837a640c0@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=eaba5abe296837a640c0

  Link: https://patch.msgid.link/20240501033017.220000-1-shenxiaxi26@gmail.com

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 1
covered_count: 1
