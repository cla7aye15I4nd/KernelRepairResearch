id: 1d1597a5aa3679c65b9f
bug_link: https://syzkaller.appspot.com/bug?extid=1d1597a5aa3679c65b9f
title: 'WARNING: ODEBUG bug in rsi_probe'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e93cd35101b61e4c79149be2cfc927c4b28dc60c
fix_commit: 92aafe77123ab478e5f5095878856ab0424910da
datetime: '2019-12-18T20:57:04+02:00'
fix_commit_message: 'rsi: fix use-after-free on probe errors


  The driver would fail to stop the command timer in most error paths,

  something which specifically could lead to the timer being freed while

  still active on I/O errors during probe.


  Fix this by making sure that each function starting the timer also stops

  it in all relevant error paths.


  Reported-by: syzbot+1d1597a5aa3679c65b9f@syzkaller.appspotmail.com

  Fixes: b78e91bcfb33 ("rsi: Add new firmware loading method")

  Cc: stable <stable@vger.kernel.org>     # 4.12

  Cc: Prameela Rani Garnepudi <prameela.j04cs@gmail.com>

  Cc: Amitkumar Karwar <amit.karwar@redpinesignals.com>

  Signed-off-by: Johan Hovold <johan@kernel.org>

  Signed-off-by: Kalle Valo <kvalo@codeaurora.org>

  '
submodule:
- drivers/net/wireless/rsi
hunk_count: 4
covered_count: 0
