id: 6087eafb76a94c4ac9eb
bug_link: https://syzkaller.appspot.com/bug?extid=6087eafb76a94c4ac9eb
title: 'KASAN: slab-out-of-bounds Write in dbgfs_rm_context_write'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7dc5ba6254bb242a9f45e43549171a2d84d25e6a
fix_commit: 1de09a7281edecfdba19b3a07417f6d65243ab5f
datetime: '2022-11-08T15:57:25-08:00'
fix_commit_message: "mm/damon/dbgfs: check if rm_contexts input is for a real context\n\
  \nA user could write a name of a file under 'damon/' debugfs directory,\nwhich is\
  \ not a user-created context, to 'rm_contexts' file.  In the case,\n'dbgfs_rm_context()'\
  \ just assumes it's the valid DAMON context directory\nonly if a file of the name\
  \ exist.  As a result, invalid memory access\ncould happen as below.  Fix the bug\
  \ by checking if the given input is for\na directory.  This check can filter out\
  \ non-context inputs because\ndirectories under 'damon/' debugfs directory can be\
  \ created via only\n'mk_contexts' file.\n\nThis bug has found by syzbot[1].\n\n\
  [1] https://lore.kernel.org/damon/000000000000ede3ac05ec4abf8e@google.com/\n\nLink:\
  \ https://lkml.kernel.org/r/20221107165001.5717-2-sj@kernel.org\nFixes: 75c1c2b53c78\
  \ (\"mm/damon/dbgfs: support multiple contexts\")\nSigned-off-by: SeongJae Park\
  \ <sj@kernel.org>\nReported-by: syzbot+6087eafb76a94c4ac9eb@syzkaller.appspotmail.com\n\
  Cc: <stable@vger.kernel.org>\t[5.15.x]\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- mm/damon
hunk_count: 2
covered_count: 2
