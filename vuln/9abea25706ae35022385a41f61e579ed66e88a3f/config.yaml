id: 9abea25706ae35022385a41f61e579ed66e88a3f
bug_link: https://syzkaller.appspot.com/bug?extid=9abea25706ae35022385a41f61e579ed66e88a3f
title: 'KASAN: use-after-free Read in sock_release'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 69c64866ce072dea1d1e59a0d61e0f66c0dffb76
fix_commit: a5739435b5a3b8c449f8844ecd71a3b1e89f0a33
datetime: '2017-12-05T18:39:28-05:00'
fix_commit_message: "fix kcm_clone()\n\n1) it's fput() or sock_release(), not both\n\
  2) don't do fd_install() until the last failure exit.\n3) not a bug per se, but...\
  \ don't attach socket to struct file\n   until it's set up.\n\nTake reserving descriptor\
  \ into the caller, move fd_install() to the\ncaller, sanitize failure exits and\
  \ calling conventions.\n\nCc: stable@vger.kernel.org # v4.6+\nAcked-by: Tom Herbert\
  \ <tom@herbertland.com>\nSigned-off-by: Al Viro <viro@zeniv.linux.org.uk>\nSigned-off-by:\
  \ David S. Miller <davem@davemloft.net>\n"
submodule:
- net/kcm
hunk_count: 2
covered_count: 0
