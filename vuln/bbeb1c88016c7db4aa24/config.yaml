id: bbeb1c88016c7db4aa24
bug_link: https://syzkaller.appspot.com/bug?extid=bbeb1c88016c7db4aa24
title: 'KASAN: use-after-free Read in path_init (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: fb893de323e2d39f7a1f6df425703a2edbdf56ea
fix_commit: 24fb33d40d60bd7d196400e7d5b26ff566fd98b7
datetime: '2020-08-12T10:22:39-07:00'
fix_commit_message: 'fix breakage in do_rmdir()


  syzbot reported and bisected a use-after-free due to the recent init

  cleanups.


  The putname() should happen only after we''d *not* branched to retry,

  same as it''s done in do_unlinkat().


  Reported-by: syzbot+bbeb1c88016c7db4aa24@syzkaller.appspotmail.com

  Fixes: e24ab0ef689d "fs: push the getname from do_rmdir into the callers"

  Cc: Christoph Hellwig <hch@lst.de>

  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>

  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- fs
hunk_count: 1
covered_count: 1
