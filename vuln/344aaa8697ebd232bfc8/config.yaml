id: 344aaa8697ebd232bfc8
bug_link: https://syzkaller.appspot.com/bug?extid=344aaa8697ebd232bfc8
title: WARNING in __ext4fs_dirhash
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a44be64bbecb15a452496f60db6eacfee2b59c79
fix_commit: 4b3cb1d108bfc2aebb0d7c8a52261a53cf7f5786
datetime: '2023-05-13T18:05:05-04:00'
fix_commit_message: 'ext4: improve error handling from ext4_dirhash()


  The ext4_dirhash() will *almost* never fail, especially when the hash

  tree feature was first introduced.  However, with the addition of

  support of encrypted, casefolded file names, that function can most

  certainly fail today.


  So make sure the callers of ext4_dirhash() properly check for

  failures, and reflect the errors back up to their callers.


  Cc: stable@kernel.org

  Link: https://lore.kernel.org/r/20230506142419.984260-1-tytso@mit.edu

  Reported-by: syzbot+394aa8a792cb99dbc837@syzkaller.appspotmail.com

  Reported-by: syzbot+344aaa8697ebd232bfc8@syzkaller.appspotmail.com

  Link: https://syzkaller.appspot.com/bug?id=db56459ea4ac4a676ae4b4678f633e55da005a9b

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 9
covered_count: 2
