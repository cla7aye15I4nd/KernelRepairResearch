id: 1c8034b9f0e640f9ba45
bug_link: https://syzkaller.appspot.com/bug?extid=1c8034b9f0e640f9ba45
title: WARNING in inc_nlink (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: cefd1b83275d4c587bdeb2fe7aed07908642f875
fix_commit: 97f044f690bac2b094bfb7fb2d177ef946c85880
datetime: '2021-10-28T09:45:26+02:00'
fix_commit_message: 'fuse: don''t increment nlink in link()


  The fuse_iget() call in create_new_entry() already updated the inode with

  all the new attributes and incremented the attribute version.


  Incrementing the nlink will result in the wrong count.  This wasn''t noticed

  because the attributes were invalidated right after this.


  Updating ctime is still needed for the writeback case when the ctime is not

  refreshed.


  Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>

  '
submodule:
- fs/fuse
hunk_count: 3
covered_count: 1
