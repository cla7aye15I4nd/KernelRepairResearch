id: af90d47a37376844e731
bug_link: https://syzkaller.appspot.com/bug?extid=af90d47a37376844e731
title: 'KASAN: slab-out-of-bounds Write in gfs2_fill_super'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c2a04b02c060c4858762edce4674d5cba3e5a96f
fix_commit: 0ddc5154b24c96f20e94d653b0a814438de6032b
datetime: '2020-10-15T14:29:03+02:00'
fix_commit_message: 'gfs2: add validation checks for size of superblock


  In gfs2_check_sb(), no validation checks are performed with regards to

  the size of the superblock.

  syzkaller detected a slab-out-of-bounds bug that was primarily caused

  because the block size for a superblock was set to zero.

  A valid size for a superblock is a power of 2 between 512 and PAGE_SIZE.

  Performing validation checks and ensuring that the size of the superblock

  is valid fixes this bug.


  Reported-by: syzbot+af90d47a37376844e731@syzkaller.appspotmail.com

  Tested-by: syzbot+af90d47a37376844e731@syzkaller.appspotmail.com

  Suggested-by: Andrew Price <anprice@redhat.com>

  Signed-off-by: Anant Thazhemadam <anant.thazhemadam@gmail.com>

  [Minor code reordering.]

  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>

  '
submodule:
- fs/gfs2
hunk_count: 1
covered_count: 1
