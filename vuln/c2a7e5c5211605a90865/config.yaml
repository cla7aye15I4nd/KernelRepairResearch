id: c2a7e5c5211605a90865
bug_link: https://syzkaller.appspot.com/bug?extid=c2a7e5c5211605a90865
title: WARNING in qrtr_tun_write_iter
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a4dc7eee9106a9d2a6e08b442db19677aa9699c7
fix_commit: 2a80c15812372e554474b1dba0b1d8e467af295d
datetime: '2021-02-03T16:29:06-08:00'
fix_commit_message: "net/qrtr: restrict user-controlled length in qrtr_tun_write_iter()\n\
  \nsyzbot found WARNING in qrtr_tun_write_iter [1] when write_iter length\nexceeds\
  \ KMALLOC_MAX_SIZE causing order >= MAX_ORDER condition.\n\nAdditionally, there\
  \ is no check for 0 length write.\n\n[1]\nWARNING: mm/page_alloc.c:5011\n[..]\n\
  Call Trace:\n alloc_pages_current+0x18c/0x2a0 mm/mempolicy.c:2267\n alloc_pages\
  \ include/linux/gfp.h:547 [inline]\n kmalloc_order+0x2e/0xb0 mm/slab_common.c:837\n\
  \ kmalloc_order_trace+0x14/0x120 mm/slab_common.c:853\n kmalloc include/linux/slab.h:557\
  \ [inline]\n kzalloc include/linux/slab.h:682 [inline]\n qrtr_tun_write_iter+0x8a/0x180\
  \ net/qrtr/tun.c:83\n call_write_iter include/linux/fs.h:1901 [inline]\n\nReported-by:\
  \ syzbot+c2a7e5c5211605a90865@syzkaller.appspotmail.com\nSigned-off-by: Sabyrzhan\
  \ Tasbolatov <snovitoll@gmail.com>\nLink: https://lore.kernel.org/r/20210202092059.1361381-1-snovitoll@gmail.com\n\
  Signed-off-by: Jakub Kicinski <kuba@kernel.org>\n"
submodule:
- net/qrtr
hunk_count: 1
covered_count: 1
