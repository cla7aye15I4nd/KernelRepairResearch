id: f7d147e6db52b1e09dba
bug_link: https://syzkaller.appspot.com/bug?extid=f7d147e6db52b1e09dba
title: 'INFO: task hung in __blockdev_direct_IO (4)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1bb7ff4204b6d4927e982cd256286c09ed4fd8ca
fix_commit: b0522303f67255926b946aa66885a0104d1b2980
datetime: '2025-03-27T21:18:03+09:00'
fix_commit_message: 'exfat: fix the infinite loop in exfat_find_last_cluster()


  In exfat_find_last_cluster(), the cluster chain is traversed until

  the EOF cluster. If the cluster chain includes a loop due to file

  system corruption, the EOF cluster cannot be traversed, resulting

  in an infinite loop.


  If the number of clusters indicated by the file size is inconsistent

  with the cluster chain length, exfat_find_last_cluster() will return

  an error, so if this inconsistency is found, the traversal can be

  aborted without traversing to the EOF cluster.


  Reported-by: syzbot+f7d147e6db52b1e09dba@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=f7d147e6db52b1e09dba

  Tested-by: syzbot+f7d147e6db52b1e09dba@syzkaller.appspotmail.com

  Fixes: 31023864e67a ("exfat: add fat entry operations")

  Signed-off-by: Yuezhang Mo <Yuezhang.Mo@sony.com>

  Signed-off-by: Namjae Jeon <linkinjeon@kernel.org>

  '
submodule:
- fs/exfat
hunk_count: 1
covered_count: 1
