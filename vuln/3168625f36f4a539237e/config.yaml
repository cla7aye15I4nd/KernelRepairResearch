id: 3168625f36f4a539237e
bug_link: https://syzkaller.appspot.com/bug?extid=3168625f36f4a539237e
title: 'KASAN: slab-use-after-free Read in bch2_copygc'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9fe8ec866442b6ee7eac8d5ceda18f88aaa7f78d
fix_commit: c02b943f7d127caf43f49ab6c9eaf8e1b082b9af
datetime: '2025-07-16T17:32:33-04:00'
fix_commit_message: 'bcachefs: Fix reference to invalid bucket in copygc


  Use bch2_dev_bucket_tryget() instead of bch2_dev_tryget() before

  checking the bucket bitmap.


  Reported-by: syzbot+3168625f36f4a539237e@syzkaller.appspotmail.com

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
