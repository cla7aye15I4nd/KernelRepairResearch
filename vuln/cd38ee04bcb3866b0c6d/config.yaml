id: cd38ee04bcb3866b0c6d
bug_link: https://syzkaller.appspot.com/bug?extid=cd38ee04bcb3866b0c6d
title: 'linux-next test error: WARNING in apparmor_unix_stream_connect'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8936125e232803e64cb29e107326a942981188d6
fix_commit: f3c0675bb9e0a3a472dd519ec7ccde23bdcf180b
datetime: '2025-07-30T05:00:47-07:00'
fix_commit_message: 'apparmor: fix test error: WARNING in apparmor_unix_stream_connect


  commit 88fec3526e84 ("apparmor: make sure unix socket labeling is correctly updated.")

  added the use of security_sk_alloc() which ensures the sk label is

  initialized.


  This means that the AA_BUG in apparmor_unix_stream_connect() is no

  longer correct, because while the sk is still not being initialized

  by going through post_create, it is now initialize in sk_alloc().

  Remove the now invalid check.


  Reported-by: syzbot+cd38ee04bcb3866b0c6d@syzkaller.appspotmail.com

  Fixes: 88fec3526e84 ("apparmor: make sure unix socket labeling is correctly updated.")

  Signed-off-by: John Johansen <john.johansen@canonical.com>

  '
submodule:
- security/apparmor
hunk_count: 1
covered_count: 1
