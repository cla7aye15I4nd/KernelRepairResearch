id: 75d51fe5bf4ebe988518
bug_link: https://syzkaller.appspot.com/bug?extid=75d51fe5bf4ebe988518
title: 'KMSAN: uninit-value in unix_find_other'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 316a1bef0d1622410c9f0f301173d0a03168ce37
fix_commit: 7ca1db21ef8e0e6725b4d25deed1ca196f7efb28
datetime: '2020-10-12T10:05:47+02:00'
fix_commit_message: 'net: 9p: initialize sun_server.sun_path to have addr''s value
  only when addr is valid


  In p9_fd_create_unix, checking is performed to see if the addr (passed

  as an argument) is NULL or not.

  However, no check is performed to see if addr is a valid address, i.e.,

  it doesn''t entirely consist of only 0''s.

  The initialization of sun_server.sun_path to be equal to this faulty

  addr value leads to an uninitialized variable, as detected by KMSAN.

  Checking for this (faulty addr) and returning a negative error number

  appropriately, resolves this issue.


  Link: http://lkml.kernel.org/r/20201012042404.2508-1-anant.thazhemadam@gmail.com

  Reported-by: syzbot+75d51fe5bf4ebe988518@syzkaller.appspotmail.com

  Tested-by: syzbot+75d51fe5bf4ebe988518@syzkaller.appspotmail.com

  Signed-off-by: Anant Thazhemadam <anant.thazhemadam@gmail.com>

  Signed-off-by: Dominique Martinet <asmadeus@codewreck.org>

  '
submodule:
- net/9p
hunk_count: 1
covered_count: 1
