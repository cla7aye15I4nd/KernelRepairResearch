id: 6c55f725d1bdc8c52058
bug_link: https://syzkaller.appspot.com/bug?extid=6c55f725d1bdc8c52058
title: 'KMSAN: uninit-value in from_kuid (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 229fd15908fe1f99b1de4cde3326e62d1e892611
fix_commit: 15f34347481648a567db67fb473c23befb796af5
datetime: '2024-10-17T15:33:43+02:00'
fix_commit_message: 'fs: Fix uninitialized value issue in from_kuid and from_kgid


  ocfs2_setattr() uses attr->ia_mode, attr->ia_uid and attr->ia_gid in

  a trace point even though ATTR_MODE, ATTR_UID and ATTR_GID aren''t set.


  Initialize all fields of newattrs to avoid uninitialized variables, by

  checking if ATTR_MODE, ATTR_UID, ATTR_GID are initialized, otherwise 0.


  Reported-by: syzbot+6c55f725d1bdc8c52058@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=6c55f725d1bdc8c52058

  Signed-off-by: Alessandro Zanni <alessandro.zanni87@gmail.com>

  Link: https://lore.kernel.org/r/20241017120553.55331-1-alessandro.zanni87@gmail.com

  Reviewed-by: Jan Kara <jack@suse.cz>

  Signed-off-by: Christian Brauner <brauner@kernel.org>

  '
submodule:
- fs/ocfs2
hunk_count: 1
covered_count: 1
