id: 1ddfb3357e1d7bb5b5d3
bug_link: https://syzkaller.appspot.com/bug?extid=1ddfb3357e1d7bb5b5d3
title: WARNING in rfkill_alloc
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 51a1aaa631c90223888d8beac4d649dc11d2ca55
fix_commit: 59b179b48ce2a6076448a44531242ac2b3f6cef2
datetime: '2018-01-15T11:35:06+01:00'
fix_commit_message: 'cfg80211: check dev_set_name() return value


  syzbot reported a warning from rfkill_alloc(), and after a while

  I think that the reason is that it was doing fault injection and

  the dev_set_name() failed, leaving the name NULL, and we didn''t

  check the return value and got to rfkill_alloc() with a NULL name.

  Since we really don''t want a NULL name, we ought to check the

  return value.


  Fixes: fb28ad35906a ("net: struct device - replace bus_id with dev_name(), dev_set_name()")

  Reported-by: syzbot+1ddfb3357e1d7bb5b5d3@syzkaller.appspotmail.com

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/wireless
hunk_count: 2
covered_count: 2
