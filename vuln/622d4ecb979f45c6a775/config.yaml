id: 622d4ecb979f45c6a775
bug_link: https://syzkaller.appspot.com/bug?extid=622d4ecb979f45c6a775
title: 'KASAN: slab-out-of-bounds Read in build_audio_procunit (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: cc9dbfa9707868fb0ca864c05e0c42d3f4d15cf2
fix_commit: 976a68f06b2ea49e2ab67a5f84919a8b105db8be
datetime: '2019-11-14T18:01:22+01:00'
fix_commit_message: 'ALSA: usb-audio: Fix incorrect size check for processing/extension
  units


  The recently introduced unit descriptor validation had some bug for

  processing and extension units, it counts a bControlSize byte twice so

  it expected a bigger size than it should have been.  This seems

  resulting in a probe error on a few devices.


  Fix the calculation for proper checks of PU and EU.


  Fixes: 57f8770620e9 ("ALSA: usb-audio: More validations of descriptor units")

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20191114165613.7422-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/usb
hunk_count: 1
covered_count: 0
