id: 600fef7c414ee7e2d71b
bug_link: https://syzkaller.appspot.com/bug?extid=600fef7c414ee7e2d71b
title: 'BUG: unable to handle kernel paging request in smc_nl_handle_smcr_dev'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ef72cd3c5ce168829c6684ecb2cae047d3493690
fix_commit: 995433b795cec0a4ef6c8603e7642903c621943a
datetime: '2020-12-16T13:33:47-08:00'
fix_commit_message: 'net/smc: fix access to parent of an ib device


  The parent of an ib device is used to retrieve the PCI device

  attributes. It turns out that there are possible cases when an ib device

  has no parent set in the device structure, which may lead to page

  faults when trying to access this memory.

  Fix that by checking the parent pointer and consolidate the pci device

  specific processing in a new function.


  Fixes: a3db10efcc4c ("net/smc: Add support for obtaining SMCR device list")

  Reported-by: syzbot+600fef7c414ee7e2d71b@syzkaller.appspotmail.com

  Signed-off-by: Karsten Graul <kgraul@linux.ibm.com>

  Link: https://lore.kernel.org/r/20201215091058.49354-2-kgraul@linux.ibm.com

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/smc
hunk_count: 2
covered_count: 2
