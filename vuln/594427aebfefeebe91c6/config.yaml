id: 594427aebfefeebe91c6
bug_link: https://syzkaller.appspot.com/bug?extid=594427aebfefeebe91c6
title: 'UBSAN: shift-out-of-bounds in rewrite_old_nodes_pred'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2bb9600d5d4735953c47dd1ee99382c68dd04caa
fix_commit: 0ec5b3b7ccfcdca02ab322abf86455d0050ae98f
datetime: '2024-05-06T10:58:17-04:00'
fix_commit_message: 'bcachefs: Fix shift-by-64 in bformat_needs_redo()


  Ancient versions of bcachefs produced packed formats that could

  represent keys that our in memory format cannot represent;

  bformat_needs_redo() has some tricky shifts to check for this sort of

  overflow.


  Reported-by: syzbot+594427aebfefeebe91c6@syzkaller.appspotmail.com

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
