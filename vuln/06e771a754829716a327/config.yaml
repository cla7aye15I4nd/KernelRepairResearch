id: 06e771a754829716a327
bug_link: https://syzkaller.appspot.com/bug?extid=06e771a754829716a327
title: 'KMSAN: uninit-value in tipc_nl_compat_name_table_dump'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: edf5ff04a45750ac8ce2435974f001dc9cfbf055
fix_commit: 974cb0e3e7c963ced06c4e32c5b2884173fa5e01
datetime: '2019-01-15T20:29:20-08:00'
fix_commit_message: "tipc: fix uninit-value in tipc_nl_compat_name_table_dump\n\n\
  syzbot reported:\n\nBUG: KMSAN: uninit-value in __arch_swab32 arch/x86/include/uapi/asm/swab.h:10\
  \ [inline]\nBUG: KMSAN: uninit-value in __fswab32 include/uapi/linux/swab.h:59 [inline]\n\
  BUG: KMSAN: uninit-value in tipc_nl_compat_name_table_dump+0x4a8/0xba0 net/tipc/netlink_compat.c:826\n\
  CPU: 0 PID: 6290 Comm: syz-executor848 Not tainted 4.19.0-rc8+ #70\nHardware name:\
  \ Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011\nCall\
  \ Trace:\n __dump_stack lib/dump_stack.c:77 [inline]\n dump_stack+0x306/0x460 lib/dump_stack.c:113\n\
  \ kmsan_report+0x1a2/0x2e0 mm/kmsan/kmsan.c:917\n __msan_warning+0x7c/0xe0 mm/kmsan/kmsan_instr.c:500\n\
  \ __arch_swab32 arch/x86/include/uapi/asm/swab.h:10 [inline]\n __fswab32 include/uapi/linux/swab.h:59\
  \ [inline]\n tipc_nl_compat_name_table_dump+0x4a8/0xba0 net/tipc/netlink_compat.c:826\n\
  \ __tipc_nl_compat_dumpit+0x59e/0xdb0 net/tipc/netlink_compat.c:205\n tipc_nl_compat_dumpit+0x63a/0x820\
  \ net/tipc/netlink_compat.c:270\n tipc_nl_compat_handle net/tipc/netlink_compat.c:1151\
  \ [inline]\n tipc_nl_compat_recv+0x1402/0x2760 net/tipc/netlink_compat.c:1210\n\
  \ genl_family_rcv_msg net/netlink/genetlink.c:601 [inline]\n genl_rcv_msg+0x185c/0x1a20\
  \ net/netlink/genetlink.c:626\n netlink_rcv_skb+0x394/0x640 net/netlink/af_netlink.c:2454\n\
  \ genl_rcv+0x63/0x80 net/netlink/genetlink.c:637\n netlink_unicast_kernel net/netlink/af_netlink.c:1317\
  \ [inline]\n netlink_unicast+0x166d/0x1720 net/netlink/af_netlink.c:1343\n netlink_sendmsg+0x1391/0x1420\
  \ net/netlink/af_netlink.c:1908\n sock_sendmsg_nosec net/socket.c:621 [inline]\n\
  \ sock_sendmsg net/socket.c:631 [inline]\n ___sys_sendmsg+0xe47/0x1200 net/socket.c:2116\n\
  \ __sys_sendmsg net/socket.c:2154 [inline]\n __do_sys_sendmsg net/socket.c:2163\
  \ [inline]\n __se_sys_sendmsg+0x307/0x460 net/socket.c:2161\n __x64_sys_sendmsg+0x4a/0x70\
  \ net/socket.c:2161\n do_syscall_64+0xbe/0x100 arch/x86/entry/common.c:291\n entry_SYSCALL_64_after_hwframe+0x63/0xe7\n\
  RIP: 0033:0x440179\nCode: 18 89 d0 c3 66 2e 0f 1f 84 00 00 00 00 00 0f 1f 00 48\
  \ 89 f8 48 89 f7 48 89 d6 48 89 ca 4d 89 c2 4d 89 c8 4c 8b 4c 24 08 0f 05 <48> 3d\
  \ 01 f0 ff ff 0f 83 fb 13 fc ff c3 66 2e 0f 1f 84 00 00 00 00\nRSP: 002b:00007ffecec49318\
  \ EFLAGS: 00000213 ORIG_RAX: 000000000000002e\nRAX: ffffffffffffffda RBX: 00000000004002c8\
  \ RCX: 0000000000440179\nRDX: 0000000000000000 RSI: 0000000020000100 RDI: 0000000000000003\n\
  RBP: 00000000006ca018 R08: 0000000000000000 R09: 00000000004002c8\nR10: 0000000000000000\
  \ R11: 0000000000000213 R12: 0000000000401a00\nR13: 0000000000401a90 R14: 0000000000000000\
  \ R15: 0000000000000000\n\nUninit was created at:\n kmsan_save_stack_with_flags\
  \ mm/kmsan/kmsan.c:255 [inline]\n kmsan_internal_poison_shadow+0xc8/0x1d0 mm/kmsan/kmsan.c:180\n\
  \ kmsan_kmalloc+0xa4/0x120 mm/kmsan/kmsan_hooks.c:104\n kmsan_slab_alloc+0x10/0x20\
  \ mm/kmsan/kmsan_hooks.c:113\n slab_post_alloc_hook mm/slab.h:446 [inline]\n slab_alloc_node\
  \ mm/slub.c:2727 [inline]\n __kmalloc_node_track_caller+0xb43/0x1400 mm/slub.c:4360\n\
  \ __kmalloc_reserve net/core/skbuff.c:138 [inline]\n __alloc_skb+0x422/0xe90 net/core/skbuff.c:206\n\
  \ alloc_skb include/linux/skbuff.h:996 [inline]\n netlink_alloc_large_skb net/netlink/af_netlink.c:1189\
  \ [inline]\n netlink_sendmsg+0xcaf/0x1420 net/netlink/af_netlink.c:1883\n sock_sendmsg_nosec\
  \ net/socket.c:621 [inline]\n sock_sendmsg net/socket.c:631 [inline]\n ___sys_sendmsg+0xe47/0x1200\
  \ net/socket.c:2116\n __sys_sendmsg net/socket.c:2154 [inline]\n __do_sys_sendmsg\
  \ net/socket.c:2163 [inline]\n __se_sys_sendmsg+0x307/0x460 net/socket.c:2161\n\
  \ __x64_sys_sendmsg+0x4a/0x70 net/socket.c:2161\n do_syscall_64+0xbe/0x100 arch/x86/entry/common.c:291\n\
  \ entry_SYSCALL_64_after_hwframe+0x63/0xe7\n\nWe cannot take for granted the thing\
  \ that the length of data contained\nin TLV is longer than the size of struct tipc_name_table_query\
  \ in\ntipc_nl_compat_name_table_dump().\n\nReported-by: syzbot+06e771a754829716a327@syzkaller.appspotmail.com\n\
  Signed-off-by: Ying Xue <ying.xue@windriver.com>\nSigned-off-by: David S. Miller\
  \ <davem@davemloft.net>\n"
submodule:
- net/tipc
hunk_count: 1
covered_count: 1
