id: 9437020c82413d00222d
bug_link: https://syzkaller.appspot.com/bug?extid=9437020c82413d00222d
title: 'KASAN: use-after-free Read in snd_seq_ioctl_get_subscription'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: feb689025fbb6f0aa6297d3ddf97de945ea4ad32
fix_commit: 2eabc5ec8ab4d4748a82050dfcb994119b983750
datetime: '2019-04-09T18:54:13+02:00'
fix_commit_message: 'ALSA: seq: Fix race of get-subscription call vs port-delete ioctls


  The snd_seq_ioctl_get_subscription() retrieves the port subscriber

  information as a pointer, while the object isn''t protected, hence it

  may be deleted before the actual reference.  This race was spotted by

  syzkaller and may lead to a UAF.


  The fix is simply copying the data in the lookup function that

  performs in the rwsem to protect against the deletion.


  Reported-by: syzbot+9437020c82413d00222d@syzkaller.appspotmail.com

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/seq
hunk_count: 3
covered_count: 1
