id: 26eedf3631650972f17c
bug_link: https://syzkaller.appspot.com/bug?extid=26eedf3631650972f17c
title: memory leak in ovl_parse_param
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b28060db7172e6d8912d88b369123eb89e0d36b4
fix_commit: 37f32f52643869131ec01bb69bdf9f404f6109fb
datetime: '2023-11-14T08:09:36+02:00'
fix_commit_message: 'ovl: fix memory leak in ovl_parse_param()


  On failure to parse parameters in ovl_parse_param_lowerdir(), it is

  necessary to update ctx->nr with the correct nr before using

  ovl_reset_lowerdirs() to release l->name.


  Reported-and-tested-by: syzbot+26eedf3631650972f17c@syzkaller.appspotmail.com

  Fixes: c835110b588a ("ovl: remove unused code in lowerdir param parsing")

  Co-authored-by: Edward Adam Davis <eadavis@qq.com>

  Signed-off-by: Amir Goldstein <amir73il@gmail.com>

  '
submodule:
- fs/overlayfs
hunk_count: 5
covered_count: 4
