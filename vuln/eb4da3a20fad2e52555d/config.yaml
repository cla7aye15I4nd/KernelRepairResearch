id: eb4da3a20fad2e52555d
bug_link: https://syzkaller.appspot.com/bug?extid=eb4da3a20fad2e52555d
title: general protection fault in __ipv6_sock_mc_join
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: acb4a33e9856d5fa3384b87d3d8369229be06d31
fix_commit: fb83ed496b9a654f60cd1d58a0e1e79ec5694808
datetime: '2018-12-14T13:28:03-08:00'
fix_commit_message: 'tipc: compare remote and local protocols in tipc_udp_enable()


  When TIPC_NLA_UDP_REMOTE is an IPv6 mcast address but

  TIPC_NLA_UDP_LOCAL is an IPv4 address, a NULL-ptr deref is triggered

  as the UDP tunnel sock is initialized to IPv4 or IPv6 sock merely

  based on the protocol in local address.


  We should just error out when the remote address and local address

  have different protocols.


  Reported-by: syzbot+eb4da3a20fad2e52555d@syzkaller.appspotmail.com

  Cc: Ying Xue <ying.xue@windriver.com>

  Cc: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Acked-by: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tipc
hunk_count: 1
covered_count: 0
