id: 1e811482aa2c70afa9a0
bug_link: https://syzkaller.appspot.com/bug?extid=1e811482aa2c70afa9a0
title: general protection fault in tomoyo_socket_bind_permission
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 943ad0b62e3c21f324c4884caa6cb4a871bca05c
fix_commit: ad00e629145b2b9f0d78aa46e204a9df7d628978
datetime: '2024-07-13T06:40:15-06:00'
fix_commit_message: 'io_uring/net: check socket is valid in io_bind()/io_listen()


  We need to check that sock_from_file(req->file) != NULL.


  Reported-by: syzbot <syzbot+1e811482aa2c70afa9a0@syzkaller.appspotmail.com>

  Closes: https://syzkaller.appspot.com/bug?extid=1e811482aa2c70afa9a0

  Fixes: 7481fd93fa0a ("io_uring: Introduce IORING_OP_BIND")

  Fixes: ff140cc8628a ("io_uring: Introduce IORING_OP_LISTEN")

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Link: https://lore.kernel.org/r/903da529-eaa3-43ef-ae41-d30f376c60cc@I-love.SAKURA.ne.jp

  [axboe: move assignment of sock to where the NULL check is]

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- io_uring
hunk_count: 2
covered_count: 2
