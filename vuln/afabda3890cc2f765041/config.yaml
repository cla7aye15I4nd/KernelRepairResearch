id: afabda3890cc2f765041
bug_link: https://syzkaller.appspot.com/bug?extid=afabda3890cc2f765041
title: memory leak in sctp_v4_create_accept_sk
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 13696531dc90d2bd54d143aabcb766d228240e06
fix_commit: 25bff6d5478b2a02368097015b7d8eb727c87e16
datetime: '2019-06-26T19:29:23-07:00'
fix_commit_message: 'sctp: change to hold sk after auth shkey is created successfully


  Now in sctp_endpoint_init(), it holds the sk then creates auth

  shkey. But when the creation fails, it doesn''t release the sk,

  which causes a sk defcnf leak,


  Here to fix it by only holding the sk when auth shkey is created

  successfully.


  Fixes: a29a5bd4f5c3 ("[SCTP]: Implement SCTP-AUTH initializations.")

  Reported-by: syzbot+afabda3890cc2f765041@syzkaller.appspotmail.com

  Reported-by: syzbot+276ca1c77a19977c0130@syzkaller.appspotmail.com

  Signed-off-by: Xin Long <lucien.xin@gmail.com>

  Acked-by: Neil Horman <nhorman@redhat.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sctp
hunk_count: 2
covered_count: 0
