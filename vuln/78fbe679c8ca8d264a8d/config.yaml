id: 78fbe679c8ca8d264a8d
bug_link: https://syzkaller.appspot.com/bug?extid=78fbe679c8ca8d264a8d
title: memory leak in tipc_buf_acquire
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d4d5d8e83c9616aeef28a2869cea49cc3fb35526
fix_commit: 5cf02612b33f104fe1015b2dfaf1758ad3675588
datetime: '2019-06-16T20:42:05-07:00'
fix_commit_message: 'tipc: purge deferredq list for each grp member in tipc_group_delete


  Syzbot reported a memleak caused by grp members'' deferredq list not

  purged when the grp is be deleted.


  The issue occurs when more(msg_grp_bc_seqno(hdr), m->bc_rcv_nxt) in

  tipc_group_filter_msg() and the skb will stay in deferredq.


  So fix it by calling __skb_queue_purge for each member''s deferredq

  in tipc_group_delete() when a tipc sk leaves the grp.


  Fixes: b87a5ea31c93 ("tipc: guarantee group unicast doesn''t bypass group broadcast")

  Reported-by: syzbot+78fbe679c8ca8d264a8d@syzkaller.appspotmail.com

  Signed-off-by: Xin Long <lucien.xin@gmail.com>

  Acked-by: Ying Xue <ying.xue@windriver.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tipc
hunk_count: 1
covered_count: 1
