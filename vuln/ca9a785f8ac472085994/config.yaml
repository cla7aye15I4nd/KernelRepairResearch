id: ca9a785f8ac472085994
bug_link: https://syzkaller.appspot.com/bug?extid=ca9a785f8ac472085994
title: 'UBSAN: shift-out-of-bounds in f2fs_fill_super'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6422a71ef40e4751d59b8c9412e7e2dafe085878
fix_commit: e584bbe821229a3e7cc409eecd51df66f9268c21
datetime: '2020-12-10T09:13:19-08:00'
fix_commit_message: "f2fs: fix shift-out-of-bounds in sanity_check_raw_super()\n\n\
  syzbot reported a bug which could cause shift-out-of-bounds issue,\nfix it.\n\n\
  Call Trace:\n __dump_stack lib/dump_stack.c:79 [inline]\n dump_stack+0x107/0x163\
  \ lib/dump_stack.c:120\n ubsan_epilogue+0xb/0x5a lib/ubsan.c:148\n __ubsan_handle_shift_out_of_bounds.cold+0xb1/0x181\
  \ lib/ubsan.c:395\n sanity_check_raw_super fs/f2fs/super.c:2812 [inline]\n read_raw_super_block\
  \ fs/f2fs/super.c:3267 [inline]\n f2fs_fill_super.cold+0x16c9/0x16f6 fs/f2fs/super.c:3519\n\
  \ mount_bdev+0x34d/0x410 fs/super.c:1366\n legacy_get_tree+0x105/0x220 fs/fs_context.c:592\n\
  \ vfs_get_tree+0x89/0x2f0 fs/super.c:1496\n do_new_mount fs/namespace.c:2896 [inline]\n\
  \ path_mount+0x12ae/0x1e70 fs/namespace.c:3227\n do_mount fs/namespace.c:3240 [inline]\n\
  \ __do_sys_mount fs/namespace.c:3448 [inline]\n __se_sys_mount fs/namespace.c:3425\
  \ [inline]\n __x64_sys_mount+0x27f/0x300 fs/namespace.c:3425\n do_syscall_64+0x2d/0x70\
  \ arch/x86/entry/common.c:46\n entry_SYSCALL_64_after_hwframe+0x44/0xa9\n\nReported-by:\
  \ syzbot+ca9a785f8ac472085994@syzkaller.appspotmail.com\nSigned-off-by: Anant Thazhemadam\
  \ <anant.thazhemadam@gmail.com>\nSigned-off-by: Chao Yu <yuchao0@huawei.com>\nSigned-off-by:\
  \ Jaegeuk Kim <jaegeuk@kernel.org>\n"
submodule:
- fs/f2fs
hunk_count: 2
covered_count: 2
