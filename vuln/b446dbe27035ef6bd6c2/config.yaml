id: b446dbe27035ef6bd6c2
bug_link: https://syzkaller.appspot.com/bug?extid=b446dbe27035ef6bd6c2
title: 'BUG: unable to handle kernel paging request in move_pages'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: cf1b80dc31a1137b8b4568c138b453bf7453204a
fix_commit: aba6faec0103ed8f169be8dce2ead41fcb689446
datetime: '2025-08-11T23:00:59-07:00'
fix_commit_message: "userfaultfd: fix a crash in UFFDIO_MOVE when PMD is a migration\
  \ entry\n\nWhen UFFDIO_MOVE encounters a migration PMD entry, it proceeds with\n\
  obtaining a folio and accessing it even though the entry is swp_entry_t. \nAdd the\
  \ missing check and let split_huge_pmd() handle migration entries. \nWhile at it\
  \ also remove unnecessary folio check.\n\n[surenb@google.com: remove extra folio\
  \ check, per David]\n  Link: https://lkml.kernel.org/r/20250807200418.1963585-1-surenb@google.com\n\
  Link: https://lkml.kernel.org/r/20250806220022.926763-1-surenb@google.com\nFixes:\
  \ adef440691ba (\"userfaultfd: UFFDIO_MOVE uABI\")\nSigned-off-by: Suren Baghdasaryan\
  \ <surenb@google.com>\nReported-by: syzbot+b446dbe27035ef6bd6c2@syzkaller.appspotmail.com\n\
  Closes: https://lore.kernel.org/all/68794b5c.a70a0220.693ce.0050.GAE@google.com/\n\
  Reviewed-by: Peter Xu <peterx@redhat.com>\nAcked-by: David Hildenbrand <david@redhat.com>\n\
  Cc: Andrea Arcangeli <aarcange@redhat.com>\nCc: Lokesh Gidra <lokeshgidra@google.com>\n\
  Cc: <stable@vger.kernel.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- mm
hunk_count: 1
covered_count: 1
