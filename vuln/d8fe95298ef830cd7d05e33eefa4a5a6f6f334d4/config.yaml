id: d8fe95298ef830cd7d05e33eefa4a5a6f6f334d4
bug_link: https://syzkaller.appspot.com/bug?extid=d8fe95298ef830cd7d05e33eefa4a5a6f6f334d4
title: possible deadlock in flush_work (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4c625a974fb81724e60966b677e47fcba782c950
fix_commit: 528fd3547bad0bdd31c8f987e5bd00c83df8af39
datetime: '2017-10-19T12:17:56-04:00'
fix_commit_message: 'SUNRPC: Destroy transport from the system workqueue


  The transport may need to flush transport connect and receive tasks

  that are running on rpciod. In order to do so safely, we need to

  ensure that the caller of cancel_work_sync() etc is not itself

  running on rpciod.

  Do so by running the destroy task from the system workqueue.


  Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>

  '
submodule:
- net/sunrpc
hunk_count: 2
covered_count: 2
