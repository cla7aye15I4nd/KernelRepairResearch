id: 111eaa994ff74f8d440f
bug_link: https://syzkaller.appspot.com/bug?extid=111eaa994ff74f8d440f
title: WARNING in udf_expand_dir_adinicb
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 51e38c92bed26f648ec187c4400fa7512fcd8067
fix_commit: df97f64dfa317a5485daf247b6c043a584ef95f9
datetime: '2023-02-09T10:37:12+01:00'
fix_commit_message: 'udf: Avoid directory type conversion failure due to ENOMEM


  When converting directory from in-ICB to normal format, the last

  iteration through the directory fixing up directory enteries can fail

  due to ENOMEM. We do not expect this iteration to fail since the

  directory is already verified to be correct and it is difficult to undo

  the conversion at this point. So just use GFP_NOFAIL to make sure the

  small allocation cannot fail.


  Reported-by: syzbot+111eaa994ff74f8d440f@syzkaller.appspotmail.com

  Fixes: 0aba4860b0d0 ("udf: Allocate name buffer in directory iterator on heap")

  Signed-off-by: Jan Kara <jack@suse.cz>

  '
submodule:
- fs/udf
hunk_count: 1
covered_count: 0
