id: c75f181dc8429d2eb887
bug_link: https://syzkaller.appspot.com/bug?extid=c75f181dc8429d2eb887
title: general protection fault in ovl_free_fs
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b833a3660394876541d2513ce2736debc7c6797a
fix_commit: 8c25741aaad8be6fbe51510e917c740e0059cf83
datetime: '2018-09-10T12:55:49+02:00'
fix_commit_message: 'ovl: fix oopses in ovl_fill_super() failure paths


  ovl_free_fs() dereferences ofs->workbasedir and ofs->upper_mnt in cases when

  those might not have been initialized yet.


  Fix the initialization order for these fields.


  Reported-by: syzbot+c75f181dc8429d2eb887@syzkaller.appspotmail.com

  Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>

  Cc:  <stable@vger.kernel.org> # v4.15

  Fixes: 95e6d4177cb7 ("ovl: grab reference to workbasedir early")

  Fixes: a9075cdb467d ("ovl: factor out ovl_free_fs() helper")

  '
submodule:
- fs/overlayfs
hunk_count: 4
covered_count: 0
