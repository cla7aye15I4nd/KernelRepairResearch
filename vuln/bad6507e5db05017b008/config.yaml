id: bad6507e5db05017b008
bug_link: https://syzkaller.appspot.com/bug?extid=bad6507e5db05017b008
title: 'INFO: task hung in ovs_dp_masks_rebalance'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: dfd3d5266dc1d9a2b06e5a09bbff4cee547eeb5f
fix_commit: a65878d6f00bb2d791348ae90dcc2ede1dbe2b91
datetime: '2020-07-24T16:58:38-07:00'
fix_commit_message: 'net: openvswitch: fixes potential deadlock in dp cleanup code


  The previous patch introduced a deadlock, this patch fixes it by making

  sure the work is canceled without holding the global ovs lock. This is

  done by moving the reorder processing one layer up to the netns level.


  Fixes: eac87c413bf9 ("net: openvswitch: reorder masks array based on usage")

  Reported-by: syzbot+2c4ff3614695f75ce26c@syzkaller.appspotmail.com

  Reported-by: syzbot+bad6507e5db05017b008@syzkaller.appspotmail.com

  Reviewed-by: Paolo <pabeni@redhat.com>

  Signed-off-by: Eelco Chaudron <echaudro@redhat.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/openvswitch
hunk_count: 8
covered_count: 4
