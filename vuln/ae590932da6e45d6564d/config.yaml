id: ae590932da6e45d6564d
bug_link: https://syzkaller.appspot.com/bug?extid=ae590932da6e45d6564d
title: 'KASAN: null-ptr-deref Write in simple_write_to_buffer'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 62fc00a6611a0014c85763f9def1fc07c15d1302
fix_commit: fc14eebfc20854a38fd9f1d93a42b1783dad4d17
datetime: '2018-05-27T12:00:02+02:00'
fix_commit_message: 'PM / hibernate: Fix oops at snapshot_write()


  syzbot is reporting NULL pointer dereference at snapshot_write() [1].

  This is because data->handle is zero-cleared by ioctl(SNAPSHOT_FREE).

  Fix this by checking data_of(data->handle) != NULL before using it.


  [1] https://syzkaller.appspot.com/bug?id=828a3c71bd344a6de8b6a31233d51a72099f27fd


  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Reported-by: syzbot <syzbot+ae590932da6e45d6564d@syzkaller.appspotmail.com>

  Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

  '
submodule:
- kernel/power
hunk_count: 1
covered_count: 1
