id: 3faecbfd845a895c04cb
bug_link: https://syzkaller.appspot.com/bug?extid=3faecbfd845a895c04cb
title: general protection fault in erofs_bread
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f0c4d9fc9cc9462659728d168387191387e903cc
fix_commit: e5126de138caef0eedb3d6431059c0c5581a1a5d
datetime: '2022-11-08T14:44:13+08:00'
fix_commit_message: 'erofs: fix general protection fault when reading fragment


  As syzbot reported [1], the fragment feature sb flag is not set, so

  packed_inode != NULL needs to be checked in z_erofs_read_fragment().


  [1] https://lore.kernel.org/all/0000000000002e7a8905eb841ddd@google.com/


  Reported-by: syzbot+3faecbfd845a895c04cb@syzkaller.appspotmail.com

  Fixes: b15b2e307c3a ("erofs: support on-disk compressed fragments data")

  Signed-off-by: Yue Hu <huyue2@coolpad.com>

  Reviewed-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  Reviewed-by: Chao Yu <chao@kernel.org>

  Link: https://lore.kernel.org/r/20221021085325.25788-1-zbestahu@gmail.com

  Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  '
submodule:
- fs/erofs
hunk_count: 1
covered_count: 1
