id: af4fa391ef18efdd5f69
bug_link: https://syzkaller.appspot.com/bug?extid=af4fa391ef18efdd5f69
title: memory leak in zr364xx_start_readpipe
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e6001f6922cfda7b76f594595ebb38351c313da2
fix_commit: 0a045eac8d0427b64577a24d74bb8347c905ac65
datetime: '2021-06-02T13:35:15+02:00'
fix_commit_message: "media: zr364xx: fix memory leak in zr364xx_start_readpipe\n\n\
  syzbot reported memory leak in zr364xx driver.\nThe problem was in non-freed urb\
  \ in case of\nusb_submit_urb() fail.\n\nbacktrace:\n  [<ffffffff82baedf6>] kmalloc\
  \ include/linux/slab.h:561 [inline]\n  [<ffffffff82baedf6>] usb_alloc_urb+0x66/0xe0\
  \ drivers/usb/core/urb.c:74\n  [<ffffffff82f7cce8>] zr364xx_start_readpipe+0x78/0x130\
  \ drivers/media/usb/zr364xx/zr364xx.c:1022\n  [<ffffffff84251dfc>] zr364xx_board_init\
  \ drivers/media/usb/zr364xx/zr364xx.c:1383 [inline]\n  [<ffffffff84251dfc>] zr364xx_probe+0x6a3/0x851\
  \ drivers/media/usb/zr364xx/zr364xx.c:1516\n  [<ffffffff82bb6507>] usb_probe_interface+0x177/0x370\
  \ drivers/usb/core/driver.c:396\n  [<ffffffff826018a9>] really_probe+0x159/0x500\
  \ drivers/base/dd.c:576\n\nFixes: ccbf035ae5de (\"V4L/DVB (12278): zr364xx: implement\
  \ V4L2_CAP_STREAMING\")\nCc: stable@vger.kernel.org\nReported-by: syzbot+af4fa391ef18efdd5f69@syzkaller.appspotmail.com\n\
  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>\nSigned-off-by: Hans Verkuil\
  \ <hverkuil-cisco@xs4all.nl>\nSigned-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>\n"
submodule:
- drivers/media/usb/zr364xx
hunk_count: 1
covered_count: 1
