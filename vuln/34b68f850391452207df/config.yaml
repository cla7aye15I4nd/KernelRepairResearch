id: 34b68f850391452207df
bug_link: https://syzkaller.appspot.com/bug?extid=34b68f850391452207df
title: WARNING in current_check_refer_path
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 078bf9438a31567e2c0587159ccefde835fb1ced
fix_commit: 49440290a0935f428a1e43a5ac8dc275a647ff80
datetime: '2025-01-14T11:57:39+01:00'
fix_commit_message: 'landlock: Handle weird files


  A corrupted filesystem (e.g. bcachefs) might return weird files.

  Instead of throwing a warning and allowing access to such file, treat

  them as regular files.


  Cc: Dave Chinner <david@fromorbit.com>

  Cc: Kent Overstreet <kent.overstreet@linux.dev>

  Cc: Paul Moore <paul@paul-moore.com>

  Reported-by: syzbot+34b68f850391452207df@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/r/000000000000a65b35061cffca61@google.com

  Reported-by: syzbot+360866a59e3c80510a62@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/r/67379b3f.050a0220.85a0.0001.GAE@google.com

  Reported-by: Ubisectech Sirius <bugreport@ubisectech.com>

  Closes: https://lore.kernel.org/r/c426821d-8380-46c4-a494-7008bbd7dd13.bugreport@ubisectech.com

  Fixes: cb2c7d1a1776 ("landlock: Support filesystem access-control")

  Reviewed-by: Günther Noack <gnoack3000@gmail.com>

  Link: https://lore.kernel.org/r/20250110153918.241810-1-mic@digikod.net

  Signed-off-by: Mickaël Salaün <mic@digikod.net>

  '
submodule:
- security/landlock
hunk_count: 2
covered_count: 2
