id: c87d2efb740931ec76c7
bug_link: https://syzkaller.appspot.com/bug?extid=c87d2efb740931ec76c7
title: memory leak in kvm_dev_ioctl
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7234c362ccb3c2228f06f19f93b132de9cfa7ae4
fix_commit: 004d62eb4e57db3c391ed0df007cc11c93b6fbeb
datetime: '2021-07-15T10:19:40-04:00'
fix_commit_message: 'kvm: debugfs: fix memory leak in kvm_create_vm_debugfs


  In commit bc9e9e672df9 ("KVM: debugfs: Reuse binary stats descriptors")

  loop for filling debugfs_stat_data was copy-pasted 2 times, but

  in the second loop pointers are saved over pointers allocated

  in the first loop.  All this causes is a memory leak, fix it.


  Fixes: bc9e9e672df9 ("KVM: debugfs: Reuse binary stats descriptors")

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Reviewed-by: Jing Zhang <jingzhangos@google.com>

  Message-Id: <20210701195500.27097-1-paskripkin@gmail.com>

  Reviewed-by: Jing Zhang <jingzhangos@google.com>

  Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

  '
submodule:
- virt/kvm
hunk_count: 1
covered_count: 1
