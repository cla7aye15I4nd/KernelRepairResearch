id: 6479585dfd4dedd3f7e1
bug_link: https://syzkaller.appspot.com/bug?extid=6479585dfd4dedd3f7e1
title: possible deadlock in blkdev_put (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a0e286b6a5b61d4da01bdf865071c4da417046d6
fix_commit: d292dc80686aeafc418d809b4f9598578a7f294f
datetime: '2022-04-18T06:54:10-06:00'
fix_commit_message: 'loop: don''t destroy lo->workqueue in __loop_clr_fd


  There is no need to destroy the workqueue when clearing unbinding

  a loop device from a backing file.  Not doing so on the other hand

  avoid creating a complex lock dependency chain involving the global

  system_transition_mutex.


  Based on a patch from Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>.


  Reported-by: syzbot+6479585dfd4dedd3f7e1@syzkaller.appspotmail.com

  Signed-off-by: Christoph Hellwig <hch@lst.de>

  Reviewed-by: Jan Kara <jack@suse.cz>

  Tested-by: syzbot+6479585dfd4dedd3f7e1@syzkaller.appspotmail.com

  Link: https://lore.kernel.org/r/20220330052917.2566582-16-hch@lst.de

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- drivers/block
hunk_count: 5
covered_count: 2
