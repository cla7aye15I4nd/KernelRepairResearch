id: 620cf21140fc7e772a5d
bug_link: https://syzkaller.appspot.com/bug?extid=620cf21140fc7e772a5d
title: 'KMSAN: kernel-infoleak in compat_drm_wait_vblank'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 64e194e278673bceb68fb2dde7dbc3d812bfceb3
fix_commit: de066e116306baf3a6a62691ac63cfc0b1dabddb
datetime: '2021-03-11T11:11:33+01:00'
fix_commit_message: 'drm/compat: Clear bounce structures


  Some of them have gaps, or fields we don''t clear. Native ioctl code

  does full copies plus zero-extends on size mismatch, so nothing can

  leak. But compat is more hand-rolled so need to be careful.


  None of these matter for performance, so just memset.


  Also I didn''t fix up the CONFIG_DRM_LEGACY or CONFIG_DRM_AGP ioctl, those

  are security holes anyway.


  Acked-by: Maxime Ripard <mripard@kernel.org>

  Reported-by: syzbot+620cf21140fc7e772a5d@syzkaller.appspotmail.com # vblank ioctl

  Cc: syzbot+620cf21140fc7e772a5d@syzkaller.appspotmail.com

  Cc: stable@vger.kernel.org

  Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>

  Link: https://patchwork.freedesktop.org/patch/msgid/20210222100643.400935-1-daniel.vetter@ffwll.ch

  (cherry picked from commit e926c474ebee404441c838d18224cd6f246a71b7)

  Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>

  '
submodule:
- drivers/gpu/drm
hunk_count: 5
covered_count: 4
