id: e1c69cadec0f1a078e3d
bug_link: https://syzkaller.appspot.com/bug?extid=e1c69cadec0f1a078e3d
title: memory leak in corrupted (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6630ea49103c3d45461e29b0f6eb0ce750aeb8f5
fix_commit: c290fe508eee36df1640c3cb35dc8f89e073c8a8
datetime: '2024-09-23T21:38:13+09:00'
fix_commit_message: 'exfat: resolve memory leak from exfat_create_upcase_table()


  If exfat_load_upcase_table reaches end and returns -EINVAL,

  allocated memory doesn''t get freed and while

  exfat_load_default_upcase_table allocates more memory, leading to a

  memory leak.


  Here''s link to syzkaller crash report illustrating this issue:

  https://syzkaller.appspot.com/text?tag=CrashReport&x=1406c201980000


  Reported-by: syzbot+e1c69cadec0f1a078e3d@syzkaller.appspotmail.com

  Fixes: a13d1a4de3b0 ("exfat: move freeing sbi, upcase table and dropping nls into
  rcu-delayed helper")

  Cc: stable@vger.kernel.org

  Signed-off-by: Daniel Yang <danielyangkang@gmail.com>

  Signed-off-by: Namjae Jeon <linkinjeon@kernel.org>

  '
submodule:
- fs/exfat
hunk_count: 1
covered_count: 0
