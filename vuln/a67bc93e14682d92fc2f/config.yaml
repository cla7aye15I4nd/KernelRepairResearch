id: a67bc93e14682d92fc2f
bug_link: https://syzkaller.appspot.com/bug?extid=a67bc93e14682d92fc2f
title: general protection fault in ucma_set_ib_path (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ca486a3b338ea0858104bab80d86475de3575966
fix_commit: 8435168d50e66fa5eae01852769d20a36f9e5e83
datetime: '2018-04-03T21:06:14-06:00'
fix_commit_message: 'RDMA/ucma: Don''t allow setting RDMA_OPTION_IB_PATH without an
  RDMA device


  Check to make sure that ctx->cm_id->device is set before we use it.

  Otherwise userspace can trigger a NULL dereference by doing

  RDMA_USER_CM_CMD_SET_OPTION on an ID that is not bound to a device.


  Cc: <stable@vger.kernel.org>

  Reported-by: <syzbot+a67bc93e14682d92fc2f@syzkaller.appspotmail.com>

  Signed-off-by: Roland Dreier <roland@purestorage.com>

  Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>

  '
submodule:
- drivers/infiniband/core
hunk_count: 1
covered_count: 1
