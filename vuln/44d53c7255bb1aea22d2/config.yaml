id: 44d53c7255bb1aea22d2
bug_link: https://syzkaller.appspot.com/bug?extid=44d53c7255bb1aea22d2
title: WARNING in hso_free_net_device
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1050713026a08d605b61f039700b67aab646371f
fix_commit: 788e67f18d797abbd48a96143511261f4f3b4f21
datetime: '2021-07-21T08:59:56-07:00'
fix_commit_message: 'usb: hso: fix error handling code of hso_create_net_device


  The current error handling code of hso_create_net_device is

  hso_free_net_device, no matter which errors lead to. For example,

  WARNING in hso_free_net_device [1].


  Fix this by refactoring the error handling code of

  hso_create_net_device by handling different errors by different code.


  [1] https://syzkaller.appspot.com/bug?id=66eff8d49af1b28370ad342787413e35bbe76efe


  Reported-by: syzbot+44d53c7255bb1aea22d2@syzkaller.appspotmail.com

  Fixes: 5fcfb6d0bfcd ("hso: fix bailout in error case of probe")

  Signed-off-by: Dongliang Mu <mudongliangabcd@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/net/usb
hunk_count: 5
covered_count: 4
