id: 61be3359d2ee3467e7e4
bug_link: https://syzkaller.appspot.com/bug?extid=61be3359d2ee3467e7e4
title: 'UBSAN: shift-out-of-bounds in dbDiscardAG'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f73f969b2eb39ad8056f6c7f3a295fa2f85e313a
fix_commit: 7063b80268e2593e58bee8a8d709c2f3ff93e2f2
datetime: '2024-06-26T12:57:32-05:00'
fix_commit_message: 'jfs: Fix shift-out-of-bounds in dbDiscardAG


  When searching for the next smaller log2 block, BLKSTOL2() returned 0,

  causing shift exponent -1 to be negative.


  This patch fixes the issue by exiting the loop directly when negative

  shift is found.


  Reported-by: syzbot+61be3359d2ee3467e7e4@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=61be3359d2ee3467e7e4

  Signed-off-by: Pei Li <peili.dev@gmail.com>

  Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>

  '
submodule:
- fs/jfs
hunk_count: 1
covered_count: 1
