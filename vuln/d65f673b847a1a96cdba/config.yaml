id: d65f673b847a1a96cdba
bug_link: https://syzkaller.appspot.com/bug?extid=d65f673b847a1a96cdba
title: 'KASAN: slab-out-of-bounds Read in ds_probe'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ef61eb43ada6c1d6b94668f0f514e4c268093ff3
fix_commit: c114944d7d67f24e71562fcfc18d550ab787e4d4
datetime: '2019-04-25T11:11:41+02:00'
fix_commit_message: 'USB: w1 ds2490: Fix bug caused by improper use of altsetting
  array


  The syzkaller USB fuzzer spotted a slab-out-of-bounds bug in the

  ds2490 driver.  This bug is caused by improper use of the altsetting

  array in the usb_interface structure (the array''s entries are not

  always stored in numerical order), combined with a naive assumption

  that all interfaces probed by the driver will have the expected number

  of altsettings.


  The bug can be fixed by replacing references to the possibly

  non-existent intf->altsetting[alt] entry with the guaranteed-to-exist

  intf->cur_altsetting entry.


  Signed-off-by: Alan Stern <stern@rowland.harvard.edu>

  Reported-and-tested-by: syzbot+d65f673b847a1a96cdba@syzkaller.appspotmail.com

  CC: <stable@vger.kernel.org>

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/w1/masters
hunk_count: 1
covered_count: 1
