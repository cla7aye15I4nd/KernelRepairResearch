id: eb8104072aeab6cc1195
bug_link: https://syzkaller.appspot.com/bug?extid=eb8104072aeab6cc1195
title: 'linux-next boot error: general protection fault in blk_mq_free_request'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4f5022453acd0f7b28012e20b7d048470f129894
fix_commit: e0d78afeb8d190164a823d5ef5821b0b3802af33
datetime: '2021-10-19T05:48:15-06:00'
fix_commit_message: 'block: fix too broad elevator check in blk_mq_free_request()


  We added RQF_ELV to tell whether there''s an IO scheduler attached, and

  RQF_ELVPRIV tells us whether there''s an IO scheduler with private data

  attached. Don''t check RQF_ELV in blk_mq_free_request(), what we care

  about here is just if we have scheduler private data attached.


  This fixes a boot crash


  Fixes: 2ff0682da6e0 ("block: store elevator state in request")

  Reported-by: Yi Zhang <yi.zhang@redhat.com>

  Reported-by: syzbot+eb8104072aeab6cc1195@syzkaller.appspotmail.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- block
hunk_count: 1
covered_count: 1
