id: f45957555ed4a808cc7a
bug_link: https://syzkaller.appspot.com/bug?extid=f45957555ed4a808cc7a
title: 'BUG: unable to handle kernel NULL pointer dereference in ni_write_inode'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4f082a7531223a438c757bb20e304f4c941c67a8
fix_commit: 8dae4f6341e335a09575be60b4fdf697c732a470
datetime: '2023-03-27T16:59:11+04:00'
fix_commit_message: 'fs/ntfs3: Fix NULL dereference in ni_write_inode


  Syzbot reports a NULL dereference in ni_write_inode.

  When creating a new inode, if allocation fails in mi_init function

  (called in mi_format_new function), mi->mrec is set to NULL.

  In the error path of this inode creation, mi->mrec is later

  dereferenced in ni_write_inode.


  Add a NULL check to prevent NULL dereference.


  Link: https://syzkaller.appspot.com/bug?extid=f45957555ed4a808cc7a

  Reported-and-tested-by: syzbot+f45957555ed4a808cc7a@syzkaller.appspotmail.com

  Signed-off-by: Abdun Nihaal <abdun.nihaal@gmail.com>

  Signed-off-by: Konstantin Komarov <almaz.alexandrovich@paragon-software.com>

  '
submodule:
- fs/ntfs3
hunk_count: 1
covered_count: 1
