id: 0af00f6a2cba2058b5db
bug_link: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
title: 'VFS: Busy inodes after unmount (use-after-free)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 985ebec4ab0a28bb5910c3b1481a40fbf7f9e61d
fix_commit: 965b5dd1894f4525f38c1b5f99b0106a07dbb5db
datetime: '2024-12-05T19:54:43-08:00'
fix_commit_message: 'ocfs2: free inode when ocfs2_get_init_inode() fails


  syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826

  ("ocfs2: Handle error from dquot_initialize()") forgot to call iput() when

  new_inode() succeeded and dquot_initialize() failed.


  Link: https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp

  Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot_initialize()")

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db

  Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com

  Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>

  Cc: Mark Fasheh <mark@fasheh.com>

  Cc: Joel Becker <jlbec@evilplan.org>

  Cc: Junxiao Bi <junxiao.bi@oracle.com>

  Cc: Changwei Ge <gechangwei@live.cn>

  Cc: Jun Piao <piaojun@huawei.com>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  '
submodule:
- fs/ocfs2
hunk_count: 1
covered_count: 0
