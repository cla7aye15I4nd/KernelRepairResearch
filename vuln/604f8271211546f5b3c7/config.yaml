id: 604f8271211546f5b3c7
bug_link: https://syzkaller.appspot.com/bug?extid=604f8271211546f5b3c7
title: net-next boot error
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6293e4d674d0f6cb01cd19307dd477988776c521
fix_commit: ca9e83b4a55bfa1cc1395b48c3bf70381833526b
datetime: '2018-07-31T10:02:01-07:00'
fix_commit_message: "virtio-net: correctly update XDP_TX counters\n\nCommit 5b8f3c8d30a6\
  \ (\"virtio_net: Add XDP related stats\") tries to\ncount TX XDP stats in virtnet_receive().\
  \ This will cause several\nissues:\n\n- virtnet_xdp_sq() was called without checking\
  \ whether or not XDP is\n  set. This may cause out of bound access when there's\
  \ no enough txq\n  for XDP.\n- Stats were updated even if there's no XDP/XDP_TX.\n\
  \nFixing this by reusing virtnet_xdp_xmit() for XDP_TX which can counts\nTX XDP\
  \ counter itself and remove the unnecessary tx stats embedded in\nrx stats.\n\n\
  Reported-by: syzbot+604f8271211546f5b3c7@syzkaller.appspotmail.com\nFixes: 5b8f3c8d30a6\
  \ (\"virtio_net: Add XDP related stats\")\nCc: Toshiaki Makita <makita.toshiaki@lab.ntt.co.jp>\n\
  Signed-off-by: Jason Wang <jasowang@redhat.com>\nAcked-by: Michael S. Tsirkin <mst@redhat.com>\n\
  Signed-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- drivers/net
hunk_count: 6
covered_count: 3
