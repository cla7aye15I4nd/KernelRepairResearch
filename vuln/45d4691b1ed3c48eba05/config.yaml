id: 45d4691b1ed3c48eba05
bug_link: https://syzkaller.appspot.com/bug?extid=45d4691b1ed3c48eba05
title: 'UBSAN: array-index-out-of-bounds in __gfs2_iomap_get'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 14a585177c0f5870c82b32000d79aca1baa94bfc
fix_commit: cfcdb5bad34f600aed7613c3c1a5e618111f77b7
datetime: '2023-03-28T00:57:47+02:00'
fix_commit_message: 'gfs2: Fix inode height consistency check


  The maximum allowed height of an inode''s metadata tree depends on the

  filesystem block size; it is lower for bigger-block filesystems.  When

  reading in an inode, make sure that the height doesn''t exceed the

  maximum allowed height.


  Arrays like sd_heightsize are sized to be big enough for any filesystem

  block size; they will often be slightly bigger than what''s needed for a

  specific filesystem.


  Reported-by: syzbot+45d4691b1ed3c48eba05@syzkaller.appspotmail.com

  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>

  '
submodule:
- fs/gfs2
hunk_count: 2
covered_count: 0
