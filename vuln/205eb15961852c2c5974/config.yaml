id: 205eb15961852c2c5974
bug_link: https://syzkaller.appspot.com/bug?extid=205eb15961852c2c5974
title: 'KASAN: null-ptr-deref Write in snd_pcm_format_set_silence'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: fee2ec8cceb33b8886bc5894fb07e0b2e34148af
fix_commit: 2f7a26abb8241a0208c68d22815aa247c5ddacab
datetime: '2022-04-11T09:27:56+02:00'
fix_commit_message: 'ALSA: pcm: Test for "silence" field in struct "pcm_format_data"


  Syzbot reports "KASAN: null-ptr-deref Write in

  snd_pcm_format_set_silence".[1]


  It is due to missing validation of the "silence" field of struct

  "pcm_format_data" in "pcm_formats" array.


  Add a test for valid "pat" and, if it is not so, return -EINVAL.


  [1] https://lore.kernel.org/lkml/000000000000d188ef05dc2c7279@google.com/


  Reported-and-tested-by: syzbot+205eb15961852c2c5974@syzkaller.appspotmail.com

  Signed-off-by: Fabio M. De Francesco <fmdefrancesco@gmail.com>

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20220409012655.9399-1-fmdefrancesco@gmail.com

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core
hunk_count: 1
covered_count: 1
