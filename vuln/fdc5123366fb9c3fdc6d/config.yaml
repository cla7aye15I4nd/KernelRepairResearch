id: fdc5123366fb9c3fdc6d
bug_link: https://syzkaller.appspot.com/bug?extid=fdc5123366fb9c3fdc6d
title: WARNING in __rate_control_send_low
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7c1c73bf84c50b641449f9811e2196cdc3ca4a1b
fix_commit: ab9177d83c040eba58387914077ebca56f14fae6
datetime: '2024-04-08T20:11:34+02:00'
fix_commit_message: 'wifi: mac80211: don''t use rate mask for scanning


  The rate mask is intended for use during operation, and

  can be set to only have masks for the currently active

  band. As such, it cannot be used for scanning which can

  be on other bands as well.


  Simply ignore the rate masks during scanning to avoid

  warnings from incorrect settings.


  Reported-by: syzbot+fdc5123366fb9c3fdc6d@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=fdc5123366fb9c3fdc6d

  Co-developed-by: Dmitry Antipov <dmantipov@yandex.ru>

  Signed-off-by: Dmitry Antipov <dmantipov@yandex.ru>

  Tested-by: Dmitry Antipov <dmantipov@yandex.ru>

  Link: https://msgid.link/20240326220854.9594cbb418ca.I7f86c0ba1f98cf7e27c2bacf6c2d417200ecea5c@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- include/net
- net/mac80211
hunk_count: 6
covered_count: 4
