id: 3abd99031b42acf367ef
bug_link: https://syzkaller.appspot.com/bug?extid=3abd99031b42acf367ef
title: WARNING in ovl_copy_up_file
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1b17f399a6e07405059fe401cfbe59f9b572093d
fix_commit: 77a28aa476873048024ad56daf8f4f17d58ee48e
datetime: '2024-03-17T15:59:41+02:00'
fix_commit_message: 'ovl: relax WARN_ON in ovl_verify_area()


  syzbot hit an assertion in copy up data loop which looks like it is

  the result of a lower file whose size is being changed underneath

  overlayfs.


  This type of use case is documented to cause undefined behavior, so

  returning EIO error for the copy up makes sense, but it should not be

  causing a WARN_ON assertion.


  Reported-and-tested-by: syzbot+3abd99031b42acf367ef@syzkaller.appspotmail.com

  Fixes: ca7ab482401c ("ovl: add permission hooks outside of do_splice_direct()")

  Signed-off-by: Amir Goldstein <amir73il@gmail.com>

  '
submodule:
- fs/overlayfs
hunk_count: 1
covered_count: 1
