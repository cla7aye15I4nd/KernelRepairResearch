id: 8836466a79f4175961b0
bug_link: https://syzkaller.appspot.com/bug?extid=8836466a79f4175961b0
title: general protection fault in set_task_ioprio
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 518579a9af10a4b7b952a8366566fdcc7cfce3ca
fix_commit: a957b61254a7d59a6c14ee2ac2db20a62eb299a1
datetime: '2021-12-20T20:32:24-07:00'
fix_commit_message: 'block: fix error in handling dead task for ioprio setting


  Don''t combine the task exiting and "already have io_context" case, we

  need to just abort if the task is marked as dead. Return -ESRCH, which

  is the documented value for ioprio_set() if the specified task could not

  be found.


  Reported-by: Dan Carpenter <dan.carpenter@oracle.com>

  Reported-by: syzbot+8836466a79f4175961b0@syzkaller.appspotmail.com

  Fixes: 5fc11eebb4a9 ("block: open code create_task_io_context in set_task_ioprio")

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- block
hunk_count: 2
covered_count: 2
