id: 20eb18b1ffc36152b5608d41ab3bf6bd18c23aa7
bug_link: https://syzkaller.appspot.com/bug?extid=20eb18b1ffc36152b5608d41ab3bf6bd18c23aa7
title: 'KASAN: use-after-free Read in perf_trace_lock_acquire (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e8368d9ebb9413ee9c24c91f0a48d39c764c242c
fix_commit: 4cd879515d686849eec5f718aeac62a70b067d82
datetime: '2018-01-29T12:26:20-05:00'
fix_commit_message: 'vhost_net: stop device during reset owner


  We don''t stop device before reset owner, this means we could try to

  serve any virtqueue kick before reset dev->worker. This will result a

  warn since the work was pending at llist during owner resetting. Fix

  this by stopping device during owner reset.


  Reported-by: syzbot+eb17c6162478cc50632c@syzkaller.appspotmail.com

  Fixes: 3a4d5c94e9593 ("vhost_net: a kernel-level virtio server")

  Signed-off-by: Jason Wang <jasowang@redhat.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/vhost
hunk_count: 1
covered_count: 0
