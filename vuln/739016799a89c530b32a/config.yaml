id: 739016799a89c530b32a
bug_link: https://syzkaller.appspot.com/bug?extid=739016799a89c530b32a
title: memory leak in radix_tree_insert
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6855e8213e06efcaf7c02a15e12b1ae64b9a7149
fix_commit: 8a03dd925786bdc3834d56ccc980bb70668efa35
datetime: '2021-03-30T13:48:29-07:00'
fix_commit_message: 'net: qrtr: Fix memory leak on qrtr_tx_wait failure


  qrtr_tx_wait does not check for radix_tree_insert failure, causing

  the ''flow'' object to be unreferenced after qrtr_tx_wait return. Fix

  that by releasing flow on radix_tree_insert failure.


  Fixes: 5fdeb0d372ab ("net: qrtr: Implement outgoing flow control")

  Reported-by: syzbot+739016799a89c530b32a@syzkaller.appspotmail.com

  Signed-off-by: Loic Poulain <loic.poulain@linaro.org>

  Reviewed-by: Bjorn Andersson <bjorn.andersson@linaro.org>

  Reviewed-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/qrtr
hunk_count: 1
covered_count: 1
