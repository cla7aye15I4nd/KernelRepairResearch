id: d1e69c888f0d3866ead4
bug_link: https://syzkaller.appspot.com/bug?extid=d1e69c888f0d3866ead4
title: memory leak in usb_set_configuration (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 27ba44270b5ea3d6ec71e148051becffb51d2324
fix_commit: be8656e62e9e791837b606a027802b504a945c97
datetime: '2021-05-19T09:51:39+02:00'
fix_commit_message: 'media: cpia2: fix memory leak in cpia2_usb_probe


  syzbot reported leak in cpia2 usb driver. The problem was

  in invalid error handling.


  v4l2_device_register() is called in cpia2_init_camera_struct(), but

  all error cases after cpia2_init_camera_struct() did not call the

  v4l2_device_unregister()


  Reported-by: syzbot+d1e69c888f0d3866ead4@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>

  '
submodule:
- drivers/media/usb/cpia2
hunk_count: 4
covered_count: 0
