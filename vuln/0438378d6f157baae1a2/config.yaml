id: 0438378d6f157baae1a2
bug_link: https://syzkaller.appspot.com/bug?extid=0438378d6f157baae1a2
title: WARNING in kcov_remote_start (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9adcac6506185dd1a727f1784b89f30cd217ef7e
fix_commit: 19e35f24750ddf860c51e51c68cf07ea181b4881
datetime: '2024-05-07T16:40:06-07:00'
fix_commit_message: 'nfc: nci: Fix kcov check in nci_rx_work()


  Commit 7e8cdc97148c ("nfc: Add KCOV annotations") added

  kcov_remote_start_common()/kcov_remote_stop() pair into nci_rx_work(),

  with an assumption that kcov_remote_stop() is called upon continue of

  the for loop. But commit d24b03535e5e ("nfc: nci: Fix uninit-value in

  nci_dev_up and nci_ntf_packet") forgot to call kcov_remote_stop() before

  break of the for loop.


  Reported-by: syzbot <syzbot+0438378d6f157baae1a2@syzkaller.appspotmail.com>

  Closes: https://syzkaller.appspot.com/bug?extid=0438378d6f157baae1a2

  Fixes: d24b03535e5e ("nfc: nci: Fix uninit-value in nci_dev_up and nci_ntf_packet")

  Suggested-by: Andrey Konovalov <andreyknvl@gmail.com>

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Reviewed-by: Krzysztof Kozlowski <krzysztof.kozlowski@linaro.org>

  Link: https://lore.kernel.org/r/6d10f829-5a0c-405a-b39a-d7266f3a1a0b@I-love.SAKURA.ne.jp

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/nfc
hunk_count: 1
covered_count: 0
