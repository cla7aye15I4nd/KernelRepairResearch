id: 4207b2e0c72d65cc775d
bug_link: https://syzkaller.appspot.com/bug?extid=4207b2e0c72d65cc775d
title: 'KASAN: slab-out-of-bounds Read in sock_hash_ctx_update_elem'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 96c26e04581667e3cd17ed74c2fc3499afea49b8
fix_commit: b845c898b2f1ea458d5453f0fa1da6e2dfce3bb4
datetime: '2018-08-22T20:34:51+02:00'
fix_commit_message: 'bpf, sockmap: fix sock_hash_alloc and reject zero-sized keys


  Currently, it is possible to create a sock hash map with key size

  of 0 and have the kernel return a fd back to user space. This is

  invalid for hash maps (and kernel also hasn''t been tested for zero

  key size support in general at this point). Thus, reject such

  configuration.


  Fixes: 81110384441a ("bpf: sockmap, add hash map support")

  Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>

  Acked-by: John Fastabend <john.fastabend@gmail.com>

  Acked-by: Song Liu <songliubraving@fb.com>

  '
submodule:
- kernel/bpf
hunk_count: 1
covered_count: 0
