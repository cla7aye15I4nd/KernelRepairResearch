id: 1071ad60cd7df39fdadb
bug_link: https://syzkaller.appspot.com/bug?extid=1071ad60cd7df39fdadb
title: WARNING in tcindex_alloc_perfect_hash
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: fade56410c22cacafb1be9f911a0afd3701d8366
fix_commit: 3f2db250099f46988088800052cdf2332c7aba61
datetime: '2021-06-28T13:03:29-07:00'
fix_commit_message: 'net: sched: fix warning in tcindex_alloc_perfect_hash


  Syzbot reported warning in tcindex_alloc_perfect_hash. The problem

  was in too big cp->hash, which triggers warning in kmalloc. Since

  cp->hash comes from userspace, there is no need to warn if value

  is not correct


  Fixes: b9a24bb76bf6 ("net_sched: properly handle failure case of tcf_exts_init()")

  Reported-and-tested-by: syzbot+1071ad60cd7df39fdadb@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Acked-by: Cong Wang <cong.wang@bytedance.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sched
hunk_count: 1
covered_count: 1
