id: ef99b30646419e80cae3
bug_link: https://syzkaller.appspot.com/bug?extid=ef99b30646419e80cae3
title: 'BUG: unable to handle kernel paging request in vmx_vcpu_run'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5f9077cbae1de0e46386656cacdda4c472378640
fix_commit: 0447378a4a793da008451fad50bc0f93e9675ae6
datetime: '2018-06-22T16:46:26+02:00'
fix_commit_message: "kvm: vmx: Nested VM-entry prereqs for event inj.\n\nThis patch\
  \ extends the checks done prior to a nested VM entry.\nSpecifically, it extends\
  \ the check_vmentry_prereqs function with checks\nfor fields relevant to the VM-entry\
  \ event injection information, as\ndescribed in the Intel SDM, volume 3.\n\nThis\
  \ patch is motivated by a syzkaller bug, where a bad VM-entry\ninterruption information\
  \ field is generated in the VMCS02, which causes\nthe nested VM launch to fail.\
  \ Then, KVM fails to resume L1.\n\nWhile KVM should be improved to correctly resume\
  \ L1 execution after a\nfailed nested launch, this change is justified because the\
  \ existing code\nto resume L1 is flaky/ad-hoc and the test coverage for resuming\
  \ L1 is\nsparse.\n\nReported-by: syzbot <syzkaller@googlegroups.com>\nSigned-off-by:\
  \ Marc Orr <marcorr@google.com>\n[Removed comment whose parts were describing previous\
  \ revisions and the\n rest was obvious from function/variable naming. - Radim]\n\
  Signed-off-by: Radim Krčmář <rkrcmar@redhat.com>\n"
submodule:
- arch/x86/include/asm
- arch/x86/kvm
hunk_count: 5
covered_count: 0
