id: 6af973a3b8dfd2faefdc
bug_link: https://syzkaller.appspot.com/bug?extid=6af973a3b8dfd2faefdc
title: 'BUG: unable to handle kernel NULL pointer dereference in lo_rw_aio'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6d732e8d1e6ddc27bbdebbee48fa5825203fb4a9
fix_commit: f5c84eff634ba003326aa034c414e2a9dcb7c6a7
datetime: '2025-05-05T07:18:05-06:00'
fix_commit_message: 'loop: Add sanity check for read/write_iter


  Some file systems do not support read_iter/write_iter, such as selinuxfs

  in this issue.

  So before calling them, first confirm that the interface is supported and

  then call it.


  It is releavant in that vfs_iter_read/write have the check, and removal

  of their used caused szybot to be able to hit this issue.


  Fixes: f2fed441c69b ("loop: stop using vfs_iter__{read,write} for buffered I/O")

  Reported-by: syzbot+6af973a3b8dfd2faefdc@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=6af973a3b8dfd2faefdc

  Signed-off-by: Lizhi Xu <lizhi.xu@windriver.com>

  Reviewed-by: Christoph Hellwig <hch@lst.de>

  Link: https://lore.kernel.org/r/20250428143626.3318717-1-lizhi.xu@windriver.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- drivers/block
hunk_count: 3
covered_count: 0
