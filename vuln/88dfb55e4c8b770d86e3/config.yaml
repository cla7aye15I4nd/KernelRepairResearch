id: 88dfb55e4c8b770d86e3
bug_link: https://syzkaller.appspot.com/bug?extid=88dfb55e4c8b770d86e3
title: WARNING in strp_done
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0e47079b6cd7d26e2dab95398927b1184a9a733c
fix_commit: dff8baa261174de689a44572d0ea182d7aa70598
datetime: '2018-02-14T15:38:39-05:00'
fix_commit_message: 'kcm: Call strp_stop before strp_done in kcm_attach


  In kcm_attach strp_done is called when sk_user_data is already

  set to fail the attach. strp_done needs the strp to be stopped and

  warns if it isn''t. Call strp_stop in this case to eliminate the

  warning message.


  Reported-by: syzbot+88dfb55e4c8b770d86e3@syzkaller.appspotmail.com

  Fixes: e5571240236c5652f ("kcm: Check if sk_user_data already set in kcm_attach"

  Signed-off-by: Tom Herbert <tom@quantonium.net>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/kcm
hunk_count: 1
covered_count: 1
