id: 14b0e8f3fd1612e35350
bug_link: https://syzkaller.appspot.com/bug?extid=14b0e8f3fd1612e35350
title: 'KASAN: vmalloc-out-of-bounds Write in imageblit (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b5a5b9d5f28d23b84f06b45c61dcad95b07d41bc
fix_commit: 566f9c9f89337792070b5a6062dff448b3e7977f
datetime: '2022-08-30T14:30:52+02:00'
fix_commit_message: 'vt: Clear selection before changing the font


  When changing the console font with ioctl(KDFONTOP) the new font size

  can be bigger than the previous font. A previous selection may thus now

  be outside of the new screen size and thus trigger out-of-bounds

  accesses to graphics memory if the selection is removed in

  vc_do_resize().


  Prevent such out-of-memory accesses by dropping the selection before the

  various con_font_set() console handlers are called.


  Reported-by: syzbot+14b0e8f3fd1612e35350@syzkaller.appspotmail.com

  Cc: stable <stable@kernel.org>

  Tested-by: Khalid Masum <khalid.masum.92@gmail.com>

  Signed-off-by: Helge Deller <deller@gmx.de>

  Link: https://lore.kernel.org/r/YuV9apZGNmGfjcor@p100

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/tty/vt
hunk_count: 2
covered_count: 2
