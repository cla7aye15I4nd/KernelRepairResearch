id: 47fa9c9c648b765305b9
bug_link: https://syzkaller.appspot.com/bug?extid=47fa9c9c648b765305b9
title: 'KMSAN: kernel-infoleak in fb_cmap_to_user'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2954a6f12f250890ec2433cec03ba92784d613e8
fix_commit: 19ab233989d0f7ab1de19a036e247afa4a0a1e9c
datetime: '2021-04-10T11:12:08+02:00'
fix_commit_message: 'fbdev: zero-fill colormap in fbcmap.c


  Use kzalloc() rather than kmalloc() for the dynamically allocated parts

  of the colormap in fb_alloc_cmap_gfp, to prevent a leak of random kernel

  data to userspace under certain circumstances.


  Fixes a KMSAN-found infoleak bug reported by syzbot at:

  https://syzkaller.appspot.com/bug?id=741578659feabd108ad9e06696f0c1f2e69c4b6e


  Reported-by: syzbot+47fa9c9c648b765305b9@syzkaller.appspotmail.com

  Cc: stable <stable@vger.kernel.org>

  Reviewed-by: Geert Uytterhoeven <geert+renesas@glider.be>

  Signed-off-by: Phillip Potter <phil@philpotter.co.uk>

  Link: https://lore.kernel.org/r/20210331220719.1499743-1-phil@philpotter.co.uk

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/video/fbdev/core
hunk_count: 1
covered_count: 1
