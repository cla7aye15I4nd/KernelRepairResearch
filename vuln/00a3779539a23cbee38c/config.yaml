id: 00a3779539a23cbee38c
bug_link: https://syzkaller.appspot.com/bug?extid=00a3779539a23cbee38c
title: 'KMSAN: uninit-value in reiserfs_security_init'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a495108ea99c64ce6b5727cb163162ba28e27bff
fix_commit: d031f4e8b493df299123fbb4ec13db870584ed28
datetime: '2023-05-25T17:44:44-04:00'
fix_commit_message: 'reiserfs: Initialize sec->length in reiserfs_security_init().


  syzbot is reporting that sec->length is not initialized.


  Since security_inode_init_security() returns 0 when initxattrs is provided

  but call_int_hook(inode_init_security) returned -EOPNOTSUPP, control will

  reach to "if (sec->length && ...) {" without initializing sec->length.


  Reported-by: syzbot <syzbot+00a3779539a23cbee38c@syzkaller.appspotmail.com>

  Closes: https://syzkaller.appspot.com/bug?extid=00a3779539a23cbee38c

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Fixes: 52ca4b6435a4 ("reiserfs: Switch to security_inode_init_security()")

  Signed-off-by: Paul Moore <paul@paul-moore.com>

  '
submodule:
- fs/reiserfs
hunk_count: 1
covered_count: 1
