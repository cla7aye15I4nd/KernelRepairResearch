id: a07d0142e74fdd595cfb
bug_link: https://syzkaller.appspot.com/bug?extid=a07d0142e74fdd595cfb
title: 'BUG: sleeping function called from invalid context in line6_pcm_acquire'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 534420c6ff87d3052540f1fd346e0adcff440819
fix_commit: 7f84ff68be05ec7a5d2acf8fdc734fe5897af48f
datetime: '2019-05-08T15:31:24+02:00'
fix_commit_message: 'ALSA: line6: toneport: Fix broken usage of timer for delayed
  execution


  The line6 toneport driver has code for some delayed initialization,

  and this hits the kernel Oops because mutex and other sleepable

  functions are used in the timer callback.  Fix the abuse by a delayed

  work instead so that everything works gracefully.


  Reported-by: syzbot+a07d0142e74fdd595cfb@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/usb/line6
hunk_count: 5
covered_count: 0
