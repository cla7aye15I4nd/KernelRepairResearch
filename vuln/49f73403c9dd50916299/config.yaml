id: 49f73403c9dd50916299
bug_link: https://syzkaller.appspot.com/bug?extid=49f73403c9dd50916299
title: possible deadlock in bch2_btree_roots_to_journal_entries
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f236ea4bca00ce457e165403a50a8938dced9623
fix_commit: 1841027c7de47527ed819a935b7aa340b9171eb5
datetime: '2024-07-11T20:10:55-04:00'
fix_commit_message: 'bcachefs: bch2_gc_btree() should not use btree_root_lock


  btree_root_lock is for the root keys in btree_root, not the pointers to

  the nodes themselves; this fixes a lock ordering issue between

  btree_root_lock and btree node locks.


  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
