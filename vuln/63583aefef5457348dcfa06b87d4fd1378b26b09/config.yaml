id: 63583aefef5457348dcfa06b87d4fd1378b26b09
bug_link: https://syzkaller.appspot.com/bug?extid=63583aefef5457348dcfa06b87d4fd1378b26b09
title: 'BUG: soft lockup'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f5ce817951f38023588b2b8308beca79abe20507
fix_commit: 9b7d869ee5a77ed4a462372bb89af622e705bfb8
datetime: '2017-11-06T10:41:24+01:00'
fix_commit_message: 'ALSA: timer: Limit max instances per timer


  Currently we allow unlimited number of timer instances, and it may

  bring the system hogging way too much CPU when too many timer

  instances are opened and processed concurrently.  This may end up with

  a soft-lockup report as triggered by syzkaller, especially when

  hrtimer backend is deployed.


  Since such insane number of instances aren''t demanded by the normal

  use case of ALSA sequencer and it merely  opens a risk only for abuse,

  this patch introduces the upper limit for the number of instances per

  timer backend.  As default, it''s set to 1000, but for the fine-grained

  timer like hrtimer, it''s set to 100.


  Reported-by: syzbot

  Tested-by: Jérôme Glisse <jglisse@redhat.com>

  Cc: <stable@vger.kernel.org>

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- include/sound
- sound/core
hunk_count: 15
covered_count: 0
