id: fd15ff734dace9e16437
bug_link: https://syzkaller.appspot.com/bug?extid=fd15ff734dace9e16437
title: general protection fault in percpu_ref_exit
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f4ac712e4fe009635344b9af5d890fe25fcc8c0d
fix_commit: 7ea6bf2e6c409e245a31b9ac6a4ba24949ad442f
datetime: '2020-10-09T12:32:06-06:00'
fix_commit_message: 'percpu_ref: don''t refer to ref->data if it isn''t allocated


  We can''t check ref->data->confirm_switch directly in __percpu_ref_exit(), since

  ref->data may not be allocated in one not-initialized refcount.


  Fixes: 2b0d3d3e4fcf ("percpu_ref: reduce memory footprint of percpu_ref in fast
  path")

  Reported-by: syzbot+fd15ff734dace9e16437@syzkaller.appspotmail.com

  Signed-off-by: Ming Lei <ming.lei@redhat.com>

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- lib
hunk_count: 1
covered_count: 1
