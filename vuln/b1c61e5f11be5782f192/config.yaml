id: b1c61e5f11be5782f192
bug_link: https://syzkaller.appspot.com/bug?extid=b1c61e5f11be5782f192
title: 'KASAN: use-after-free Write in ath9k_htc_rx_msg'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: abeaa85054ff8cfe8b99aafc5c70ea067e5d0908
fix_commit: e4ff08a4d727146bb6717a39a8d399d834654345
datetime: '2020-04-07T07:56:45+03:00'
fix_commit_message: "ath9k: Fix use-after-free Write in ath9k_htc_rx_msg\n\nWrite\
  \ out of slab bounds. We should check epid.\n\nThe case reported by syzbot:\nhttps://lore.kernel.org/linux-usb/0000000000006ac55b05a1c05d72@google.com\n\
  BUG: KASAN: use-after-free in htc_process_conn_rsp\ndrivers/net/wireless/ath/ath9k/htc_hst.c:131\
  \ [inline]\nBUG: KASAN: use-after-free in ath9k_htc_rx_msg+0xa25/0xaf0\ndrivers/net/wireless/ath/ath9k/htc_hst.c:443\n\
  Write of size 2 at addr ffff8881cea291f0 by task swapper/1/0\n\nCall Trace:\n htc_process_conn_rsp\
  \ drivers/net/wireless/ath/ath9k/htc_hst.c:131\n[inline]\nath9k_htc_rx_msg+0xa25/0xaf0\n\
  drivers/net/wireless/ath/ath9k/htc_hst.c:443\nath9k_hif_usb_reg_in_cb+0x1ba/0x630\n\
  drivers/net/wireless/ath/ath9k/hif_usb.c:718\n__usb_hcd_giveback_urb+0x29a/0x550\
  \ drivers/usb/core/hcd.c:1650\nusb_hcd_giveback_urb+0x368/0x420 drivers/usb/core/hcd.c:1716\n\
  dummy_timer+0x1258/0x32ae drivers/usb/gadget/udc/dummy_hcd.c:1966\ncall_timer_fn+0x195/0x6f0\
  \ kernel/time/timer.c:1404\nexpire_timers kernel/time/timer.c:1449 [inline]\n__run_timers\
  \ kernel/time/timer.c:1773 [inline]\n__run_timers kernel/time/timer.c:1740 [inline]\n\
  run_timer_softirq+0x5f9/0x1500 kernel/time/timer.c:1786\n\nReported-and-tested-by:\
  \ syzbot+b1c61e5f11be5782f192@syzkaller.appspotmail.com\nSigned-off-by: Qiujun Huang\
  \ <hqjagain@gmail.com>\nSigned-off-by: Kalle Valo <kvalo@codeaurora.org>\nLink:\
  \ https://lore.kernel.org/r/20200404041838.10426-4-hqjagain@gmail.com\n"
submodule:
- drivers/net/wireless/ath/ath9k
hunk_count: 1
covered_count: 1
