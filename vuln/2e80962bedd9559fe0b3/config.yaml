id: 2e80962bedd9559fe0b3
bug_link: https://syzkaller.appspot.com/bug?extid=2e80962bedd9559fe0b3
title: 'INFO: trying to register non-static key in xa_destroy'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 78f34a16c28654cb47791257006f90d0948f2f0c
fix_commit: 12e5eef0f4d8087ea7b559f6630be08ffea2d851
datetime: '2020-03-04T14:26:23-04:00'
fix_commit_message: 'RDMA/siw: Fix failure handling during device creation


  A failing call to ib_device_set_netdev() during device creation caused

  system crash due to xa_destroy of uninitialized xarray hit by device

  deallocation. Fixed by moving xarray initialization before potential

  device deallocation.


  Fixes: bdcf26bf9b3a ("rdma/siw: network and RDMA core interface")

  Link: https://lore.kernel.org/r/20200302155814.9896-1-bmt@zurich.ibm.com

  Reported-by: syzbot+2e80962bedd9559fe0b3@syzkaller.appspotmail.com

  Signed-off-by: Bernard Metzler <bmt@zurich.ibm.com>

  Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>

  '
submodule:
- drivers/infiniband/sw/siw
hunk_count: 2
covered_count: 2
