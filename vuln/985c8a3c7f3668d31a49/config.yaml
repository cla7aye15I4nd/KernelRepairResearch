id: 985c8a3c7f3668d31a49
bug_link: https://syzkaller.appspot.com/bug?extid=985c8a3c7f3668d31a49
title: possible deadlock in lock_trace (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 454e3126cb842388e22df6b3ac3da44062c00765
fix_commit: 2db9dbf71bf98d02a0bf33e798e5bfd2a9944696
datetime: '2020-03-25T10:04:01-05:00'
fix_commit_message: 'proc: Use new infrastructure to fix deadlocks in execve


  This changes lock_trace to use the new exec_update_mutex

  instead of cred_guard_mutex.


  This fixes possible deadlocks when the trace is accessing

  /proc/$pid/stack for instance.


  This should be safe, as the credentials are only used for reading,

  and task->mm is updated on execve under the new exec_update_mutex.


  Signed-off-by: Bernd Edlinger <bernd.edlinger@hotmail.de>

  Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>

  '
submodule:
- fs/proc
hunk_count: 2
covered_count: 2
