id: f153bde47a62e0b05f83
bug_link: https://syzkaller.appspot.com/bug?extid=f153bde47a62e0b05f83
title: 'KASAN: slab-out-of-bounds Read in linear_transfer (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 643a2cc99b53c13d90c02dc344f780ba9a89e012
fix_commit: 4cc8d6505ab82db3357613d36e6c58a297f57f7c
datetime: '2019-12-04T15:51:30+01:00'
fix_commit_message: 'ALSA: pcm: oss: Avoid potential buffer overflows


  syzkaller reported an invalid access in PCM OSS read, and this seems

  to be an overflow of the internal buffer allocated for a plugin.

  Since the rate plugin adjusts its transfer size dynamically, the

  calculation for the chained plugin might be bigger than the given

  buffer size in some extreme cases, which lead to such an buffer

  overflow as caught by KASAN.


  Fix it by limiting the max transfer size properly by checking against

  the destination size in each plugin transfer callback.


  Reported-by: syzbot+f153bde47a62e0b05f83@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20191204144824.17801-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/oss
hunk_count: 3
covered_count: 1
