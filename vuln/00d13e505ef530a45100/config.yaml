id: 00d13e505ef530a45100
bug_link: https://syzkaller.appspot.com/bug?extid=00d13e505ef530a45100
title: 'BUG: unable to handle kernel paging request in efivarfs_pm_notify'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d6a2d02aa060531607f4a8411ec384470faa2761
fix_commit: cb6ae457bc6af58c84a7854df5e7e32ba1c6a715
datetime: '2025-02-23T17:30:05+01:00'
fix_commit_message: 'efivarfs: Defer PM notifier registration until .fill_super


  syzbot reports an issue that turns out to be caused by the fact that the

  efivarfs PM notifier may be invoked before the efivarfs_fs_info::sb

  field is populated, resulting in a NULL deference.


  So defer the registration until efivarfs_fill_super() is invoked.


  Reported-by: syzbot+00d13e505ef530a45100@syzkaller.appspotmail.com

  Tested-by: syzbot+00d13e505ef530a45100@syzkaller.appspotmail.com

  Signed-off-by: Ard Biesheuvel <ardb@kernel.org>

  '
submodule:
- fs/efivarfs
hunk_count: 2
covered_count: 0
