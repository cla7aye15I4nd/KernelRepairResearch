id: 980925dbfbc7f93bc2ef
bug_link: https://syzkaller.appspot.com/bug?extid=980925dbfbc7f93bc2ef
title: general protection fault in get_info
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9be9d04b28e75b52f83e3e10ee529a1ec992a2c0
fix_commit: e3eeacbac4ad34fac93f82a7cf15402bba83d22e
datetime: '2018-01-16T01:51:59+01:00'
fix_commit_message: 'netfilter: x_tables: don''t return garbage pointer on modprobe
  failure


  request_module may return a positive error result from modprobe,

  if we cast this to ERR_PTR this returns a garbage result (it passes

  IS_ERR checks).


  Fix it by ignoring modprobe return values entirely, just retry the

  table lookup instead.


  Reported-by: syzbot+980925dbfbc7f93bc2ef@syzkaller.appspotmail.com

  Fixes: 03d13b6868a2 ("netfilter: xtables: add and use xt_request_find_table_lock")

  Fixes: 20651cefd25f ("netfilter: x_tables: unbreak module auto loading")

  Signed-off-by: Florian Westphal <fw@strlen.de>

  Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>

  '
submodule:
- net/netfilter
hunk_count: 1
covered_count: 0
