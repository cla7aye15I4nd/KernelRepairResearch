id: 44b6763edfc17144296f
bug_link: https://syzkaller.appspot.com/bug?extid=44b6763edfc17144296f
title: 'KASAN: use-after-free Write in __ext4_expand_extra_isize (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8d0d47ea1640b23678306c007ccc813b5b930af4
fix_commit: 4ea99936a1630f51fc3a2d61a58ec4a1c4b7d55a
datetime: '2019-11-19T12:24:55-05:00'
fix_commit_message: 'ext4: add more paranoia checking in ext4_expand_extra_isize handling


  It''s possible to specify a non-zero s_want_extra_isize via debugging

  option, and this can cause bad things(tm) to happen when using a file

  system with an inode size of 128 bytes.


  Add better checking when the file system is mounted, as well as when

  we are actually doing the trying to do the inode expansion.


  Link: https://lore.kernel.org/r/20191110121510.GH23325@mit.edu

  Reported-by: syzbot+f8d6f8386ceacdbfff57@syzkaller.appspotmail.com

  Reported-by: syzbot+33d7ea72e47de3bdf4e1@syzkaller.appspotmail.com

  Reported-by: syzbot+44b6763edfc17144296f@syzkaller.appspotmail.com

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  Cc: stable@kernel.org

  '
submodule:
- fs/ext4
hunk_count: 3
covered_count: 0
