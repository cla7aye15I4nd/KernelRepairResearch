id: 614e82b88a1a4973e534
bug_link: https://syzkaller.appspot.com/bug?extid=614e82b88a1a4973e534
title: 'KMSAN: uninit-value in ieee80211_sta_tx_notify (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 48c06708e63e71b4395e4159797366aa03be10ff
fix_commit: d5e568c3a4ec2ddd23e7dc5ad5b0c64e4f22981a
datetime: '2021-11-26T11:35:20+01:00'
fix_commit_message: 'mac80211: track only QoS data frames for admission control


  For admission control, obviously all of that only works for

  QoS data frames, otherwise we cannot even access the QoS

  field in the header.


  Syzbot reported (see below) an uninitialized value here due

  to a status of a non-QoS nullfunc packet, which isn''t even

  long enough to contain the QoS header.


  Fix this to only do anything for QoS data packets.


  Reported-by: syzbot+614e82b88a1a4973e534@syzkaller.appspotmail.com

  Fixes: 02219b3abca5 ("mac80211: add WMM admission control support")

  Link: https://lore.kernel.org/r/20211122124737.dad29e65902a.Ieb04587afacb27c14e0de93ec1bfbefb238cc2a0@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/mac80211
hunk_count: 1
covered_count: 1
