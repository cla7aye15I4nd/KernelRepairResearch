id: bbf0f9a213c94f283a5c
bug_link: https://syzkaller.appspot.com/bug?extid=bbf0f9a213c94f283a5c
title: general protection fault in ext4_fill_super (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 856dd6c5981260b4d1aa84b78373ad54a203db48
fix_commit: d5e72c4e3256335d6fb75c2e321144f93141f4f5
datetime: '2023-04-28T12:56:40-04:00'
fix_commit_message: 'ext4: fix lost error code reporting in __ext4_fill_super()


  When code was factored out of __ext4_fill_super() into

  ext4_percpu_param_init() the error return was discarded.  This meant

  that it was possible for __ext4_fill_super() to return zero,

  indicating success, without the struct super getting completely filled

  in, leading to a potential NULL pointer dereference.


  Reported-by: syzbot+bbf0f9a213c94f283a5c@syzkaller.appspotmail.com

  Fixes: 1f79467c8a6b ("ext4: factor out ext4_percpu_param_init() ...")

  Link: https://syzkaller.appspot.com/bug?id=6dac47d5e58af770c0055f680369586ec32e144c

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  Reviewed-by: Jason Yan <yanaijie@huawei.com>

  '
submodule:
- fs/ext4
hunk_count: 1
covered_count: 0
