id: 6f5ecd144854c0d8580b
bug_link: https://syzkaller.appspot.com/bug?extid=6f5ecd144854c0d8580b
title: 'KMSAN: uninit-value in r871xu_drv_init'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d1b57669732d09da7e13ef86d058dab0cd57f6e0
fix_commit: 0458e5428e5e959d201a40ffe71d762a79ecedc4
datetime: '2022-05-19T17:44:25+02:00'
fix_commit_message: "staging: rtl8712: fix uninit-value in r871xu_drv_init()\n\nWhen\
  \ 'tmpU1b' returns from r8712_read8(padapter, EE_9346CR) is 0,\n'mac[6]' will not\
  \ be initialized.\n\nBUG: KMSAN: uninit-value in r871xu_drv_init+0x2d54/0x3070 drivers/staging/rtl8712/usb_intf.c:541\n\
  \ r871xu_drv_init+0x2d54/0x3070 drivers/staging/rtl8712/usb_intf.c:541\n usb_probe_interface+0xf19/0x1600\
  \ drivers/usb/core/driver.c:396\n really_probe+0x653/0x14b0 drivers/base/dd.c:596\n\
  \ __driver_probe_device+0x3e9/0x530 drivers/base/dd.c:752\n driver_probe_device\
  \ drivers/base/dd.c:782 [inline]\n __device_attach_driver+0x79f/0x1120 drivers/base/dd.c:899\n\
  \ bus_for_each_drv+0x2d6/0x3f0 drivers/base/bus.c:427\n __device_attach+0x593/0x8e0\
  \ drivers/base/dd.c:970\n device_initial_probe+0x4a/0x60 drivers/base/dd.c:1017\n\
  \ bus_probe_device+0x17b/0x3e0 drivers/base/bus.c:487\n device_add+0x1fff/0x26e0\
  \ drivers/base/core.c:3405\n usb_set_configuration+0x37e9/0x3ed0 drivers/usb/core/message.c:2170\n\
  \ usb_generic_driver_probe+0x13c/0x300 drivers/usb/core/generic.c:238\n usb_probe_device+0x309/0x570\
  \ drivers/usb/core/driver.c:293\n really_probe+0x653/0x14b0 drivers/base/dd.c:596\n\
  \ __driver_probe_device+0x3e9/0x530 drivers/base/dd.c:752\n driver_probe_device\
  \ drivers/base/dd.c:782 [inline]\n __device_attach_driver+0x79f/0x1120 drivers/base/dd.c:899\n\
  \ bus_for_each_drv+0x2d6/0x3f0 drivers/base/bus.c:427\n __device_attach+0x593/0x8e0\
  \ drivers/base/dd.c:970\n device_initial_probe+0x4a/0x60 drivers/base/dd.c:1017\n\
  \ bus_probe_device+0x17b/0x3e0 drivers/base/bus.c:487\n device_add+0x1fff/0x26e0\
  \ drivers/base/core.c:3405\n usb_new_device+0x1b8e/0x2950 drivers/usb/core/hub.c:2566\n\
  \ hub_port_connect drivers/usb/core/hub.c:5358 [inline]\n hub_port_connect_change\
  \ drivers/usb/core/hub.c:5502 [inline]\n port_event drivers/usb/core/hub.c:5660\
  \ [inline]\n hub_event+0x58e3/0x89e0 drivers/usb/core/hub.c:5742\n process_one_work+0xdb6/0x1820\
  \ kernel/workqueue.c:2307\n worker_thread+0x10b3/0x21e0 kernel/workqueue.c:2454\n\
  \ kthread+0x3c7/0x500 kernel/kthread.c:377\n ret_from_fork+0x1f/0x30\n\nLocal variable\
  \ mac created at:\n r871xu_drv_init+0x1771/0x3070 drivers/staging/rtl8712/usb_intf.c:394\n\
  \ usb_probe_interface+0xf19/0x1600 drivers/usb/core/driver.c:396\n\nKMSAN: uninit-value\
  \ in r871xu_drv_init\nhttps://syzkaller.appspot.com/bug?id=3cd92b1d85428b128503bfa7a250294c9ae00bd8\n\
  \nReported-by: <syzbot+6f5ecd144854c0d8580b@syzkaller.appspotmail.com>\nTested-by:\
  \ <syzbot+6f5ecd144854c0d8580b@syzkaller.appspotmail.com>\nReviewed-by: Dan Carpenter\
  \ <dan.carpenter@oracle.com>\nSigned-off-by: Wang Cheng <wanngchenng@gmail.com>\n\
  Link: https://lore.kernel.org/r/14c3886173dfa4597f0704547c414cfdbcd11d16.1652618244.git.wanngchenng@gmail.com\n\
  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>\n"
submodule:
- drivers/staging/rtl8712
hunk_count: 1
covered_count: 0
