id: 2e39c7a45268c036c9e90433a48c9dd550276dc6
bug_link: https://syzkaller.appspot.com/bug?extid=2e39c7a45268c036c9e90433a48c9dd550276dc6
title: general protection fault in lockdep_invariant_state (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 328b4ed93b69a6f2083d52f31a240a09e5de386a
fix_commit: 5e351ad106997e06b2dc3da9c6b939b95f67fb88
datetime: '2017-12-06T19:29:56+01:00'
fix_commit_message: 'locking/lockdep: Fix possible NULL deref


  We can''t invalidate xhlocks when we''ve not yet allocated any.


  Reported-by: Dmitry Vyukov <dvyukov@google.com>

  Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>

  Cc: Linus Torvalds <torvalds@linux-foundation.org>

  Cc: Peter Zijlstra <peterz@infradead.org>

  Cc: Thomas Gleixner <tglx@linutronix.de>

  Cc: linux-kernel@vger.kernel.org

  Fixes: f52be5708076 ("locking/lockdep: Untangle xhlock history save/restore from
  task independence")

  Signed-off-by: Ingo Molnar <mingo@kernel.org>

  '
submodule:
- kernel/locking
hunk_count: 1
covered_count: 1
