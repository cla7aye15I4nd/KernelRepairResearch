id: 01218003be74b5e1213a
bug_link: https://syzkaller.appspot.com/bug?extid=01218003be74b5e1213a
title: 'KMSAN: uninit-value in __exfat_get_dentry_set'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 184fa506e392eb78364d9283c961217ff2c0617b
fix_commit: 02dffe9ab092fc4c8800aee68cb7eafd37a980c4
datetime: '2024-11-25T17:08:21+09:00'
fix_commit_message: 'exfat: fix uninit-value in __exfat_get_dentry_set


  There is no check if stream size and start_clu are invalid.

  If start_clu is EOF cluster and stream size is 4096, It will

  cause uninit value access. because ei->hint_femp.eidx could

  be 128(if cluster size is 4K) and wrong hint will allocate

  next cluster. and this cluster will be same with the cluster

  that is allocated by exfat_extend_valid_size(). The previous

  patch will check invalid start_clu, but for clarity, initialize

  hint_femp.eidx to zero.


  Cc: stable@vger.kernel.org

  Reported-by: syzbot+01218003be74b5e1213a@syzkaller.appspotmail.com

  Tested-by: syzbot+01218003be74b5e1213a@syzkaller.appspotmail.com

  Reviewed-by: Yuezhang Mo <Yuezhang.Mo@sony.com>

  Signed-off-by: Namjae Jeon <linkinjeon@kernel.org>

  '
submodule:
- fs/exfat
hunk_count: 1
covered_count: 0
