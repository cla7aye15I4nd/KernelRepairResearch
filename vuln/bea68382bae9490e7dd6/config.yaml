id: bea68382bae9490e7dd6
bug_link: https://syzkaller.appspot.com/bug?extid=bea68382bae9490e7dd6
title: 'KASAN: use-after-free Read in iov_iter_alignment'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e42617b825f8073569da76dc4510bfa019b1c35a
fix_commit: e0ff126ee7ad405c1ef531f9f3db92929de4f20f
datetime: '2019-12-16T12:48:10-05:00'
fix_commit_message: 'pipe: Fix bogus dereference in iov_iter_alignment()


  We cannot look at ''i->pipe'' unless we know the iter is a pipe. Move the

  ring_size load to a branch in iov_iter_alignment() where we''ve already

  checked the iter is a pipe to avoid bogus dereference.


  Reported-by: syzbot+bea68382bae9490e7dd6@syzkaller.appspotmail.com

  Fixes: 8cefc107ca54 ("pipe: Use head and tail pointers for the ring, not cursor
  and length")

  Signed-off-by: Jan Kara <jack@suse.cz>

  Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>

  '
submodule:
- lib
hunk_count: 1
covered_count: 1
