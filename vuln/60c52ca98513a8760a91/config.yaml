id: 60c52ca98513a8760a91
bug_link: https://syzkaller.appspot.com/bug?extid=60c52ca98513a8760a91
title: kernel BUG in commit_creds
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7179c3ce3dbff646c55f7cd664a895f462f049e5
fix_commit: 701521403cfb228536b3947035c8a6eca40d8e58
datetime: '2022-04-14T20:23:40-06:00'
fix_commit_message: 'io_uring: abort file assignment prior to assigning creds


  We need to either restore creds properly if we fail on the file

  assignment, or just do the file assignment first instead. Let''s do

  the latter as it''s simpler, should make no difference here for

  file assignment.


  Link: https://lore.kernel.org/lkml/000000000000a7edb305dca75a50@google.com/

  Reported-by: syzbot+60c52ca98513a8760a91@syzkaller.appspotmail.com

  Fixes: 6bf9c47a3989 ("io_uring: defer file assignment")

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 1
covered_count: 0
