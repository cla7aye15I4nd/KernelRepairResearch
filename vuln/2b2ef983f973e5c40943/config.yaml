id: 2b2ef983f973e5c40943
bug_link: https://syzkaller.appspot.com/bug?extid=2b2ef983f973e5c40943
title: 'KASAN: use-after-free Read in snd_timer_resolution'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5d1b71226dc4d44b4b65766fa9d74492f9d4587b
fix_commit: 60adcfde92fa40fcb2dbf7cc52f9b096e0cd109a
datetime: '2020-01-15T21:38:18+01:00'
fix_commit_message: 'ALSA: seq: Fix racy access for queue timer in proc read


  snd_seq_info_timer_read() reads the information of the timer assigned

  for each queue, but it''s done in a racy way which may lead to UAF as

  spotted by syzkaller.


  This patch applies the missing q->timer_mutex lock while accessing the

  timer object as well as a slight code change to adapt the standard

  coding style.


  Reported-by: syzbot+2b2ef983f973e5c40943@syzkaller.appspotmail.com

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20200115203733.26530-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/seq
hunk_count: 1
covered_count: 1
