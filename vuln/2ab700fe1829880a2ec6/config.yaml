id: 2ab700fe1829880a2ec6
bug_link: https://syzkaller.appspot.com/bug?extid=2ab700fe1829880a2ec6
title: possible deadlock in static_key_slow_inc (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5647e53f7856bb39dae781fe26aa65a699e2fc9f
fix_commit: f0cc749254d12c78e93dae3b27b21dc9546843d0
datetime: '2023-06-12T06:39:48-10:00'
fix_commit_message: 'cgroup,freezer: hold cpu_hotplug_lock before freezer_mutex in
  freezer_css_{online,offline}()


  syzbot is again reporting circular locking dependency between

  cpu_hotplug_lock and freezer_mutex. Do like what we did with

  commit 57dcd64c7e036299 ("cgroup,freezer: hold cpu_hotplug_lock

  before freezer_mutex").


  Reported-by: syzbot <syzbot+2ab700fe1829880a2ec6@syzkaller.appspotmail.com>

  Closes: https://syzkaller.appspot.com/bug?extid=2ab700fe1829880a2ec6

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Tested-by: syzbot <syzbot+2ab700fe1829880a2ec6@syzkaller.appspotmail.com>

  Fixes: f5d39b020809 ("freezer,sched: Rewrite core freezer logic")

  Cc: stable@vger.kernel.org # v6.1+

  Signed-off-by: Tejun Heo <tj@kernel.org>

  '
submodule:
- kernel/cgroup
hunk_count: 2
covered_count: 2
