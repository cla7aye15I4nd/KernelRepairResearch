id: 0ece6edfd05ed20e32d9
bug_link: https://syzkaller.appspot.com/bug?extid=0ece6edfd05ed20e32d9
title: 'WARNING: locking bug in __timer_delete_sync'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9432e90df1b8a544f220fd455b2fa39eed8a535d
fix_commit: b79922009214e6ab23c07db32a5606a45710f86e
datetime: '2024-06-10T13:17:16-04:00'
fix_commit_message: 'bcachefs: Add missing synchronize_srcu_expedited() call when
  shutting down


  We use the polling interface to srcu for tracking pending frees; when

  shutting down we don''t need to wait for an srcu barrier to free them,

  but SRCU still gets confused if we shutdown with an outstanding grace

  period.


  Reported-by: syzbot+6a038377f0a594d7d44e@syzkaller.appspotmail.com

  Reported-by: syzbot+0ece6edfd05ed20e32d9@syzkaller.appspotmail.com

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
