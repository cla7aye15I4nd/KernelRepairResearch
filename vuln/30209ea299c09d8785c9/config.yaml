id: 30209ea299c09d8785c9
bug_link: https://syzkaller.appspot.com/bug?extid=30209ea299c09d8785c9
title: 'unregister_netdevice: waiting for DEV to become free (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 39f14c00b13c47186739a4cbc7a16e04d7fdbb60
fix_commit: ddd9b5e3e765d8ed5a35786a6cb00111713fe161
datetime: '2019-12-17T22:57:11-08:00'
fix_commit_message: 'net-sysfs: Call dev_hold always in rx_queue_add_kobject


  Dev_hold has to be called always in rx_queue_add_kobject.

  Otherwise usage count drops below 0 in case of failure in

  kobject_init_and_add.


  Fixes: b8eb718348b8 ("net-sysfs: Fix reference count leak in rx|netdev_queue_add_kobject")

  Reported-by: syzbot <syzbot+30209ea299c09d8785c9@syzkaller.appspotmail.com>

  Cc: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Cc: David Miller <davem@davemloft.net>

  Cc: Lukas Bulwahn <lukas.bulwahn@gmail.com>

  Signed-off-by: Jouni Hogander <jouni.hogander@unikie.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/core
hunk_count: 1
covered_count: 0
