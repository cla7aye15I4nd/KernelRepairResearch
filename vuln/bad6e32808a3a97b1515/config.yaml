id: bad6e32808a3a97b1515
bug_link: https://syzkaller.appspot.com/bug?extid=bad6e32808a3a97b1515
title: 'WARNING: suspicious RCU usage in in_dev_dump_addr'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: ae95f9c1a5601b3dd40d72436ef835b5bbb429a7
fix_commit: d3e6e285fff3494a5c12154c8e7d79f5181d3ddc
datetime: '2019-06-04T14:24:10-07:00'
fix_commit_message: 'net: ipv4: fix rcu lockdep splat due to wrong annotation


  syzbot triggered following splat when strict netlink

  validation is enabled:


  net/ipv4/devinet.c:1766 suspicious rcu_dereference_check() usage!


  This occurs because we hold RTNL mutex, but no rcu read lock.

  The second call site holds both, so just switch to the _rtnl variant.


  Reported-by: syzbot+bad6e32808a3a97b1515@syzkaller.appspotmail.com

  Fixes: 2638eb8b50cf ("net: ipv4: provide __rcu annotation for ifa_list")

  Signed-off-by: Florian Westphal <fw@strlen.de>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/ipv4
hunk_count: 1
covered_count: 1
