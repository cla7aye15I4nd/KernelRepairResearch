id: 300d27c79fe6d4cbcc39
bug_link: https://syzkaller.appspot.com/bug?extid=300d27c79fe6d4cbcc39
title: WARNING in register_shrinker_prepared
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c15187a4a2d660bf490f7873afd0de5288f65c8f
fix_commit: 5035ebc644aec92d55d1bbfe042f35341e4bffb5
datetime: '2022-07-03T18:08:40-07:00'
fix_commit_message: "mm: shrinkers: introduce debugfs interface for memory shrinkers\n\
  \nThis commit introduces the /sys/kernel/debug/shrinker debugfs interface\nwhich\
  \ provides an ability to observe the state of individual kernel memory\nshrinkers.\n\
  \nBecause the feature adds some memory overhead (which shouldn't be large\nunless\
  \ there is a huge amount of registered shrinkers), it's guarded by a\nconfig option\
  \ (enabled by default).\n\nThis commit introduces the \"count\" interface for each\
  \ shrinker registered\nin the system.\n\nThe output is in the following format:\n\
  <cgroup inode id> <nr of objects on node 0> <nr of objects on node 1>...\n<cgroup\
  \ inode id> <nr of objects on node 0> <nr of objects on node 1>...\n...\n\nTo reduce\
  \ the size of output on machines with many thousands cgroups, if\nthe total number\
  \ of objects on all nodes is 0, the line is omitted.\n\nIf the shrinker is not memcg-aware\
  \ or CONFIG_MEMCG is off, 0 is printed as\ncgroup inode id.  If the shrinker is\
  \ not numa-aware, 0's are printed for\nall nodes except the first one.\n\nThis commit\
  \ gives debugfs entries simple numeric names, which are not very\nconvenient.  The\
  \ following commit in the series will provide shrinkers\nwith more meaningful names.\n\
  \n[akpm@linux-foundation.org: remove WARN_ON_ONCE(), per Roman]\n  Reported-by:\
  \ syzbot+300d27c79fe6d4cbcc39@syzkaller.appspotmail.com\nLink: https://lkml.kernel.org/r/20220601032227.4076670-3-roman.gushchin@linux.dev\n\
  Signed-off-by: Roman Gushchin <roman.gushchin@linux.dev>\nReviewed-by: Kent Overstreet\
  \ <kent.overstreet@gmail.com>\nAcked-by: Muchun Song <songmuchun@bytedance.com>\n\
  Cc: Christophe JAILLET <christophe.jaillet@wanadoo.fr>\nCc: Dave Chinner <dchinner@redhat.com>\n\
  Cc: Hillf Danton <hdanton@sina.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- include/linux
- lib
- mm
hunk_count: 8
covered_count: 2
