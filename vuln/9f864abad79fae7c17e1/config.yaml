id: 9f864abad79fae7c17e1
bug_link: https://syzkaller.appspot.com/bug?extid=9f864abad79fae7c17e1
title: memory leak in kobject_set_name_vargs (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5b3dc19dda6691e8ab574e8eede1aef6f02a4f1c
fix_commit: cb8d53d2c97369029cc638c9274ac7be0a316c75
datetime: '2020-10-18T10:36:12-04:00'
fix_commit_message: 'ext4: fix leaking sysfs kobject after failed mount


  ext4_unregister_sysfs() only deletes the kobject.  The reference to it

  needs to be put separately, like ext4_put_super() does.


  This addresses the syzbot report

  "memory leak in kobject_set_name_vargs (3)"

  (https://syzkaller.appspot.com/bug?extid=9f864abad79fae7c17e1).


  Reported-by: syzbot+9f864abad79fae7c17e1@syzkaller.appspotmail.com

  Fixes: 72ba74508b28 ("ext4: release sysfs kobject when failing to enable quotas
  on mount")

  Cc: stable@vger.kernel.org

  Signed-off-by: Eric Biggers <ebiggers@google.com>

  Link: https://lore.kernel.org/r/20200922162456.93657-1-ebiggers@kernel.org

  Reviewed-by: Jan Kara <jack@suse.cz>

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 1
covered_count: 0
