id: 8040d16d30c215f821de
bug_link: https://syzkaller.appspot.com/bug?extid=8040d16d30c215f821de
title: possible deadlock in virtual_nci_close
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 710cfc6ab4b85ac5388828b4be63a5f20c8a9dd9
fix_commit: b2e44aac91b25abbed57d785089c4b7af926a7bd
datetime: '2022-11-17T13:48:01+01:00'
fix_commit_message: 'NFC: nci: Allow to create multiple virtual nci devices


  The current virtual nci driver is great for testing and fuzzing.

  But it allows to create at most one "global" device which does not allow

  to run parallel tests and harms fuzzing isolation and reproducibility.

  Restructure the driver to allow creation of multiple independent devices.

  This should be backwards compatible for existing tests.


  Signed-off-by: Dmitry Vyukov <dvyukov@google.com>

  Reviewed-by: Bongsu Jeon <bongsu.jeon@samsung.com>

  Cc: Bongsu Jeon <bongsu.jeon@samsung.com>

  Cc: Krzysztof Kozlowski <krzysztof.kozlowski@linaro.org>

  Cc: Jakub Kicinski <kuba@kernel.org>

  Cc: netdev@vger.kernel.org

  Link: https://lore.kernel.org/r/20221115100017.787929-1-dvyukov@google.com

  Signed-off-by: Paolo Abeni <pabeni@redhat.com>

  '
submodule:
- drivers/nfc
hunk_count: 7
covered_count: 7
