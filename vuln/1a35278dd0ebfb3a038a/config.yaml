id: 1a35278dd0ebfb3a038a
bug_link: https://syzkaller.appspot.com/bug?extid=1a35278dd0ebfb3a038a
title: 'KMSAN: uninit-value in sd_init'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2509d725e02adcf4d1375f80f2beef925b4a10aa
fix_commit: 4843a543fad3bf8221cf14e5d5f32d15cee89e84
datetime: '2019-08-19T12:10:47-03:00'
fix_commit_message: 'media: gspca: zero usb_buf on error


  If reg_r() fails, then gspca_dev->usb_buf was left uninitialized,

  and some drivers used the contents of that buffer in logic.


  This caused several syzbot errors:


  https://syzkaller.appspot.com/bug?extid=397fd082ce5143e2f67d

  https://syzkaller.appspot.com/bug?extid=1a35278dd0ebfb3a038a

  https://syzkaller.appspot.com/bug?extid=06ddf1788cfd048c5e82


  I analyzed the gspca drivers and zeroed the buffer where needed.


  Reported-and-tested-by: syzbot+1a35278dd0ebfb3a038a@syzkaller.appspotmail.com

  Reported-and-tested-by: syzbot+397fd082ce5143e2f67d@syzkaller.appspotmail.com

  Reported-and-tested-by: syzbot+06ddf1788cfd048c5e82@syzkaller.appspotmail.com


  Signed-off-by: Hans Verkuil <hverkuil-cisco@xs4all.nl>

  Signed-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>

  '
submodule:
- drivers/media/usb/gspca
hunk_count: 15
covered_count: 0
