id: fd5332e429401bf42d18
bug_link: https://syzkaller.appspot.com/bug?extid=fd5332e429401bf42d18
title: general protection fault in cfg80211_dev_rename
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d031781bdabe1027858a3220f868866586bf6e7c
fix_commit: 0bbab5f0301587cad4e923ccc49bb910db86162c
datetime: '2020-05-25T13:12:32+02:00'
fix_commit_message: 'cfg80211: fix debugfs rename crash


  Removing the "if (IS_ERR(dir)) dir = NULL;" check only works

  if we adjust the remaining code to not rely on it being NULL.

  Check IS_ERR_OR_NULL() before attempting to dereference it.


  I''m not actually entirely sure this fixes the syzbot crash as

  the kernel config indicates that they do have DEBUG_FS in the

  kernel, but this is what I found when looking there.


  Cc: stable@vger.kernel.org

  Fixes: d82574a8e5a4 ("cfg80211: no need to check return value of debugfs_create
  functions")

  Reported-by: syzbot+fd5332e429401bf42d18@syzkaller.appspotmail.com

  Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  Link: https://lore.kernel.org/r/20200525113816.fc4da3ec3d4b.Ica63a110679819eaa9fb3bc1b7437d96b1fd187d@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/wireless
hunk_count: 1
covered_count: 1
