id: 8ac3859139c685c4f597
bug_link: https://syzkaller.appspot.com/bug?extid=8ac3859139c685c4f597
title: 'KASAN: null-ptr-deref Read in ida_free (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 197b6b60ae7bc51dd0814953c562833143b292aa
fix_commit: cb2239c198ad9fbd5aced22cf93e45562da781eb
datetime: '2023-03-31T12:13:37+02:00'
fix_commit_message: 'fs: drop peer group ids under namespace lock


  When cleaning up peer group ids in the failure path we need to make sure

  to hold on to the namespace lock. Otherwise another thread might just

  turn the mount from a shared into a non-shared mount concurrently.


  Link: https://lore.kernel.org/lkml/00000000000088694505f8132d77@google.com

  Fixes: 2a1867219c7b ("fs: add mount_setattr()")

  Reported-by: syzbot+8ac3859139c685c4f597@syzkaller.appspotmail.com

  Cc: stable@vger.kernel.org # 5.12+

  Message-Id: <20230330-vfs-mount_setattr-propagation-fix-v1-1-37548d91533b@kernel.org>

  Signed-off-by: Christian Brauner <brauner@kernel.org>

  '
submodule:
- fs
hunk_count: 1
covered_count: 1
