id: ff72ab869817b6ea60bc570f638ee030f4fc73e5
bug_link: https://syzkaller.appspot.com/bug?extid=ff72ab869817b6ea60bc570f638ee030f4fc73e5
title: general protection fault in af_alg_free_areq_sgls
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b32a7dc8aef1882fbf983eb354837488cc9d54dc
fix_commit: 887207ed9e5812ed9239b6d07185a2d35dda91db
datetime: '2017-11-29T13:39:14+11:00'
fix_commit_message: "crypto: af_alg - fix NULL pointer dereference in\n\n af_alg_free_areq_sgls()\n\
  \nIf allocating the ->tsgl member of 'struct af_alg_async_req' failed,\nduring cleanup\
  \ we dereferenced the NULL ->tsgl pointer in\naf_alg_free_areq_sgls(), because ->tsgl_entries\
  \ was nonzero.\n\nFix it by only freeing the ->tsgl list if it is non-NULL.\n\n\
  This affected both algif_skcipher and algif_aead.\n\nFixes: e870456d8e7c (\"crypto:\
  \ algif_skcipher - overhaul memory management\")\nFixes: d887c52d6ae4 (\"crypto:\
  \ algif_aead - overhaul memory management\")\nReported-by: syzbot <syzkaller@googlegroups.com>\n\
  Cc: <stable@vger.kernel.org> # v4.14+\nSigned-off-by: Eric Biggers <ebiggers@google.com>\n\
  Reviewed-by: Stephan Mueller <smueller@chronox.de>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>\n"
submodule:
- crypto
hunk_count: 1
covered_count: 1
