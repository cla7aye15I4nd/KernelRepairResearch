id: 6ce141c55b2f7aafd1c4
bug_link: https://syzkaller.appspot.com/bug?extid=6ce141c55b2f7aafd1c4
title: memory leak in h5_rx_pkt_start
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6dfccd13db2ff2b709ef60a50163925d477549aa
fix_commit: 70f259a3f4276b71db365b1d6ff1eab805ea6ec3
datetime: '2020-11-09T13:09:43+01:00'
fix_commit_message: 'Bluetooth: hci_h5: close serdev device and free hu in h5_close


  When h5_close() gets called, the memory allocated for the hu gets

  freed only if hu->serdev doesn''t exist. This leads to a memory leak.

  So when h5_close() is requested, close the serdev device instance and

  free the memory allocated to the hu entirely instead.


  Fixes: https://syzkaller.appspot.com/bug?extid=6ce141c55b2f7aafd1c4

  Reported-by: syzbot+6ce141c55b2f7aafd1c4@syzkaller.appspotmail.com

  Tested-by: syzbot+6ce141c55b2f7aafd1c4@syzkaller.appspotmail.com

  Signed-off-by: Anant Thazhemadam <anant.thazhemadam@gmail.com>

  Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

  '
submodule:
- drivers/bluetooth
hunk_count: 1
covered_count: 0
