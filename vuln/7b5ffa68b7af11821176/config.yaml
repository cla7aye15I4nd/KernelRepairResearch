id: 7b5ffa68b7af11821176
bug_link: https://syzkaller.appspot.com/bug?extid=7b5ffa68b7af11821176
title: 'KASAN: slab-use-after-free Read in bch2_str_hash_repair_key'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9b9a3270092bf8030dbe21ce90b2d0c8d98d33c7
fix_commit: 9b54efe66c9b44e7446e8a81a058c014cd43661d
datetime: '2025-06-15T22:11:55-04:00'
fix_commit_message: 'bcachefs: Fix alloc_req use after free


  Now the alloc_req is allocated from the bump allocator, if there is

  reallocation, the memory of alloc_req would be frees, fix by delaying the

  reallocation to transaction restart, it has to restart anyway.


  Reported-by: syzbot+2887a13a5c387e616a68@syzkaller.appspotmail.com

  Signed-off-by: Alan Huang <mmpgouride@gmail.com>

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 4
covered_count: 1
