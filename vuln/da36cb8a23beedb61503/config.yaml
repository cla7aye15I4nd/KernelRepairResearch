id: da36cb8a23beedb61503
bug_link: https://syzkaller.appspot.com/bug?extid=da36cb8a23beedb61503
title: 'WARNING: suspicious RCU usage in rds_loop_conn_alloc'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f7219bf31122e2f70887ed48ba7c4c15dad45da0
fix_commit: d4014d8cc6dfa964e3e66df525de2384e3583018
datetime: '2018-02-13T13:52:02-05:00'
fix_commit_message: "rds: do not call ->conn_alloc with GFP_KERNEL\n\nCommit ebeeb1ad9b8a\
  \ (\"rds: tcp: use rds_destroy_pending() to synchronize\nnetns/module teardown and\
  \ rds connection/workq management\")\nadds an rcu read critical section to __rd_conn_create.\
  \ The\nmemory allocations in that critcal section need to use\nGFP_ATOMIC to avoid\
  \ sleeping.\n\nThis patch was verified with syzkaller reproducer.\n\nReported-by:\
  \ syzbot+a0564419941aaae3fe3c@syzkaller.appspotmail.com\nFixes: ebeeb1ad9b8a (\"\
  rds: tcp: use rds_destroy_pending() to synchronize\n       netns/module teardown\
  \ and rds connection/workq management\")\nSigned-off-by: Sowmini Varadhan <sowmini.varadhan@oracle.com>\n\
  Acked-by: Santosh Shilimkar <santosh.shilimkar@oracle.com>\nSigned-off-by: David\
  \ S. Miller <davem@davemloft.net>\n"
submodule:
- net/rds
hunk_count: 1
covered_count: 1
