id: d4b971e744b1f5439336
bug_link: https://syzkaller.appspot.com/bug?extid=d4b971e744b1f5439336
title: 'WARNING: locking bug in ext4_xattr_inode_update_ref'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b3e6bcb94590dea45396b9481e47b809b1be4afa
fix_commit: b928dfdcb27d8fa59917b794cfba53052a2f050f
datetime: '2023-05-30T15:33:50-04:00'
fix_commit_message: 'ext4: set lockdep subclass for the ea_inode in ext4_xattr_inode_cache_find()


  If the ea_inode has been pushed out of the inode cache while there is

  still a reference in the mb_cache, the lockdep subclass will not be

  set on the inode, which can lead to some lockdep false positives.


  Fixes: 33d201e0277b ("ext4: fix lockdep warning about recursive inode locking")

  Cc: stable@kernel.org

  Reported-by: syzbot+d4b971e744b1f5439336@syzkaller.appspotmail.com

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  Link: https://lore.kernel.org/r/20230524034951.779531-3-tytso@mit.edu

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 1
covered_count: 0
