id: 6692c72009680f7c4eb2
bug_link: https://syzkaller.appspot.com/bug?extid=6692c72009680f7c4eb2
title: memory leak in ath9k_hif_usb_firmware_cb
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 323d91d4684d238f6bc3693fed93caf795378fe0
fix_commit: 9b25e3985477ac3f02eca5fc1e0cc6850a3f7e69
datetime: '2023-01-17T13:52:35+02:00'
fix_commit_message: 'wifi: ath9k: htc_hst: free skb in ath9k_htc_rx_msg() if there
  is no callback function


  It is stated that ath9k_htc_rx_msg() either frees the provided skb or

  passes its management to another callback function. However, the skb is

  not freed in case there is no another callback function, and Syzkaller was

  able to cause a memory leak. Also minor comment fix.


  Found by Linux Verification Center (linuxtesting.org) with Syzkaller.


  Fixes: fb9987d0f748 ("ath9k_htc: Support for AR9271 chipset.")

  Reported-by: syzbot+e008dccab31bd3647609@syzkaller.appspotmail.com

  Reported-by: syzbot+6692c72009680f7c4eb2@syzkaller.appspotmail.com

  Signed-off-by: Fedor Pchelkin <pchelkin@ispras.ru>

  Signed-off-by: Alexey Khoroshilov <khoroshilov@ispras.ru>

  Acked-by: Toke Høiland-Jørgensen <toke@toke.dk>

  Signed-off-by: Kalle Valo <quic_kvalo@quicinc.com>

  Link: https://lore.kernel.org/r/20230104123546.51427-1-pchelkin@ispras.ru

  '
submodule:
- drivers/net/wireless/ath/ath9k
hunk_count: 2
covered_count: 0
