id: 8325e509a1bf83ec741d
bug_link: https://syzkaller.appspot.com/bug?extid=8325e509a1bf83ec741d
title: 'WARNING: refcount bug in tcindex_data_put'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3e1221acf6a8f8595b5ce354bab4327a69d54d18
fix_commit: a8eab6d35e22f4f21471f16147be79529cd6aaf7
datetime: '2020-04-03T16:00:08-07:00'
fix_commit_message: 'net_sched: fix a missing refcnt in tcindex_init()


  The initial refcnt of struct tcindex_data should be 1,

  it is clear that I forgot to set it to 1 in tcindex_init().

  This leads to a dec-after-zero warning.


  Reported-by: syzbot+8325e509a1bf83ec741d@syzkaller.appspotmail.com

  Fixes: 304e024216a8 ("net_sched: add a temporary refcnt for struct tcindex_data")

  Cc: Jamal Hadi Salim <jhs@mojatatu.com>

  Cc: Jiri Pirko <jiri@resnulli.us>

  Cc: Paul E. McKenney <paulmck@kernel.org>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sched
hunk_count: 1
covered_count: 0
