id: f612c02823acb02ff9bc
bug_link: https://syzkaller.appspot.com/bug?extid=f612c02823acb02ff9bc
title: 'WARNING: suspicious RCU usage in ovs_flow_tbl_masks_cache_size'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: dbfe394dad33f99cf8458be50483ec40a5d29c34
fix_commit: fea07a487c6dd422dc8837237c9d2bc7c33119af
datetime: '2020-11-03T16:57:42-08:00'
fix_commit_message: 'net: openvswitch: silence suspicious RCU usage warning


  Silence suspicious RCU usage warning in ovs_flow_tbl_masks_cache_resize()

  by replacing rcu_dereference() with rcu_dereference_ovsl().


  In addition, when creating a new datapath, make sure it''s configured under

  the ovs_lock.


  Fixes: 9bf24f594c6a ("net: openvswitch: make masks cache size configurable")

  Reported-by: syzbot+9a8f8bfcc56e8578016c@syzkaller.appspotmail.com

  Signed-off-by: Eelco Chaudron <echaudro@redhat.com>

  Link: https://lore.kernel.org/r/160439190002.56943.1418882726496275961.stgit@ebuild

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/openvswitch
hunk_count: 4
covered_count: 3
