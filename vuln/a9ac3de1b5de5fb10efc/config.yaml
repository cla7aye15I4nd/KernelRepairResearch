id: a9ac3de1b5de5fb10efc
bug_link: https://syzkaller.appspot.com/bug?extid=a9ac3de1b5de5fb10efc
title: WARNING in inc_nlink
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: da27e0a0e5f655f0d58d4e153c3182bb2b290f64
fix_commit: facb03dddec04e4aac1bb2139accdceb04deb1f3
datetime: '2020-08-12T10:58:00-07:00'
fix_commit_message: 'fs/minix: don''t allow getting deleted inodes


  If an inode has no links, we need to mark it bad rather than allowing it

  to be accessed.  This avoids WARNINGs in inc_nlink() and drop_nlink() when

  doing directory operations on a fuzzed filesystem.


  Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")

  Reported-by: syzbot+a9ac3de1b5de5fb10efc@syzkaller.appspotmail.com

  Reported-by: syzbot+df958cf5688a96ad3287@syzkaller.appspotmail.com

  Signed-off-by: Eric Biggers <ebiggers@google.com>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  Cc: Alexander Viro <viro@zeniv.linux.org.uk>

  Cc: Qiujun Huang <anenbupt@gmail.com>

  Cc: <stable@vger.kernel.org>

  Link: http://lkml.kernel.org/r/20200628060846.682158-3-ebiggers@kernel.org

  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- fs/minix
hunk_count: 2
covered_count: 0
