id: 17416257cb95200cba44
bug_link: https://syzkaller.appspot.com/bug?extid=17416257cb95200cba44
title: 'UBSAN: shift-out-of-bounds in try_to_shrink_lruvec'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b82b530740b960eb949813043c4187c254039ac1
fix_commit: 462966dc7d701b5c251f280e1c90e8fd301f11e3
datetime: '2024-07-03T19:29:53-07:00'
fix_commit_message: 'mm: vmscan: reset sc->priority on retry


  The commit 6be5e186fd65 ("mm: vmscan: restore incremental cgroup

  iteration") added a retry reclaim heuristic to iterate all the cgroups

  before returning an unsuccessful reclaim but missed to reset the

  sc->priority.  Let''s fix it.


  Link: https://lkml.kernel.org/r/20240529154911.3008025-1-shakeel.butt@linux.dev

  Fixes: 6be5e186fd65 ("mm: vmscan: restore incremental cgroup iteration")

  Signed-off-by: Shakeel Butt <shakeel.butt@linux.dev>

  Reported-by: syzbot+17416257cb95200cba44@syzkaller.appspotmail.com

  Tested-by: syzbot+17416257cb95200cba44@syzkaller.appspotmail.com

  Reviewed-by: Roman Gushchin <roman.gushchin@linux.dev>

  Cc: Johannes Weiner <hannes@cmpxchg.org>

  Cc: Michal Hocko <mhocko@kernel.org>

  Cc: Rik van Riel <riel@surriel.com>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  '
submodule:
- mm
hunk_count: 1
covered_count: 1
