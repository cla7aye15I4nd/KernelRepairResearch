id: 96e659d35b9d6b541152
bug_link: https://syzkaller.appspot.com/bug?extid=96e659d35b9d6b541152
title: 'BUG: unable to handle kernel paging request in percpu_counter_add_batch'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 27d676a1c2010450d00d514a8a6c1c780cb8d77f
fix_commit: 64b4c411a6c7a5f27555bfc2d6310b87bde3db67
datetime: '2022-10-28T13:37:22-07:00'
fix_commit_message: 'ipc/msg.c: fix percpu_counter use after free


  These percpu counters are referenced in free_ipcs->freeque, so destroy

  them later.


  Fixes: 72d1e611082e ("ipc/msg: mitigate the lock contention with percpu counter")

  Reported-by: syzbot+96e659d35b9d6b541152@syzkaller.appspotmail.com

  Tested-by: Mark Rutland <mark.rutland@arm.com>

  Cc: Jiebin Sun <jiebin.sun@intel.com>

  Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

  '
submodule:
- ipc
hunk_count: 1
covered_count: 1
