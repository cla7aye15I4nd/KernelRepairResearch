id: bebc6f1acdf4cbb79b03
bug_link: https://syzkaller.appspot.com/bug?extid=bebc6f1acdf4cbb79b03
title: kernel BUG in inet_sock_destruct
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2c02d41d71f90a5168391b6a5f2954112ba2307c
fix_commit: 1ac88557447088ccd15eb2f2520ce46d463c8e0b
datetime: '2023-01-04T20:38:25-08:00'
fix_commit_message: 'inet: control sockets should not use current thread task_frag


  Because ICMP handlers run from softirq contexts,

  they must not use current thread task_frag.


  Previously, all sockets allocated by inet_ctl_sock_create()

  would use the per-socket page fragment, with no chance of

  recursion.


  Fixes: 98123866fcf3 ("Treewide: Stop corrupting socket''s task_frag")

  Reported-by: syzbot+bebc6f1acdf4cbb79b03@syzkaller.appspotmail.com

  Signed-off-by: Eric Dumazet <edumazet@google.com>

  Cc: Benjamin Coddington <bcodding@redhat.com>

  Acked-by: Guillaume Nault <gnault@redhat.com>

  Link: https://lore.kernel.org/r/20230103192736.454149-1-edumazet@google.com

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/ipv4
hunk_count: 1
covered_count: 0
