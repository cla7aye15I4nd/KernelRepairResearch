id: b62f08f4d5857755e3bc
bug_link: https://syzkaller.appspot.com/bug?extid=b62f08f4d5857755e3bc
title: general protection fault in process_init_reply
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b8f95e5d13f5f0191dcb4b9113113d241636e7cb
fix_commit: e8f3bd773d22f488724dffb886a1618da85c2966
datetime: '2018-07-26T16:13:11+02:00'
fix_commit_message: 'fuse: Fix oops at process_init_reply()


  syzbot is hitting NULL pointer dereference at process_init_reply().

  This is because deactivate_locked_super() is called before response for

  initial request is processed.


  Fix this by aborting and waiting for all requests (including FUSE_INIT)

  before resetting fc->sb.


  Original patch by Tetsuo Handa <penguin-kernel@I-love.SKAURA.ne.jp>.


  Reported-by: syzbot <syzbot+b62f08f4d5857755e3bc@syzkaller.appspotmail.com>

  Fixes: e27c9d3877a0 ("fuse: fuse: add time_gran to INIT_OUT")

  Cc: <stable@vger.kernel.org> # v3.19

  Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>

  '
submodule:
- fs/fuse
hunk_count: 3
covered_count: 0
