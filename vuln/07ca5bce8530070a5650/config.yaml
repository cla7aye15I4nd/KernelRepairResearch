id: 07ca5bce8530070a5650
bug_link: https://syzkaller.appspot.com/bug?extid=07ca5bce8530070a5650
title: 'KASAN: use-after-free Read in j1939_sk_recv'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8d7a5f000e235f1dfc61862197d4e8e72c18c6fc
fix_commit: ddeeb7d4822ed06d79fc15e822b70dce3fa77e39
datetime: '2019-11-13T10:42:34+01:00'
fix_commit_message: 'can: j1939: j1939_can_recv(): add priv refcounting


  j1939_can_recv() can be called in parallel with socket release. In this

  case sk_release and sk_destruct can be done earlier than

  j1939_can_recv() is processed.


  Reported-by: syzbot+ca172a0ac477ac90f045@syzkaller.appspotmail.com

  Reported-by: syzbot+07ca5bce8530070a5650@syzkaller.appspotmail.com

  Reported-by: syzbot+a47537d3964ef6c874e1@syzkaller.appspotmail.com

  Fixes: 9d71dd0c7009 ("can: add support of SAE J1939 protocol")

  Signed-off-by: Oleksij Rempel <o.rempel@pengutronix.de>

  '
submodule:
- net/can
hunk_count: 2
covered_count: 2
