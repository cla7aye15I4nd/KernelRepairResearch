id: efea72d4a0a1d03596cd
bug_link: https://syzkaller.appspot.com/bug?extid=efea72d4a0a1d03596cd
title: 'KCSAN: data-race in tomoyo_supervisor / tomoyo_supervisor (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 738d2902773e30939a982c8df7a7f94293659810
fix_commit: a8772fad0172aeae339144598b809fd8d4823331
datetime: '2020-01-02T12:53:49+09:00'
fix_commit_message: 'tomoyo: Use atomic_t for statistics counter


  syzbot is reporting that there is a race at tomoyo_stat_update() [1].

  Although it is acceptable to fail to track exact number of times policy

  was updated, convert to atomic_t because this is not a hot path.


  [1] https://syzkaller.appspot.com/bug?id=a4d7b973972eeed410596e6604580e0133b0fc04


  Reported-by: syzbot <syzbot+efea72d4a0a1d03596cd@syzkaller.appspotmail.com>

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  '
submodule:
- security/tomoyo
hunk_count: 3
covered_count: 3
