id: f05ba4652c0471416eaf
bug_link: https://syzkaller.appspot.com/bug?extid=f05ba4652c0471416eaf
title: 'WARNING: kobject bug in erofs_unregister_sysfs'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9f2731d6338a072b60ab1d9340847bde3306614b
fix_commit: a942da24abc5839c11a8fc2a4b7cb268ea94ba54
datetime: '2022-03-17T00:09:02+08:00'
fix_commit_message: 'fs: erofs: add sanity check for kobject in erofs_unregister_sysfs


  Syzkaller hit ''WARNING: kobject bug in erofs_unregister_sysfs''. This bug

  is triggered by injecting fault in kobject_init_and_add of

  erofs_unregister_sysfs.


  Fix this by adding sanity check for kobject in erofs_unregister_sysfs


  Note that I''ve tested the patch and the crash does not occur any more.


  Link: https://lore.kernel.org/r/20220315132814.12332-1-dzm91@hust.edu.cn

  Signed-off-by: Dongliang Mu <mudongliangabcd@gmail.com>

  Fixes: 168e9a76200c ("erofs: add sysfs interface")

  Reviewed-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  Reviewed-by: Chao Yu <chao@kernel.org>

  Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  '
submodule:
- fs/erofs
hunk_count: 1
covered_count: 1
