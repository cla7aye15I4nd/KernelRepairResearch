id: ded1696f6b50b615b630
bug_link: https://syzkaller.appspot.com/bug?extid=ded1696f6b50b615b630
title: 'KMSAN: kernel-infoleak in kvm_vcpu_write_guest_page'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 85ba2b165d11029c0c57a58640d4cf41f9d9fa0d
fix_commit: 3a33d030daaa7c507e1c12d5adcf828248429593
datetime: '2019-01-25T18:53:10+01:00'
fix_commit_message: "kvm: x86/vmx: Use kzalloc for cached_vmcs12\n\nThis changes the\
  \ allocation of cached_vmcs12 to use kzalloc instead of\nkmalloc. This removes the\
  \ information leak found by Syzkaller (see\nReported-by) in this case and prevents\
  \ similar leaks from happening\nbased on cached_vmcs12.\n\nIt also changes vmx_get_nested_state\
  \ to copy out the full 4k VMCS12_SIZE\nin copy_to_user rather than only the size\
  \ of the struct.\n\nTested: rebuilt against head, booted, and ran the syszkaller\
  \ repro\n  https://syzkaller.appspot.com/text?tag=ReproC&x=174efca3400000 without\n\
  \  observing any problems.\n\nReported-by: syzbot+ded1696f6b50b615b630@syzkaller.appspotmail.com\n\
  Fixes: 8fcc4b5923af5de58b80b53a069453b135693304\nCc: stable@vger.kernel.org\nSigned-off-by:\
  \ Tom Roeder <tmroeder@google.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>\n"
submodule:
- arch/x86/kvm/vmx
hunk_count: 2
covered_count: 0
