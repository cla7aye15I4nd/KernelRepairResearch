id: 9afaf6749e3a7aa1bdf3
bug_link: https://syzkaller.appspot.com/bug?extid=9afaf6749e3a7aa1bdf3
title: 'KASAN: wild-memory-access Read in get_futex_key'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0ecb4232fc65e659ca7020f8bb2e0fc347acfb7d
fix_commit: 8337204c58899fe422db765b481711eb2d95eb0b
datetime: '2025-06-05T14:37:58+02:00'
fix_commit_message: 'futex: Handle invalid node numbers supplied by user


  syzbot used a negative node number which was not rejected early and led

  to invalid memory access in node_possible().


  Reject negative node numbers except for FUTEX_NO_NODE.


  [bigeasy: Keep the FUTEX_NO_NODE check]


  Closes: https://lore.kernel.org/all/6835bfe3.a70a0220.253bc2.00b5.GAE@google.com/

  Fixes: cec199c5e39bd ("futex: Implement FUTEX2_NUMA")

  Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>

  Reported-by: syzbot+9afaf6749e3a7aa1bdf3@syzkaller.appspotmail.com

  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>

  Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>

  Link: https://lkml.kernel.org/r/20250528085521.1938355-4-bigeasy@linutronix.de

  '
submodule:
- kernel/futex
hunk_count: 1
covered_count: 1
