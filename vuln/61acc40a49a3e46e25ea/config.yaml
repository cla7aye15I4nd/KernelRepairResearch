id: 61acc40a49a3e46e25ea
bug_link: https://syzkaller.appspot.com/bug?extid=61acc40a49a3e46e25ea
title: 'INFO: task hung in pipe_release (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e11d80a849e010f78243bb6f6af7dccef3a71a90
fix_commit: 7e24969022cbd61ddc586f14824fc205661bb124
datetime: '2020-09-02T20:59:40-06:00'
fix_commit_message: 'block: allow for_each_bvec to support zero len bvec


  Block layer usually doesn''t support or allow zero-length bvec. Since

  commit 1bdc76aea115 ("iov_iter: use bvec iterator to implement

  iterate_bvec()"), iterate_bvec() switches to bvec iterator. However,

  Al mentioned that ''Zero-length segments are not disallowed'' in iov_iter.


  Fixes for_each_bvec() so that it can move on after seeing one zero

  length bvec.


  Fixes: 1bdc76aea115 ("iov_iter: use bvec iterator to implement iterate_bvec()")

  Reported-by: syzbot <syzbot+61acc40a49a3e46e25ea@syzkaller.appspotmail.com>

  Signed-off-by: Ming Lei <ming.lei@redhat.com>

  Tested-by: Tetsuo Handa <penguin-kernel@i-love.sakura.ne.jp>

  Cc: Al Viro <viro@zeniv.linux.org.uk>

  Cc: Matthew Wilcox <willy@infradead.org>

  Cc: <stable@vger.kernel.org>

  Link: https://www.mail-archive.com/linux-kernel@vger.kernel.org/msg2262077.html

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- include/linux
hunk_count: 1
covered_count: 0
