id: e87ebe0f7913f71f2ea5
bug_link: https://syzkaller.appspot.com/bug?extid=e87ebe0f7913f71f2ea5
title: WARNING in yurex_write/usb_submit_urb
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 83a43ff80a566de8718dfc6565545a0080ec1fb5
fix_commit: 372c93131998c0622304bed118322d2a04489e63
datetime: '2020-12-28T15:47:06+01:00'
fix_commit_message: 'USB: yurex: fix control-URB timeout handling


  Make sure to always cancel the control URB in write() so that it can be

  reused after a timeout or spurious CMD_ACK.


  Currently any further write requests after a timeout would fail after

  triggering a WARN() in usb_submit_urb() when attempting to submit the

  already active URB.


  Reported-by: syzbot+e87ebe0f7913f71f2ea5@syzkaller.appspotmail.com

  Fixes: 6bc235a2e24a ("USB: add driver for Meywa-Denki & Kayac YUREX")

  Cc: stable <stable@vger.kernel.org>     # 2.6.37

  Signed-off-by: Johan Hovold <johan@kernel.org>

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/usb/misc
hunk_count: 1
covered_count: 1
