id: 37186860aa7812b331d5
bug_link: https://syzkaller.appspot.com/bug?extid=37186860aa7812b331d5
title: general protection fault in prt_str
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a1541541480073365ac701a1125d750a86bfd644
fix_commit: a30f32222df2a3777f8c09ef460ae8ad278021e6
datetime: '2024-10-09T16:42:53-04:00'
fix_commit_message: 'bcachefs: Fix NULL pointer dereference in bch2_opt_to_text


  This patch adds a bounds check to the bch2_opt_to_text function to prevent

  NULL pointer dereferences when accessing the opt->choices array. This

  ensures that the index used is within valid bounds before dereferencing.

  The new version enhances the readability.


  Reported-and-tested-by: syzbot+37186860aa7812b331d5@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=37186860aa7812b331d5

  Signed-off-by: Mohammed Anees <pvmohammedanees2003@gmail.com>

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 0
