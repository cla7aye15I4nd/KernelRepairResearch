id: 52eec578b7504cf32002
bug_link: https://syzkaller.appspot.com/bug?extid=52eec578b7504cf32002
title: WARNING in bch2_printbuf_make_room
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3125c95ea69141c4cbbde854674c90531034ec47
fix_commit: dc5bfdf8eaed76cf527c9477952c535f75e0e499
datetime: '2024-09-27T21:46:34-04:00'
fix_commit_message: 'bcachefs: fix the memory leak in exception case


  The pointer clean points the memory allocated by kmemdup, when the

  return value of bch2_sb_clean_validate_late is not zero. The memory

  pointed by clean is leaked. So we should free it in this case.


  Fixes: a37ad1a3aba9 ("bcachefs: sb-clean.c")

  Signed-off-by: Hongbo Li <lihongbo22@huawei.com>

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 0
