id: 0bfda3ade1ee9288a1be
bug_link: https://syzkaller.appspot.com/bug?extid=0bfda3ade1ee9288a1be
title: kernel BUG at arch/x86/mm/physaddr.c:LINE! (5)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 092a9f59bc05904d4555fa012db12e768734ba1a
fix_commit: 57d38f26d81e4275748b69372f31df545dcd9b71
datetime: '2020-05-04T11:49:59+02:00'
fix_commit_message: 'vt: fix unicode console freeing with a common interface


  By directly using kfree() in different places we risk missing one if

  it is switched to using vfree(), especially if the corresponding

  vmalloc() is hidden away within a common abstraction.


  Oh wait, that''s exactly what happened here.


  So let''s fix this by creating a common abstraction for the free case

  as well.


  Signed-off-by: Nicolas Pitre <nico@fluxnic.net>

  Reported-by: syzbot+0bfda3ade1ee9288a1be@syzkaller.appspotmail.com

  Fixes: 9a98e7a80f95 ("vt: don''t use kmalloc() for the unicode screen buffer")

  Cc: <stable@vger.kernel.org>

  Reviewed-by: Sam Ravnborg <sam@ravnborg.org>

  Link: https://lore.kernel.org/r/nycvar.YSQ.7.76.2005021043110.2671@knanqh.ubzr

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/tty/vt
hunk_count: 2
covered_count: 1
