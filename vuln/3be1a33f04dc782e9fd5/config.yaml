id: 3be1a33f04dc782e9fd5
bug_link: https://syzkaller.appspot.com/bug?extid=3be1a33f04dc782e9fd5
title: WARNING in af_alg_make_sg
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f5e94d10e4c468357019e5c28d48499f677b284f
fix_commit: ae46d2aa6a7fbe8ca0946f24b061b6ccdc6c3f25
datetime: '2020-04-08T09:05:58-07:00'
fix_commit_message: 'mm/gup: Let __get_user_pages_locked() return -EINTR for fatal
  signal


  __get_user_pages_locked() will return 0 instead of -EINTR after commit

  4426e945df588 ("mm/gup: allow VM_FAULT_RETRY for multiple times") which

  added extra code to allow gup detect fatal signal faster.


  Restore the original -EINTR behavior.


  Cc: Andrew Morton <akpm@linux-foundation.org>

  Cc: Thomas Gleixner <tglx@linutronix.de>

  Cc: Peter Zijlstra <peterz@infradead.org>

  Fixes: 4426e945df58 ("mm/gup: allow VM_FAULT_RETRY for multiple times")

  Reported-by: syzbot+3be1a33f04dc782e9fd5@syzkaller.appspotmail.com

  Signed-off-by: Hillf Danton <hdanton@sina.com>

  Acked-by: Michal Hocko <mhocko@suse.com>

  Signed-off-by: Peter Xu <peterx@redhat.com>

  Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

  '
submodule:
- mm
hunk_count: 1
covered_count: 0
