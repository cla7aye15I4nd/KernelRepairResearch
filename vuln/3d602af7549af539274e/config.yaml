id: 3d602af7549af539274e
bug_link: https://syzkaller.appspot.com/bug?extid=3d602af7549af539274e
title: WARNING in hsr_fill_frame_info
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: a18c097eda4230e4c4eed5f2b093735bdaaeb2a1
fix_commit: 430d67bdcb04ee8502c2b10dcbaced4253649189
datetime: '2024-09-11T15:49:07-07:00'
fix_commit_message: 'net: hsr: Use the seqnr lock for frames received via interlink
  port.


  syzbot reported that the seqnr_lock is not acquire for frames received

  over the interlink port. In the interlink case a new seqnr is generated

  and assigned to the frame.

  Frames, which are received over the slave port have already a sequence

  number assigned so the lock is not required.


  Acquire the hsr_priv::seqnr_lock during in the invocation of

  hsr_forward_skb() if a packet has been received from the interlink port.


  Reported-by: syzbot+3d602af7549af539274e@syzkaller.appspotmail.com

  Closes: https://groups.google.com/g/syzkaller-bugs/c/KppVvGviGg4/m/EItSdCZdBAAJ

  Fixes: 5055cccfc2d1c ("net: hsr: Provide RedBox support (HSR-SAN)")

  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>

  Reviewed-by: Lukasz Majewski <lukma@denx.de>

  Tested-by: Lukasz Majewski <lukma@denx.de>

  Link: https://patch.msgid.link/20240906132816.657485-2-bigeasy@linutronix.de

  Signed-off-by: Jakub Kicinski <kuba@kernel.org>

  '
submodule:
- net/hsr
hunk_count: 1
covered_count: 1
