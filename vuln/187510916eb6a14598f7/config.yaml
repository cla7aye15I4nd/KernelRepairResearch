id: 187510916eb6a14598f7
bug_link: https://syzkaller.appspot.com/bug?extid=187510916eb6a14598f7
title: WARNING in unlock_new_inode
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c53ec7bcc780fde4916e7a563d68b90b20b0b6bc
fix_commit: 8859bf2b1278d064a139e3031451524a49a56bd0
datetime: '2020-09-16T12:51:24+02:00'
fix_commit_message: 'reiserfs: only call unlock_new_inode() if I_NEW


  unlock_new_inode() is only meant to be called after a new inode has

  already been inserted into the hash table.  But reiserfs_new_inode() can

  call it even before it has inserted the inode, triggering the WARNING in

  unlock_new_inode().  Fix this by only calling unlock_new_inode() if the

  inode has the I_NEW flag set, indicating that it''s in the table.


  This addresses the syzbot report "WARNING in unlock_new_inode"

  (https://syzkaller.appspot.com/bug?extid=187510916eb6a14598f7).


  Link: https://lore.kernel.org/r/20200628070057.820213-1-ebiggers@kernel.org

  Reported-by: syzbot+187510916eb6a14598f7@syzkaller.appspotmail.com

  Signed-off-by: Eric Biggers <ebiggers@google.com>

  Signed-off-by: Jan Kara <jack@suse.cz>

  '
submodule:
- fs/reiserfs
hunk_count: 1
covered_count: 1
