id: 1f4ba1e5520762c523c6
bug_link: https://syzkaller.appspot.com/bug?extid=1f4ba1e5520762c523c6
title: inconsistent lock state in io_file_data_ref_zero
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: bd5bbda72f7fa013ddea0ff7c4d91daedb821869
fix_commit: ac0648a56c1ff66c1cbf735075ad33a26cbc50de
datetime: '2020-12-09T12:04:01-07:00'
fix_commit_message: 'io_uring: use bottom half safe lock for fixed file data


  io_file_data_ref_zero() can be invoked from soft-irq from the RCU core,

  hence we need to ensure that the file_data lock is bottom half safe. Use

  the _bh() variants when grabbing this lock.


  Reported-by: syzbot+1f4ba1e5520762c523c6@syzkaller.appspotmail.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 5
covered_count: 0
