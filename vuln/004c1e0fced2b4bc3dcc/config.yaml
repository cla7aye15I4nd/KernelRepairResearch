id: 004c1e0fced2b4bc3dcc
bug_link: https://syzkaller.appspot.com/bug?extid=004c1e0fced2b4bc3dcc
title: 'BUG: unable to handle kernel NULL pointer dereference in __bio_release_pages'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: be50df31c4e2a69f961a3bb759346d299eaa2b23
fix_commit: 7bed6f3d08b7af27b7015da8dc3acf2b9c1f21d7
datetime: '2024-01-16T15:02:25-07:00'
fix_commit_message: 'block: Fix iterating over an empty bio with bio_for_each_folio_all


  If the bio contains no data, bio_first_folio() calls page_folio() on a

  NULL pointer and oopses.  Move the test that we''ve reached the end of

  the bio from bio_next_folio() to bio_first_folio().


  Reported-by: syzbot+8b23309d5788a79d3eea@syzkaller.appspotmail.com

  Reported-by: syzbot+004c1e0fced2b4bc3dcc@syzkaller.appspotmail.com

  Fixes: 640d1930bef4 ("block: Add bio_for_each_folio_all()")

  Cc: stable@vger.kernel.org

  Signed-off-by: Matthew Wilcox (Oracle) <willy@infradead.org>

  Link: https://lore.kernel.org/r/20240116212959.3413014-1-willy@infradead.org

  [axboe: add unlikely() to error case]

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- include/linux
hunk_count: 2
covered_count: 2
