id: c5cebd3fc559c89ac52f
bug_link: https://syzkaller.appspot.com/bug?extid=c5cebd3fc559c89ac52f
title: 'INFO: rcu detected stall in addrconf_rs_timer (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8b142a00edcf8422ca48b8de88d286efb500cb53
fix_commit: d4d6ec6dac07f263f06d847d6f732d6855522845
datetime: '2019-09-10T18:31:00+01:00'
fix_commit_message: 'sch_hhf: ensure quantum and hhf_non_hh_weight are non-zero


  In case of TCA_HHF_NON_HH_WEIGHT or TCA_HHF_QUANTUM is zero,

  it would make no progress inside the loop in hhf_dequeue() thus

  kernel would get stuck.


  Fix this by checking this corner case in hhf_change().


  Fixes: 10239edf86f1 ("net-qdisc-hhf: Heavy-Hitter Filter (HHF) qdisc")

  Reported-by: syzbot+bc6297c11f19ee807dc2@syzkaller.appspotmail.com

  Reported-by: syzbot+041483004a7f45f1f20a@syzkaller.appspotmail.com

  Reported-by: syzbot+55be5f513bed37fc4367@syzkaller.appspotmail.com

  Cc: Jamal Hadi Salim <jhs@mojatatu.com>

  Cc: Jiri Pirko <jiri@resnulli.us>

  Cc: Terry Lam <vtlam@google.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/sched
hunk_count: 1
covered_count: 0
