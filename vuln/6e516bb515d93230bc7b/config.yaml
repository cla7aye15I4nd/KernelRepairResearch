id: 6e516bb515d93230bc7b
bug_link: https://syzkaller.appspot.com/bug?extid=6e516bb515d93230bc7b
title: kernel BUG in clear_inode (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 1014354cd8d40e81e9a6e9037a10ebfc0b656d27
fix_commit: 2d91b3765cd05016335cd5df5e5c6a29708ec058
datetime: '2025-07-14T17:08:14-05:00'
fix_commit_message: 'jfs: truncate good inode pages when hard link is 0


  The fileset value of the inode copy from the disk by the reproducer is

  AGGR_RESERVED_I. When executing evict, its hard link number is 0, so its

  inode pages are not truncated. This causes the bugon to be triggered when

  executing clear_inode() because nrpages is greater than 0.


  Reported-by: syzbot+6e516bb515d93230bc7b@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=6e516bb515d93230bc7b

  Signed-off-by: Lizhi Xu <lizhi.xu@windriver.com>

  Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>

  '
submodule:
- fs/jfs
hunk_count: 1
covered_count: 1
