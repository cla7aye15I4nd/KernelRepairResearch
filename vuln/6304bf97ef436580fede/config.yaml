id: 6304bf97ef436580fede
bug_link: https://syzkaller.appspot.com/bug?extid=6304bf97ef436580fede
title: kernel BUG at drivers/vhost/vhost.c:LINE!
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 58f101bf87e32753342a6924772c6ebb0fbde24a
fix_commit: d65026c6c62e7d9616c8ceb5a53b68bcdc050525
datetime: '2018-03-29T16:22:47-04:00'
fix_commit_message: 'vhost: validate log when IOTLB is enabled


  Vq log_base is the userspace address of bitmap which has nothing to do

  with IOTLB. So it needs to be validated unconditionally otherwise we

  may try use 0 as log_base which may lead to pin pages that will lead

  unexpected result (e.g trigger BUG_ON() in set_bit_to_user()).


  Fixes: 6b1e6cc7855b0 ("vhost: new device IOTLB API")

  Reported-by: syzbot+6304bf97ef436580fede@syzkaller.appspotmail.com

  Signed-off-by: Jason Wang <jasowang@redhat.com>

  Acked-by: Michael S. Tsirkin <mst@redhat.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- drivers/vhost
hunk_count: 1
covered_count: 0
