id: b8d61a58b7c7ebd2c8e0
bug_link: https://syzkaller.appspot.com/bug?extid=b8d61a58b7c7ebd2c8e0
title: 'KASAN: user-memory-access Write in zram_slot_lock'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 46930b7cc7727271c9c27aac1fdc97a8645e2d00
fix_commit: 3eb96946f0be6bf447cbdf219aba22bc42672f92
datetime: '2023-05-24T08:19:26-06:00'
fix_commit_message: 'block: make bio_check_eod work for zero sized devices


  Since the dawn of time bio_check_eod has a check for a non-zero size of

  the device.  This doesn''t really make any sense as we never want to send

  I/O to a device that''s been set to zero size, or never moved out of that.


  I am a bit surprised we haven''t caught this for a long time, but the

  removal of the extra validation inside of zram caused syzbot to trip

  over this issue recently.  I''ve added a Fixes tag for that commit, but

  the issue really goes back way before git history.


  Fixes: 9fe95babc742 ("zram: remove valid_io_request")

  Reported-by: syzbot+b8d61a58b7c7ebd2c8e0@syzkaller.appspotmail.com

  Signed-off-by: Christoph Hellwig <hch@lst.de>

  Link: https://lore.kernel.org/r/20230524060538.1593686-1-hch@lst.de

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- block
hunk_count: 1
covered_count: 0
