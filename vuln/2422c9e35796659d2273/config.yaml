id: 2422c9e35796659d2273
bug_link: https://syzkaller.appspot.com/bug?extid=2422c9e35796659d2273
title: 'WARNING: suspicious RCU usage in rt6_check_expired'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 40cde8249a8280e4e24b42a4e20813ac4c1368e9
fix_commit: c3c14da0288de79ccef2c2380cf5737077fa64ed
datetime: '2018-04-23T16:12:54-04:00'
fix_commit_message: "net/ipv6: add rcu locking to ip6_negative_advice\n\nsyzbot reported\
  \ a suspicious rcu_dereference_check:\n  __dump_stack lib/dump_stack.c:77 [inline]\n\
  \  dump_stack+0x1b9/0x294 lib/dump_stack.c:113\n  lockdep_rcu_suspicious+0x14a/0x153\
  \ kernel/locking/lockdep.c:4592\n  rt6_check_expired+0x38b/0x3e0 net/ipv6/route.c:410\n\
  \  ip6_negative_advice+0x67/0xc0 net/ipv6/route.c:2204\n  dst_negative_advice include/net/sock.h:1786\
  \ [inline]\n  sock_setsockopt+0x138f/0x1fe0 net/core/sock.c:1051\n  __sys_setsockopt+0x2df/0x390\
  \ net/socket.c:1899\n  SYSC_setsockopt net/socket.c:1914 [inline]\n  SyS_setsockopt+0x34/0x50\
  \ net/socket.c:1911\n\nAdd rcu locking around call to rt6_check_expired in\nip6_negative_advice.\n\
  \nFixes: a68886a69180 (\"net/ipv6: Make from in rt6_info rcu protected\")\nReported-by:\
  \ syzbot+2422c9e35796659d2273@syzkaller.appspotmail.com\nSigned-off-by: David Ahern\
  \ <dsahern@gmail.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- net/ipv6
hunk_count: 1
covered_count: 1
