id: 55cc59267340fad29512
bug_link: https://syzkaller.appspot.com/bug?extid=55cc59267340fad29512
title: 'KASAN: use-after-free Read in io_worker_get'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 12521a5d5cb7ff0ad43eadfc9c135d86e1131fa8
fix_commit: e6db6f9398dadcbc06318a133d4c44a2d3844e61
datetime: '2023-01-08T10:39:17-07:00'
fix_commit_message: 'io_uring/io-wq: only free worker if it was allocated for creation


  We have two types of task_work based creation, one is using an existing

  worker to setup a new one (eg when going to sleep and we have no free

  workers), and the other is allocating a new worker. Only the latter

  should be freed when we cancel task_work creation for a new worker.


  Fixes: af82425c6a2d ("io_uring/io-wq: free worker if task_work creation is canceled")

  Reported-by: syzbot+d56ec896af3637bdb7e4@syzkaller.appspotmail.com

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- io_uring
hunk_count: 1
covered_count: 1
