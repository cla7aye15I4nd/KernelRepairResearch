id: 298c5d8fb4a128bc27b0
bug_link: https://syzkaller.appspot.com/bug?extid=298c5d8fb4a128bc27b0
title: possible deadlock in ext4_xattr_inode_iget
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2bc7e7c1a3bc9bd0cbf0f71006f6fe7ef24a00c2
fix_commit: aff3bea95388299eec63440389b4545c8041b357
datetime: '2023-05-30T15:33:57-04:00'
fix_commit_message: 'ext4: add lockdep annotations for i_data_sem for ea_inode''s


  Treat i_data_sem for ea_inodes as being in their own lockdep class to

  avoid lockdep complaints about ext4_setattr''s use of inode_lock() on

  normal inodes potentially causing lock ordering with i_data_sem on

  ea_inodes in ext4_xattr_inode_write().  However, ea_inodes will be

  operated on by ext4_setattr(), so this isn''t a problem.


  Cc: stable@kernel.org

  Link: https://syzkaller.appspot.com/bug?extid=298c5d8fb4a128bc27b0

  Reported-by: syzbot+298c5d8fb4a128bc27b0@syzkaller.appspotmail.com

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  Link: https://lore.kernel.org/r/20230524034951.779531-5-tytso@mit.edu

  Signed-off-by: Theodore Ts''o <tytso@mit.edu>

  '
submodule:
- fs/ext4
hunk_count: 2
covered_count: 1
