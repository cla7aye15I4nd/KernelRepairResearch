id: 6a8a923895a61a5dbf18
bug_link: https://syzkaller.appspot.com/bug?extid=6a8a923895a61a5dbf18
title: 'KASAN: use-after-free Read in __io_remove_buffers'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d785a773bed966a75ca1f11d108ae1897189975b
fix_commit: ec8516f3b7c40ba7050e6b3a32467e9de451ecdf
datetime: '2022-07-21T08:29:01-06:00'
fix_commit_message: 'io_uring: fix free of unallocated buffer list


  in the error path of io_register_pbuf_ring, only free bl if it was

  allocated.


  Reported-by: Dipanjan Das <mail.dipanjan.das@gmail.com>

  Fixes: c7fb19428d67 ("io_uring: add support for ring mapped supplied buffers")

  Signed-off-by: Dylan Yudaken <dylany@fb.com>

  Reviewed-by: Pavel Begunkov <asml.silence@gmail.com>

  Link: https://lore.kernel.org/all/CANX2M5bXKw1NaHdHNVqssUUaBCs8aBpmzRNVEYEvV0n44P7ioA@mail.gmail.com/

  Link: https://lore.kernel.org/all/CANX2M5YiZBXU3L6iwnaLs-HHJXRvrxM8mhPDiMDF9Y9sAvOHUA@mail.gmail.com/

  Signed-off-by: Jens Axboe <axboe@kernel.dk>

  '
submodule:
- fs
hunk_count: 3
covered_count: 0
