id: e9072e90624a31dfa85f
bug_link: https://syzkaller.appspot.com/bug?extid=e9072e90624a31dfa85f
title: general protection fault in virtio_gpu_array_put_free
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2b6dd600dd72573c23ea180b5b0b2f1813405882
fix_commit: 6b79f96f4a23846516e5e6e4dd37fc06f43a60dd
datetime: '2022-01-18T07:52:42+01:00'
fix_commit_message: 'drm/virtio: Ensure that objs is not NULL in virtio_gpu_array_put_free()


  If virtio_gpu_object_shmem_init() fails (e.g. due to fault injection, as it

  happened in the bug report by syzbot), virtio_gpu_array_put_free() could be

  called with objs equal to NULL.


  Ensure that objs is not NULL in virtio_gpu_array_put_free(), or otherwise

  return from the function.


  Cc: stable@vger.kernel.org # 5.13.x

  Signed-off-by: Roberto Sassu <roberto.sassu@huawei.com>

  Reported-by: syzbot+e9072e90624a31dfa85f@syzkaller.appspotmail.com

  Fixes: 377f8331d0565 ("drm/virtio: fix possible leak/unlock virtio_gpu_object_array")

  Link: http://patchwork.freedesktop.org/patch/msgid/20211213183122.838119-1-roberto.sassu@huawei.com

  Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>

  '
submodule:
- drivers/gpu/drm/virtio
hunk_count: 1
covered_count: 1
