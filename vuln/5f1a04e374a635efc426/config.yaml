id: 5f1a04e374a635efc426
bug_link: https://syzkaller.appspot.com/bug?extid=5f1a04e374a635efc426
title: WARNING in kcm_exit_net (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 664088f8d68178809b848ca450f2797efb34e8e7
fix_commit: eb7f54b90bd8f469834c5e86dcf72ebf9a629811
datetime: '2018-06-01T10:28:07-04:00'
fix_commit_message: 'kcm: Fix use-after-free caused by clonned sockets


  (resend for properly queueing in patchwork)


  kcm_clone() creates kernel socket, which does not take net counter.

  Thus, the net may die before the socket is completely destructed,

  i.e. kcm_exit_net() is executed before kcm_done().


  Reported-by: syzbot+5f1a04e374a635efc426@syzkaller.appspotmail.com

  Signed-off-by: Kirill Tkhai <ktkhai@virtuozzo.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/kcm
hunk_count: 1
covered_count: 0
