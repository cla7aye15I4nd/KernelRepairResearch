id: 0bb443b74ce09197e970
bug_link: https://syzkaller.appspot.com/bug?extid=0bb443b74ce09197e970
title: general protection fault in __list_del_entry_valid (3)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f51ffde9276e94fd4608dd7f5c6798fac41bb065
fix_commit: b714295abc59cfa2fe46f9341503d9a7eb790503
datetime: '2018-04-04T11:33:52-04:00'
fix_commit_message: 'tipc: Fix missing list initializations in struct tipc_subscription


  When an item of struct tipc_subscription is created, we fail to

  initialize the two lists aggregated into the struct. This has so far

  never been a problem, since the items are just added to a root

  object by list_add(), which does not require the addee list to be

  pre-initialized. However, syzbot is provoking situations where this

  addition fails, whereupon the attempted removal if the item from

  the list causes a crash.


  This problem seems to always have been around, despite that the code

  for creating this object was rewritten in commit 242e82cc95f6 ("tipc:

  collapse subscription creation functions"), which is still in net-next.


  We fix this for that commit by initializing the two lists properly.


  Fixes: 242e82cc95f6 ("tipc: collapse subscription creation functions")

  Reported-by: syzbot+0bb443b74ce09197e970@syzkaller.appspotmail.com

  Signed-off-by: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tipc
hunk_count: 1
covered_count: 0
