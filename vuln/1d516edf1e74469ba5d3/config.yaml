id: 1d516edf1e74469ba5d3
bug_link: https://syzkaller.appspot.com/bug?extid=1d516edf1e74469ba5d3
title: WARNING in ieee80211_rx_list (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d1cba2ea8121e7fdbe1328cea782876b1dd80993
fix_commit: 321028bc45f01edb9e57b0ae5c11c5c3600d00ca
datetime: '2024-06-26T10:23:50+02:00'
fix_commit_message: 'wifi: mac80211: disable softirqs for queued frame handling


  As noticed by syzbot, calling ieee80211_handle_queued_frames()

  (and actually handling frames there) requires softirqs to be

  disabled, since we call into the RX code. Fix that in the case

  of cleaning up frames left over during shutdown.


  Fixes: 177c6ae9725d ("wifi: mac80211: handle tasklet frames before stopping")

  Reported-by: syzbot+1d516edf1e74469ba5d3@syzkaller.appspotmail.com

  Link: https://patch.msgid.link/20240626091559.cd6f08105a6e.I74778610a5ff2cf8680964698131099d2960352a@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- net/mac80211
hunk_count: 2
covered_count: 2
