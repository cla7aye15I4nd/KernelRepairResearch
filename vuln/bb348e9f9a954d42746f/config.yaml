id: bb348e9f9a954d42746f
bug_link: https://syzkaller.appspot.com/bug?extid=bb348e9f9a954d42746f
title: 'WARNING: kmalloc bug in snd_pcm_plugin_alloc'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 289047db1143c42c81820352f195a393ff639a52
fix_commit: 9d2479c960875ca1239bcb899f386970c13d9cfe
datetime: '2021-12-02T09:01:46+01:00'
fix_commit_message: 'ALSA: pcm: oss: Fix negative period/buffer sizes


  The period size calculation in OSS layer may receive a negative value

  as an error, but the code there assumes only the positive values and

  handle them with size_t.  Due to that, a too big value may be passed

  to the lower layers.


  This patch changes the code to handle with ssize_t and adds the proper

  error checks appropriately.


  Reported-by: syzbot+bb348e9f9a954d42746f@syzkaller.appspotmail.com

  Reported-by: Bixuan Cui <cuibixuan@linux.alibaba.com>

  Cc: <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/1638270978-42412-1-git-send-email-cuibixuan@linux.alibaba.com

  Link: https://lore.kernel.org/r/20211201073606.11660-2-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/oss
hunk_count: 5
covered_count: 1
