id: e93c1d9ae19a0236289c
bug_link: https://syzkaller.appspot.com/bug?extid=e93c1d9ae19a0236289c
title: general protection fault in nf_flow_table_offload_setup
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8d0015a7ab76b8b1e89a3e5f5710a6e5103f2dd5
fix_commit: a7da92c2c8a1faf253a3b3e292fda6910deba540
datetime: '2020-02-07T15:53:32+01:00'
fix_commit_message: 'netfilter: flowtable: skip offload setup if disabled


  nftables test case

  tests/shell/testcases/flowtable/0001flowtable_0


  results in a crash. After the refactor, if we leave early via

  nf_flowtable_hw_offload(), then "struct flow_block_offload" is left

  in an uninitialized state, but later users assume its initialised.


  Fixes: a7965d58ddab02 ("netfilter: flowtable: add nf_flow_table_offload_cmd()")

  Signed-off-by: Florian Westphal <fw@strlen.de>

  Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>

  '
submodule:
- net/netfilter
hunk_count: 2
covered_count: 2
