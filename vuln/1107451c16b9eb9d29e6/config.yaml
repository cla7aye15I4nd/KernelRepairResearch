id: 1107451c16b9eb9d29e6
bug_link: https://syzkaller.appspot.com/bug?extid=1107451c16b9eb9d29e6
title: kernel BUG in __hfsplus_setxattr
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 4c6a567cb8e8e0eb7fc559e8cecbae7d83aaafbb
fix_commit: c7c6363ca186747ebc2df10c8a1a51e66e0e32d9
datetime: '2025-07-25T15:22:00-07:00'
fix_commit_message: 'hfsplus: don''t use BUG_ON() in hfsplus_create_attributes_file()


  When the volume header contains erroneous values that do not reflect

  the actual state of the filesystem, hfsplus_fill_super() assumes that

  the attributes file is not yet created, which later results in hitting

  BUG_ON() when hfsplus_create_attributes_file() is called. Replace this

  BUG_ON() with -EIO error with a message to suggest running fsck tool.


  Reported-by: syzbot <syzbot+1107451c16b9eb9d29e6@syzkaller.appspotmail.com>

  Closes: https://syzkaller.appspot.com/bug?extid=1107451c16b9eb9d29e6

  Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

  Reviewed-by: Viacheslav Dubeyko <slava@dubeyko.com>

  Link: https://lore.kernel.org/r/7b587d24-c8a1-4413-9b9a-00a33fbd849f@I-love.SAKURA.ne.jp

  Signed-off-by: Viacheslav Dubeyko <slava@dubeyko.com>

  '
submodule:
- fs/hfsplus
hunk_count: 1
covered_count: 1
