id: 495dab1f175edc9c2f13
bug_link: https://syzkaller.appspot.com/bug?extid=495dab1f175edc9c2f13
title: 'KASAN: use-after-free Read in appledisplay_bl_get_brightness'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c1f602da92ccc40cfe6ea60c1b3dcd172b4f7b5e
fix_commit: 91feb01596e5efc0cc922cc73f5583114dccf4d2
datetime: '2019-11-07T11:19:23+01:00'
fix_commit_message: 'appledisplay: fix error handling in the scheduled work


  The work item can operate on


  1. stale memory left over from the last transfer

  the actual length of the data transfered needs to be checked

  2. memory already freed

  the error handling in appledisplay_probe() needs

  to cancel the work in that case


  Reported-and-tested-by: syzbot+495dab1f175edc9c2f13@syzkaller.appspotmail.com

  Signed-off-by: Oliver Neukum <oneukum@suse.com>

  Cc: stable <stable@vger.kernel.org>

  Link: https://lore.kernel.org/r/20191106124902.7765-1-oneukum@suse.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/usb/misc
hunk_count: 2
covered_count: 2
