id: 4a88b2b9dc280f47baf4
bug_link: https://syzkaller.appspot.com/bug?extid=4a88b2b9dc280f47baf4
title: 'KASAN: null-ptr-deref Write in get_block'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2fb3244f0a58ceb3d866ac63f644dfa31cae430f
fix_commit: da27e0a0e5f655f0d58d4e153c3182bb2b290f64
datetime: '2020-08-12T10:58:00-07:00'
fix_commit_message: "fs/minix: check return value of sb_getblk()\n\nPatch series \"\
  fs/minix: fix syzbot bugs and set s_maxbytes\".\n\nThis series fixes all syzbot\
  \ bugs in the minix filesystem:\n\n\tKASAN: null-ptr-deref Write in get_block\n\t\
  KASAN: use-after-free Write in get_block\n\tKASAN: use-after-free Read in get_block\n\
  \tWARNING in inc_nlink\n\tKMSAN: uninit-value in get_block\n\tWARNING in drop_nlink\n\
  \nIt also fixes the minix filesystem to set s_maxbytes correctly, so that\nuserspace\
  \ sees the correct behavior when exceeding the max file size.\n\nThis patch (of\
  \ 6):\n\nsb_getblk() can fail, so check its return value.\n\nThis fixes a NULL pointer\
  \ dereference.\n\nOriginally from Qiujun Huang.\n\nFixes: 1da177e4c3f4 (\"Linux-2.6.12-rc2\"\
  )\nReported-by: syzbot+4a88b2b9dc280f47baf4@syzkaller.appspotmail.com\nSigned-off-by:\
  \ Eric Biggers <ebiggers@google.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n\
  Cc: Qiujun Huang <anenbupt@gmail.com>\nCc: Alexander Viro <viro@zeniv.linux.org.uk>\n\
  Cc: <stable@vger.kernel.org>\nLink: http://lkml.kernel.org/r/20200628060846.682158-1-ebiggers@kernel.org\n\
  Link: http://lkml.kernel.org/r/20200628060846.682158-2-ebiggers@kernel.org\nSigned-off-by:\
  \ Linus Torvalds <torvalds@linux-foundation.org>\n"
submodule:
- fs/minix
hunk_count: 3
covered_count: 3
