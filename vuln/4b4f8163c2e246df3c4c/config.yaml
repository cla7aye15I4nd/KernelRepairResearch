id: 4b4f8163c2e246df3c4c
bug_link: https://syzkaller.appspot.com/bug?extid=4b4f8163c2e246df3c4c
title: general protection fault in rds_recv_rcvbuf_delta
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3e493173b7841259a08c5c8e5cbe90adb349da7e
fix_commit: c5c1a030a7dbf8dd4e1fa4405ae9a89dc1d2a8db
datetime: '2019-09-11T15:05:40+01:00'
fix_commit_message: 'net/rds: An rds_sock is added too early to the hash table


  In rds_bind(), an rds_sock is added to the RDS bind hash table before

  rs_transport is set.  This means that the socket can be found by the

  receive code path when rs_transport is NULL.  And the receive code

  path de-references rs_transport for congestion update check.  This can

  cause a panic.  An rds_sock should not be added to the bind hash table

  before all the needed fields are set.


  Reported-by: syzbot+4b4f8163c2e246df3c4c@syzkaller.appspotmail.com

  Signed-off-by: Ka-Cheong Poon <ka-cheong.poon@oracle.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/rds
hunk_count: 2
covered_count: 0
