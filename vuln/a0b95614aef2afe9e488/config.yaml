id: a0b95614aef2afe9e488
bug_link: https://syzkaller.appspot.com/bug?extid=a0b95614aef2afe9e488
title: upstream build error (18)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 189b0ddc245139af81198d1a3637cac74f96e13a
fix_commit: e68b823ab0ba03323805e54743d16200ba0224d4
datetime: '2022-05-27T10:56:35-07:00'
fix_commit_message: "arm64/hugetlb: Fix building errors in huge_ptep_clear_flush()\n\
  \nFix the arm64 build error which was caused by commit ae07562909f3 (\"mm:\nchange\
  \ huge_ptep_clear_flush() to return the original pte\") interacting\nwith commit\
  \ fb396bb459c1 (\"arm64/hugetlb: Drop TLB flush from\nget_clear_flush()\"):\n\n\
  \  arch/arm64/mm/hugetlbpage.c: In function ‘huge_ptep_clear_flush’:\n  arch/arm64/mm/hugetlbpage.c:515:9:\
  \ error: implicit declaration of function ‘get_clear_flush’; did you mean ‘ptep_clear_flush’?\
  \ [-Werror=implicit-function-declaration]\n    515 |  return get_clear_flush(vma->vm_mm,\
  \ addr, ptep, pgsize, ncontig);\n        |         ^~~~~~~~~~~~~~~\n        |  \
  \       ptep_clear_flush\n\nDue to the new get_clear_contig() has dropped TLB flush,\
  \ we should add\nan explicit TLB flush in huge_ptep_clear_flush() to keep original\n\
  semantics when changing to use new get_clear_contig().\n\nFixes: fb396bb459c1 (\"\
  arm64/hugetlb: Drop TLB flush from get_clear_flush()\").\nFixes: ae07562909f3 (\"\
  mm: change huge_ptep_clear_flush() to return the original pte\")\nReported-and-tested-by:\
  \ Linux Kernel Functional Testing <lkft@linaro.org>\nReported-by: Sudip Mukherjee\
  \ <sudipm.mukherjee@gmail.com>\nSuggested-by: Catalin Marinas <catalin.marinas@arm.com>\n\
  Signed-off-by: Baolin Wang <baolin.wang@linux.alibaba.com>\nReviewed-by: Gavin Shan\
  \ <gshan@redhat.com>\nReviewed-by: Anshuman Khandual <anshuman.khandual@arm.com>\n\
  Cc: Catalin Marinas <catalin.marinas@arm.com>\nCc: Anshuman Khandual <anshuman.khandual@arm.com>\n\
  Cc: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>\n"
submodule:
- arch/arm64/mm
hunk_count: 1
covered_count: 0
