id: 9ca499bb57a2b9e4c652
bug_link: https://syzkaller.appspot.com/bug?extid=9ca499bb57a2b9e4c652
title: 'KMSAN: uninit-value in udf_evict_inode (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: b831281bb929ca6228ab898e1a97bb9284c07036
fix_commit: f05f2429eec60851b98bdde213de31dab697c01b
datetime: '2021-12-15T13:08:34+01:00'
fix_commit_message: 'udf: Fix error handling in udf_new_inode()


  When memory allocation of iinfo or block allocation fails, already

  allocated struct udf_inode_info gets freed with iput() and

  udf_evict_inode() may look at inode fields which are not properly

  initialized. Fix it by marking inode bad before dropping reference to it

  in udf_new_inode().


  Reported-by: syzbot+9ca499bb57a2b9e4c652@syzkaller.appspotmail.com

  Signed-off-by: Jan Kara <jack@suse.cz>

  '
submodule:
- fs/udf
hunk_count: 2
covered_count: 2
