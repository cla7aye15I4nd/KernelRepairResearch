id: dca05492eff41f604890
bug_link: https://syzkaller.appspot.com/bug?extid=dca05492eff41f604890
title: 'UBSAN: array-index-out-of-bounds in dbSplit'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d6c1b3599b2feb5c7291f5ac3a36e5fa7cedb234
fix_commit: d64ff0d2306713ff084d4b09f84ed1a8c75ecc32
datetime: '2024-08-27T11:32:45-05:00'
fix_commit_message: 'jfs: check if leafidx greater than num leaves per dmap tree


  syzbot report a out of bounds in dbSplit, it because dmt_leafidx greater

  than num leaves per dmap tree, add a checking for dmt_leafidx in dbFindLeaf.


  Shaggy:

  Modified sanity check to apply to control pages as well as leaf pages.


  Reported-and-tested-by: syzbot+dca05492eff41f604890@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=dca05492eff41f604890

  Signed-off-by: Edward Adam Davis <eadavis@qq.com>

  Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>

  '
submodule:
- fs/jfs
hunk_count: 2
covered_count: 0
