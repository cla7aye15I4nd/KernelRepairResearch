id: a2c4601efc75848ba321
bug_link: https://syzkaller.appspot.com/bug?extid=a2c4601efc75848ba321
title: WARNING in u32_change
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5361660af6d35f2b84926f5fcbf0491a9c21d82e
fix_commit: 7cba18332e3635aaae60e4e7d4e52849de50d91b
datetime: '2022-09-29T18:44:07-07:00'
fix_commit_message: "net: sched: cls_u32: Avoid memcpy() false-positive warning\n\n\
  To work around a misbehavior of the compiler's ability to see into\ncomposite flexible\
  \ array structs (as detailed in the coming memcpy()\nhardening series[1]), use unsafe_memcpy(),\
  \ as the sizing,\nbounds-checking, and allocation are all very tightly coupled here.\n\
  This silences the false-positive reported by syzbot:\n\n  memcpy: detected field-spanning\
  \ write (size 80) of single field \"&n->sel\" at net/sched/cls_u32.c:1043 (size\
  \ 16)\n\n[1] https://lore.kernel.org/linux-hardening/20220901065914.1417829-2-keescook@chromium.org\n\
  \nCc: Cong Wang <xiyou.wangcong@gmail.com>\nCc: Jiri Pirko <jiri@resnulli.us>\n\
  Reported-by: syzbot+a2c4601efc75848ba321@syzkaller.appspotmail.com\nLink: https://lore.kernel.org/lkml/000000000000a96c0b05e97f0444@google.com/\n\
  Signed-off-by: Kees Cook <keescook@chromium.org>\nReviewed-by: Jamal Hadi Salim\
  \ <jhs@mojatatu.com>\nLink: https://lore.kernel.org/r/20220927153700.3071688-1-keescook@chromium.org\n\
  Signed-off-by: Jakub Kicinski <kuba@kernel.org>\n"
submodule:
- net/sched
hunk_count: 1
covered_count: 1
