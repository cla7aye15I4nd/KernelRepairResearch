id: e64565577af34b3768dc
bug_link: https://syzkaller.appspot.com/bug?extid=e64565577af34b3768dc
title: WARNING in dev_vprintk_emit
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 6caf9fb3bda17df59de4ed6ed4950c43ca1361e3
fix_commit: 814596495dd2b9d4aab92d8f89cf19060d25d2ea
datetime: '2018-05-18T10:01:06+02:00'
fix_commit_message: 'cfg80211: further limit wiphy names to 64 bytes


  wiphy names were recently limited to 128 bytes by commit a7cfebcb7594

  ("cfg80211: limit wiphy names to 128 bytes").  As it turns out though,

  this isn''t sufficient because dev_vprintk_emit() needs the syslog header

  string "SUBSYSTEM=ieee80211\0DEVICE=+ieee80211:$devname" to fit into 128

  bytes.  This triggered the "device/subsystem name too long" WARN when

  the device name was >= 90 bytes.  As before, this was reproduced by

  syzbot by sending an HWSIM_CMD_NEW_RADIO command to the MAC80211_HWSIM

  generic netlink family.


  Fix it by further limiting wiphy names to 64 bytes.


  Reported-by: syzbot+e64565577af34b3768dc@syzkaller.appspotmail.com

  Fixes: a7cfebcb7594 ("cfg80211: limit wiphy names to 128 bytes")

  Signed-off-by: Eric Biggers <ebiggers@google.com>

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- include/uapi/linux
hunk_count: 1
covered_count: 0
