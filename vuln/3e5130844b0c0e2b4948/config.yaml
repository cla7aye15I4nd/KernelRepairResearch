id: 3e5130844b0c0e2b4948
bug_link: https://syzkaller.appspot.com/bug?extid=3e5130844b0c0e2b4948
title: 'WARNING: suspicious RCU usage in gfs2_permission'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d6fc6c93636ffefd3d209d90a749e4e4ea51d6c1
fix_commit: 074d7306a4fe22fcac0b53f699f92757ab1cee99
datetime: '2023-11-06T01:51:26+01:00'
fix_commit_message: "gfs2: Silence \"suspicious RCU usage in gfs2_permission\" warning\n\
  \nCommit 0abd1557e21c added rcu_dereference() for dereferencing ip->i_gl\nin gfs2_permission.\
  \  This now causes lockdep to complain when\ngfs2_permission is called in non-RCU\
  \ context:\n\n    WARNING: suspicious RCU usage in gfs2_permission\n\nSwitch to\
  \ rcu_dereference_check() and check for the MAY_NOT_BLOCK flag\nto shut up lockdep\
  \ when we know that dereferencing ip->i_gl is safe.\n\nFixes: 0abd1557e21c (\"gfs2:\
  \ fix an oops in gfs2_permission\")\nReported-by: syzbot+3e5130844b0c0e2b4948@syzkaller.appspotmail.com\n\
  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>\n"
submodule:
- fs/gfs2
hunk_count: 2
covered_count: 2
