id: d8aaffc3719597e8cfb4
bug_link: https://syzkaller.appspot.com/bug?extid=d8aaffc3719597e8cfb4
title: WARNING in z_erofs_lz4_decompress
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: eaa9172ad988b3ef5c59a051c825706252d435e1
fix_commit: a0961f351d82d43ab0b845304caa235dfe249ae9
datetime: '2021-10-31T21:00:28+08:00'
fix_commit_message: 'erofs: don''t trigger WARN() when decompression fails


  syzbot reported a WARNING [1] due to corrupted compressed data.


  As Dmitry said, "If this is not a kernel bug, then the code should

  not use WARN. WARN if for kernel bugs and is recognized as such by

  all testing systems and humans."


  [1] https://lore.kernel.org/r/000000000000b3586105cf0ff45e@google.com


  Link: https://lore.kernel.org/r/20211025074311.130395-1-hsiangkao@linux.alibaba.com

  Cc: Dmitry Vyukov <dvyukov@google.com>

  Reviewed-by: Chao Yu <chao@kernel.org>

  Reported-by: syzbot+d8aaffc3719597e8cfb4@syzkaller.appspotmail.com

  Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>

  '
submodule:
- fs/erofs
hunk_count: 1
covered_count: 1
