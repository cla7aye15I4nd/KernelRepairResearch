id: a063bbf0b15737362592
bug_link: https://syzkaller.appspot.com/bug?extid=a063bbf0b15737362592
title: WARNING in ieee80211_free_ack_frame
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0ee4d55534f82a0624701d0bb9fc2304d4529086
fix_commit: bd18de517923903a177508fc8813f44e717b1c00
datetime: '2021-05-31T21:27:07+02:00'
fix_commit_message: 'mac80211_hwsim: drop pending frames on stop


  Syzbot reports that we may be able to get into a situation where

  mac80211 has pending ACK frames on shutdown with hwsim. It appears

  that the reason for this is that syzbot uses the wmediumd hooks to

  intercept/injection frames, and may shut down hwsim, removing the

  radio(s), while frames are pending in the air simulation.


  Clean out the pending queue when the interface is stopped, after

  this the frames can''t be reported back to mac80211 properly anyway.


  Reported-by: syzbot+a063bbf0b15737362592@syzkaller.appspotmail.com

  Link: https://lore.kernel.org/r/20210517170429.b0f85ab0eda1.Ie42a6ec6b940c971f3441286aeaaae2fe368e29a@changeid

  Signed-off-by: Johannes Berg <johannes.berg@intel.com>

  '
submodule:
- drivers/net/wireless
hunk_count: 1
covered_count: 0
