id: c277e8e2f46414645508
bug_link: https://syzkaller.appspot.com/bug?extid=c277e8e2f46414645508
title: WARNING in fanotify_handle_event
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: c6d9c35d16f1bafd3fec64b865e569e48cbcb514
fix_commit: c285a2f01d692ef48d7243cf1072897bbd237407
datetime: '2019-06-19T15:53:58+02:00'
fix_commit_message: 'fanotify: update connector fsid cache on add mark


  When implementing connector fsid cache, we only initialized the cache

  when the first mark added to object was added by FAN_REPORT_FID group.

  We forgot to update conn->fsid when the second mark is added by

  FAN_REPORT_FID group to an already attached connector without fsid

  cache.


  Reported-and-tested-by: syzbot+c277e8e2f46414645508@syzkaller.appspotmail.com

  Fixes: 77115225acc6 ("fanotify: cache fsid in fsnotify_mark_connector")

  Signed-off-by: Amir Goldstein <amir73il@gmail.com>

  Signed-off-by: Jan Kara <jack@suse.cz>

  '
submodule:
- fs/notify
- include/linux
hunk_count: 4
covered_count: 1
