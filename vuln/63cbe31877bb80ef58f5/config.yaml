id: 63cbe31877bb80ef58f5
bug_link: https://syzkaller.appspot.com/bug?extid=63cbe31877bb80ef58f5
title: 'KCSAN: data-race in snd_seq_check_queue / snd_seq_control_queue (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 2c854e5c63ac56e7e0633fb6140c1bdf4d3dad96
fix_commit: 4ebd47037027c4beae99680bff3b20fdee5d7c1e
datetime: '2020-12-06T09:35:53+01:00'
fix_commit_message: 'ALSA: seq: Use bool for snd_seq_queue internal flags


  The snd_seq_queue struct contains various flags in the bit fields.

  Those are categorized to two different use cases, both of which are

  protected by different spinlocks.  That implies that there are still

  potential risks of the bad operations for bit fields by concurrent

  accesses.


  For addressing the problem, this patch rearranges those flags to be

  a standard bool instead of a bit field.


  Reported-by: syzbot+63cbe31877bb80ef58f5@syzkaller.appspotmail.com

  Link: https://lore.kernel.org/r/20201206083456.21110-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/seq
hunk_count: 1
covered_count: 0
