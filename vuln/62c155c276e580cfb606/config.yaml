id: 62c155c276e580cfb606
bug_link: https://syzkaller.appspot.com/bug?extid=62c155c276e580cfb606
title: 'KASAN: use-after-free Read in __hrtimer_run_queues'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 42595ce90b9d4a6b9d8c5a1ea78da4eeaf7e086a
fix_commit: 73d20564e0dcae003e0d79977f044d5e57496304
datetime: '2020-04-01T13:20:14+02:00'
fix_commit_message: 'hrtimer: Don''t dereference the hrtimer pointer after the callback


  A hrtimer can be released in its callback, but lockdep_hrtimer_exit()

  dereferences the pointer after the callback returns, i.e. a potential use

  after free.


  Retrieve the context in which the hrtimer expires before the callback is

  invoked and use it in lockdep_hrtimer_exit().


  Fixes: 40db173965c0 ("lockdep: Add hrtimer context tracing bits")

  Reported-by: syzbot+62c155c276e580cfb606@syzkaller.appspotmail.com

  Signed-off-by: Sebastian Andrzej Siewior <bigeasy@linutronix.de>

  Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

  Link: https://lkml.kernel.org/r/20200331201849.fkp2siy3vcdqvqlz@linutronix.de

  '
submodule:
- include/linux
- kernel/time
hunk_count: 4
covered_count: 2
