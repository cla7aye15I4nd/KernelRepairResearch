id: d78b8a29241a195aefb8
bug_link: https://syzkaller.appspot.com/bug?extid=d78b8a29241a195aefb8
title: 'KMSAN: uninit-value in tipc_nl_compat_link_set (2)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 0762216c0ad2a2fccd63890648eca491f2c83d9a
fix_commit: edf5ff04a45750ac8ce2435974f001dc9cfbf055
datetime: '2019-01-15T20:29:20-08:00'
fix_commit_message: "tipc: fix uninit-value in tipc_nl_compat_link_set\n\nsyzbot reports\
  \ following splat:\n\nBUG: KMSAN: uninit-value in strlen+0x3b/0xa0 lib/string.c:486\n\
  CPU: 1 PID: 9306 Comm: syz-executor172 Not tainted 4.20.0-rc7+ #2\nHardware name:\
  \ Google Google Compute Engine/Google Compute Engine, BIOS\nGoogle 01/01/2011\n\
  Call Trace:\n  __dump_stack lib/dump_stack.c:77 [inline]\n  dump_stack+0x173/0x1d0\
  \ lib/dump_stack.c:113\n  kmsan_report+0x12e/0x2a0 mm/kmsan/kmsan.c:613\n  __msan_warning+0x82/0xf0\
  \ mm/kmsan/kmsan_instr.c:313\n  strlen+0x3b/0xa0 lib/string.c:486\n  nla_put_string\
  \ include/net/netlink.h:1154 [inline]\n  __tipc_nl_compat_link_set net/tipc/netlink_compat.c:708\
  \ [inline]\n  tipc_nl_compat_link_set+0x929/0x1220 net/tipc/netlink_compat.c:744\n\
  \  __tipc_nl_compat_doit net/tipc/netlink_compat.c:311 [inline]\n  tipc_nl_compat_doit+0x3aa/0xaf0\
  \ net/tipc/netlink_compat.c:344\n  tipc_nl_compat_handle net/tipc/netlink_compat.c:1107\
  \ [inline]\n  tipc_nl_compat_recv+0x14d7/0x2760 net/tipc/netlink_compat.c:1210\n\
  \  genl_family_rcv_msg net/netlink/genetlink.c:601 [inline]\n  genl_rcv_msg+0x185f/0x1a60\
  \ net/netlink/genetlink.c:626\n  netlink_rcv_skb+0x444/0x640 net/netlink/af_netlink.c:2477\n\
  \  genl_rcv+0x63/0x80 net/netlink/genetlink.c:637\n  netlink_unicast_kernel net/netlink/af_netlink.c:1310\
  \ [inline]\n  netlink_unicast+0xf40/0x1020 net/netlink/af_netlink.c:1336\n  netlink_sendmsg+0x127f/0x1300\
  \ net/netlink/af_netlink.c:1917\n  sock_sendmsg_nosec net/socket.c:621 [inline]\n\
  \  sock_sendmsg net/socket.c:631 [inline]\n  ___sys_sendmsg+0xdb9/0x11b0 net/socket.c:2116\n\
  \  __sys_sendmsg net/socket.c:2154 [inline]\n  __do_sys_sendmsg net/socket.c:2163\
  \ [inline]\n  __se_sys_sendmsg+0x305/0x460 net/socket.c:2161\n  __x64_sys_sendmsg+0x4a/0x70\
  \ net/socket.c:2161\n  do_syscall_64+0xbc/0xf0 arch/x86/entry/common.c:291\n  entry_SYSCALL_64_after_hwframe+0x63/0xe7\n\
  \nThe uninitialised access happened in\n    nla_put_string(skb, TIPC_NLA_LINK_NAME,\
  \ lc->name)\n\nThis is because lc->name string is not validated before it's used.\n\
  \nReported-by: syzbot+d78b8a29241a195aefb8@syzkaller.appspotmail.com\nSigned-off-by:\
  \ Ying Xue <ying.xue@windriver.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>\n"
submodule:
- net/tipc
hunk_count: 1
covered_count: 1
