id: e3f23ce40269a4c9053a
bug_link: https://syzkaller.appspot.com/bug?extid=e3f23ce40269a4c9053a
title: general protection fault in gfs2_ri_update
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 515b269d5bd29a986d5e1c0a0cba87fa865a48b4
fix_commit: 778721510e84209f78e31e2ccb296ae36d623f5e
datetime: '2020-11-25T18:10:55+01:00'
fix_commit_message: 'gfs2: check for empty rgrp tree in gfs2_ri_update


  If gfs2 tries to mount a (corrupt) file system that has no resource

  groups it still tries to set preferences on the first one, which causes

  a kernel null pointer dereference. This patch adds a check to function

  gfs2_ri_update so this condition is detected and reported back as an

  error.


  Reported-by: syzbot+e3f23ce40269a4c9053a@syzkaller.appspotmail.com

  Signed-off-by: Bob Peterson <rpeterso@redhat.com>

  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>

  '
submodule:
- fs/gfs2
hunk_count: 1
covered_count: 1
