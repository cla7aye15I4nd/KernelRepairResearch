id: 53ce40c8c0322c06aea5
bug_link: https://syzkaller.appspot.com/bug?extid=53ce40c8c0322c06aea5
title: 'KASAN: use-after-free Read in bcmp'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 8e7e27b2ee1e19c4040d4987e345f678a74c0aed
fix_commit: 34e6552a442f268eefd408e47f4f2d471aa64829
datetime: '2023-09-28T15:04:05+03:00'
fix_commit_message: 'fs/ntfs3: Fix OOB read in ntfs_init_from_boot


  Syzbot was able to create a device which has the last sector of size

  512.


  After failing to boot from initial sector, reading from boot info from

  offset 511 causes OOB read.


  To prevent such reports add sanity check to validate if size of buffer_head

  if big enough to hold ntfs3 bootinfo


  Fixes: 6a4cd3ea7d77 ("fs/ntfs3: Alternative boot if primary boot is corrupted")

  Reported-by: syzbot+53ce40c8c0322c06aea5@syzkaller.appspotmail.com

  Signed-off-by: Pavel Skripkin <paskripkin@gmail.com>

  Signed-off-by: Konstantin Komarov <almaz.alexandrovich@paragon-software.com>

  '
submodule:
- fs/ntfs3
hunk_count: 1
covered_count: 1
