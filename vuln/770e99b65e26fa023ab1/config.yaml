id: 770e99b65e26fa023ab1
bug_link: https://syzkaller.appspot.com/bug?extid=770e99b65e26fa023ab1
title: 'WARNING: kmalloc bug in __snapshot_t_mut'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 64ee1431cc7d11e01a1007ead0afe737781cbbab
fix_commit: 64cd7de998f393e73981e2aa4ee13e4e887f01ea
datetime: '2024-06-25T20:51:14-04:00'
fix_commit_message: 'bcachefs: Fix kmalloc bug in __snapshot_t_mut


  When allocating too huge a snapshot table, we should fail gracefully

  in __snapshot_t_mut() instead of fail in kmalloc().


  Reported-by: syzbot+770e99b65e26fa023ab1@syzkaller.appspotmail.com

  Closes: https://syzkaller.appspot.com/bug?extid=770e99b65e26fa023ab1

  Tested-by: syzbot+770e99b65e26fa023ab1@syzkaller.appspotmail.com

  Signed-off-by: Pei Li <peili.dev@gmail.com>

  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 1
covered_count: 1
