id: 0442e6e2f7e1e33b1037
bug_link: https://syzkaller.appspot.com/bug?extid=0442e6e2f7e1e33b1037
title: 'KASAN: use-after-free Read in p9_fd_poll'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 31934da810365f603dec5a67e690e00cf900fc73
fix_commit: 430ac66eb4c5b5c4eb846b78ebf65747510b30f1
datetime: '2018-08-13T09:34:58+09:00'
fix_commit_message: 'net/9p/trans_fd.c: fix race-condition by flushing workqueue before
  the kfree()


  The patch adds the flush in p9_mux_poll_stop() as it the function used by

  p9_conn_destroy(), in turn called by p9_fd_close() to stop the async

  polling associated with the data regarding the connection.


  Link: http://lkml.kernel.org/r/20180720092730.27104-1-tomasbortoli@gmail.com

  Signed-off-by: Tomas Bortoli <tomasbortoli@gmail.com>

  Reported-by: syzbot+39749ed7d9ef6dfb23f6@syzkaller.appspotmail.com

  To: Eric Van Hensbergen <ericvh@gmail.com>

  To: Ron Minnich <rminnich@sandia.gov>

  To: Latchesar Ionkov <lucho@ionkov.net>

  Cc: Yiwen Jiang <jiangyiwen@huwei.com>

  Cc: stable@vger.kernel.org

  Signed-off-by: Dominique Martinet <dominique.martinet@cea.fr>

  '
submodule:
- net/9p
hunk_count: 1
covered_count: 1
