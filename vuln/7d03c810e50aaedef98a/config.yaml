id: 7d03c810e50aaedef98a
bug_link: https://syzkaller.appspot.com/bug?extid=7d03c810e50aaedef98a
title: 'INFO: rcu detected stall in xfrm_confirm_neigh'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 143a4454daaf0e80a2b9f37159a0d6d2b61e64ed
fix_commit: 013cb81e89f8a70deef086ca29a923faf5585ab0
datetime: '2018-02-20T08:38:57+01:00'
fix_commit_message: 'xfrm: Fix infinite loop in xfrm_get_dst_nexthop with transport
  mode.


  On transport mode we forget to fetch the child dst_entry

  before we continue the while loop, this leads to an infinite

  loop. Fix this by fetching the child dst_entry before we

  continue the while loop.


  Fixes: 0f6c480f23f4 ("xfrm: Move dst->path into struct xfrm_dst")

  Reported-by: syzbot+7d03c810e50aaedef98a@syzkaller.appspotmail.com

  Tested-by: Florian Westphal <fw@strlen.de>

  Signed-off-by: Steffen Klassert <steffen.klassert@secunet.com>

  '
submodule:
- net/xfrm
hunk_count: 1
covered_count: 1
