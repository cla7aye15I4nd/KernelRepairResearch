id: c2fdfd2b783754878fb6
bug_link: https://syzkaller.appspot.com/bug?extid=c2fdfd2b783754878fb6
title: memory leak in gfs2_init_fs_context
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 7d194c2100ad2a6dded545887d02754948ca5241
fix_commit: 30aecae86e914f526a2ca8d552011960ef6a2615
datetime: '2019-10-24T16:20:43+02:00'
fix_commit_message: 'gfs2: Fix memory leak when gfs2meta''s fs_context is freed


  gfs2 and gfs2meta share an ->init_fs_context function which allocates an

  args structure stored in fc->fs_private. gfs2 registers a ->free

  function to free this memory when the fs_context is cleaned up, but

  there was not one registered for gfs2meta, causing a leak.


  Register a ->free function for gfs2meta. The existing gfs2_fc_free

  function does what we need.


  Reported-by: syzbot+c2fdfd2b783754878fb6@syzkaller.appspotmail.com

  Fixes: 1f52aa08d12f ("gfs2: Convert gfs2 to fs_context")

  Signed-off-by: Andrew Price <anprice@redhat.com>

  Signed-off-by: Bob Peterson <rpeterso@redhat.com>

  Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>

  '
submodule:
- fs/gfs2
hunk_count: 1
covered_count: 1
