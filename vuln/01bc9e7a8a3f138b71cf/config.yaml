id: 01bc9e7a8a3f138b71cf
bug_link: https://syzkaller.appspot.com/bug?extid=01bc9e7a8a3f138b71cf
title: WARNING in free_loaded_vmcs (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 822f312d47f0200dc0999c9f006fe94aa43bd0bd
fix_commit: 5bea5123cbf08f990a1aee8f08c643a272e06a0f
datetime: '2018-09-20T00:51:43+02:00'
fix_commit_message: 'KVM: VMX: check nested state and CR4.VMXE against SMM


  VMX cannot be enabled under SMM, check it when CR4 is set and when nested

  virtualization state is restored.


  This should fix some WARNs reported by syzkaller, mostly around

  alloc_shadow_vmcs.


  Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

  '
submodule:
- arch/x86/kvm
hunk_count: 2
covered_count: 0
