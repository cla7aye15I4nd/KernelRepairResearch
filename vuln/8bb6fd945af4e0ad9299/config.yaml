id: 8bb6fd945af4e0ad9299
bug_link: https://syzkaller.appspot.com/bug?extid=8bb6fd945af4e0ad9299
title: WARNING in move_to_new_folio
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 86ebd50224c0734d965843260d0dc057a9431c61
fix_commit: 906d7ce3b59d62cf017ca602a0dfcb29413b8872
datetime: '2025-05-12T23:50:47-07:00'
fix_commit_message: "jfs: implement migrate_folio for jfs_metapage_aops\n\nAdd the\
  \ missing migrate_folio operation to jfs_metapage_aops to fix\nwarnings during memory\
  \ compaction.  These warnings were introduced by\ncommit 7ee3647243e5 (\"migrate:\
  \ Remove call to ->writepage\") which added\nexplicit warnings when filesystems\
  \ don't implement migrate_folio.\n\nSystem reports following warnings:\n  jfs_metapage_aops\
  \ does not implement migrate_folio\n  WARNING: CPU: 0 PID: 6870 at mm/migrate.c:955\
  \ fallback_migrate_folio mm/migrate.c:953 [inline]\n  WARNING: CPU: 0 PID: 6870\
  \ at mm/migrate.c:955 move_to_new_folio+0x70e/0x840 mm/migrate.c:1007\n\nImplement\
  \ metapage_migrate_folio() which handles both single and multiple\nmetapages per\
  \ page configurations.\n\n[shivankg@amd.com: change comment style]\n  Link: https://lkml.kernel.org/r/1967593d-8084-4a4a-b384-35d5adc54eb4@amd.com\n\
  [akpm@linux-foundation.org: fix build]\n[shivankg@amd.com: remove redundant NULL\
  \ check in __metapage_migrate_folio()]\n  Link: https://lkml.kernel.org/r/a67db238-0ca6-4725-abb2-dc092de87e1b@amd.com\n\
  Link: https://lkml.kernel.org/r/20250430100150.279751-3-shivankg@amd.com\nFixes:\
  \ 35474d52c605 (\"jfs: Convert metapage_writepage to metapage_write_folio\")\nSigned-off-by:\
  \ Shivank Garg <shivankg@amd.com>\nReported-by: syzbot+8bb6fd945af4e0ad9299@syzkaller.appspotmail.com\n\
  Closes: https://lore.kernel.org/all/67faff52.050a0220.379d84.001b.GAE@google.com\n\
  Tested-by: syzbot+8bb6fd945af4e0ad9299@syzkaller.appspotmail.com\nCc: Alistair Popple\
  \ <apopple@nvidia.com>\nCc: Dave Kleikamp <shaggy@kernel.org>\nCc: David Hildenbrand\
  \ <david@redhat.com>\nCc: Donet Tom <donettom@linux.ibm.com>\nCc: Jane Chu <jane.chu@oracle.com>\n\
  Cc: Kefeng Wang <wangkefeng.wang@huawei.com>\nCc: Matthew Wilcox <willy@infradead.org>\n\
  Cc: Zi Yan <ziy@nvidia.com>\nCc: Dan Carpenter <dan.carpenter@linaro.org>\nCc: kernel\
  \ test robot <lkp@intel.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- fs/jfs
hunk_count: 5
covered_count: 0
