id: 99f20222fc5018d2b97a
bug_link: https://syzkaller.appspot.com/bug?extid=99f20222fc5018d2b97a
title: 'KASAN: use-after-free Read in tipc_mcast_xmit'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f07d4276892d97671e880190ff195a288b2d8d92
fix_commit: 3c6306d44082ef007a258ae1b86ea58e6974ee3f
datetime: '2018-12-18T15:44:23-08:00'
fix_commit_message: 'tipc: check group dests after tipc_wait_for_cond()


  Similar to commit 143ece654f9f ("tipc: check tsk->group in tipc_wait_for_cond()")

  we have to reload grp->dests too after we re-take the sock lock.

  This means we need to move the dsts check after tipc_wait_for_cond()

  too.


  Fixes: 75da2163dbb6 ("tipc: introduce communication groups")

  Reported-and-tested-by: syzbot+99f20222fc5018d2b97a@syzkaller.appspotmail.com

  Cc: Ying Xue <ying.xue@windriver.com>

  Cc: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>

  Acked-by: Jon Maloy <jon.maloy@ericsson.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/tipc
hunk_count: 3
covered_count: 3
