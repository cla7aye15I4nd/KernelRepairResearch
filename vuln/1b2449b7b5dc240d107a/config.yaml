id: 1b2449b7b5dc240d107a
bug_link: https://syzkaller.appspot.com/bug?extid=1b2449b7b5dc240d107a
title: 'KASAN: use-after-free Read in device_release_driver_internal'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 303911cfc5b95d33687d9046133ff184cf5043ff
fix_commit: c52873e5a1ef72f845526d9f6a50704433f9c625
datetime: '2019-08-15T14:49:16+02:00'
fix_commit_message: 'usb: cdc-acm: make sure a refcount is taken early enough


  destroy() will decrement the refcount on the interface, so that

  it needs to be taken so early that it never undercounts.


  Fixes: 7fb57a019f94e ("USB: cdc-acm: Fix potential deadlock (lockdep warning)")

  Cc: stable <stable@vger.kernel.org>

  Reported-and-tested-by: syzbot+1b2449b7b5dc240d107a@syzkaller.appspotmail.com

  Signed-off-by: Oliver Neukum <oneukum@suse.com>

  Link: https://lore.kernel.org/r/20190808142119.7998-1-oneukum@suse.com

  Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

  '
submodule:
- drivers/usb/class
hunk_count: 3
covered_count: 0
