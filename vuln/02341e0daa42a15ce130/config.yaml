id: 02341e0daa42a15ce130
bug_link: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
title: 'KMSAN: uninit-value in lzo1x_1_do_compress (3)'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: d64ff0d2306713ff084d4b09f84ed1a8c75ecc32
fix_commit: 2b59ffad47db1c46af25ccad157bb3b25147c35c
datetime: '2024-09-04T10:28:08-05:00'
fix_commit_message: "jfs: Fix uninit-value access of new_ea in ea_buffer\n\nsyzbot\
  \ reports that lzo1x_1_do_compress is using uninit-value:\n\n=====================================================\n\
  BUG: KMSAN: uninit-value in lzo1x_1_do_compress+0x19f9/0x2510 lib/lzo/lzo1x_compress.c:178\n\
  \n...\n\nUninit was stored to memory at:\n ea_put fs/jfs/xattr.c:639 [inline]\n\n\
  ...\n\nLocal variable ea_buf created at:\n __jfs_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662\n\
  \ __jfs_xattr_set+0xe6/0x1f0 fs/jfs/xattr.c:934\n\n=====================================================\n\
  \nThe reason is ea_buf->new_ea is not initialized properly.\n\nFix this by using\
  \ memset to empty its content at the beginning\nin ea_get().\n\nReported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com\n\
  Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130\nSigned-off-by:\
  \ Zhao Mengmeng <zhaomengmeng@kylinos.cn>\nSigned-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>\n"
submodule:
- fs/jfs
hunk_count: 1
covered_count: 0
