id: ec5f605c91812d200367
bug_link: https://syzkaller.appspot.com/bug?extid=ec5f605c91812d200367
title: WARNING in __snd_rawmidi_transmit_ack (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: f5b6c1fcb42fe7d6f2f6eb2220512e2a5f875133
fix_commit: 82fd4b05d704623a0e4aa7fda48e272a9889337d
datetime: '2018-08-14T22:50:52+02:00'
fix_commit_message: 'ALSA: seq: virmidi: Fix discarding the unsubscribed output


  The recent change to move the virmidi output processing to a work

  slightly modified the code to discard the unsubscribed outputs so that

  it works without a temporary buffer.  However, this is actually buggy,

  and may spew a kernel warning due to the unexpected call of

  snd_rawmidi_transmit_ack(), as triggered by syzbot.


  This patch takes back to the original code in that part, use a

  temporary buffer and simply repeat snd_rawmidi_transmit(), in order to

  address the regression.


  Fixes: f7debfe54090 ("ALSA: seq: virmidi: Offload the output event processing")

  Reported-by: syzbot+ec5f605c91812d200367@syzkaller.appspotmail.com

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/core/seq
hunk_count: 1
covered_count: 1
