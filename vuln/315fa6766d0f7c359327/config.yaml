id: 315fa6766d0f7c359327
bug_link: https://syzkaller.appspot.com/bug?extid=315fa6766d0f7c359327
title: WARNING in netlink_ack (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 59b36613e85fb16ebf9feaf914570879cd5c2a21
fix_commit: cbbdf8433a5f117b1a2119ea30fc651b61ef7570
datetime: '2018-01-15T13:50:07-05:00'
fix_commit_message: 'netlink: extack needs to be reset each time through loop


  syzbot triggered the WARN_ON in netlink_ack testing the bad_attr value.

  The problem is that netlink_rcv_skb loops over the skb repeatedly invoking

  the callback and without resetting the extack leaving potentially stale

  data. Initializing each time through avoids the WARN_ON.


  Fixes: 2d4bc93368f5a ("netlink: extended ACK reporting")

  Reported-by: syzbot+315fa6766d0f7c359327@syzkaller.appspotmail.com

  Signed-off-by: David Ahern <dsahern@gmail.com>

  Signed-off-by: David S. Miller <davem@davemloft.net>

  '
submodule:
- net/netlink
hunk_count: 2
covered_count: 2
