id: dd768a260f7358adbaf9
bug_link: https://syzkaller.appspot.com/bug?extid=dd768a260f7358adbaf9
title: 'BUG: corrupted list in kobject_add_internal'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e99f38b81107c572392c3c6b859d063344afd865
fix_commit: a46b7ed4d52d09bd6c7ab53b2217d04fc2f02c65
datetime: '2020-09-20T08:21:14+02:00'
fix_commit_message: 'Bluetooth: Fix auto-creation of hci_conn at Conn Complete event


  Currently the code auto-creates hci_conn only if the remote address has

  been discovered before. This may not be the case. For example, the

  remote device may trigger connection after reboot at already-paired

  state so there is no inquiry result found, but it is still correct to

  create the hci_conn when Connection Complete event is received.


  A better guard is to check against bredr allowlist. Devices in the

  allowlist have been given permission to auto-connect.


  Fixes: 4f40afc6c764 ("Bluetooth: Handle BR/EDR devices during suspend")

  Signed-off-by: Sonny Sasaka <sonnysasaka@chromium.org>

  Reviewed-by: Abhishek Pandit-Subedi <abhishekpandit@chromium.org>

  Signed-off-by: Marcel Holtmann <marcel@holtmann.org>

  '
submodule:
- net/bluetooth
hunk_count: 2
covered_count: 1
