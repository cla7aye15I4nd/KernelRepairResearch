id: f9238a0a31f9b5603fef
bug_link: https://syzkaller.appspot.com/bug?extid=f9238a0a31f9b5603fef
title: 'BUG: unable to handle kernel NULL pointer dereference in do_pagemap_scan'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 3dfd79cc8772bc2f02e060aa8c0bbbba8c1a1e45
fix_commit: 65c66047259fad1b868d4454bc5af95b46a5f954
datetime: '2025-05-11T17:54:05-07:00'
fix_commit_message: "proc: fix the issue of proc_mem_open returning NULL\n\nproc_mem_open()\
  \ can return an errno, NULL, or mm_struct*.  If it fails to\nacquire mm, it returns\
  \ NULL, but the caller does not check for the case\nwhen the return value is NULL.\n\
  \nThe following conditions lead to failure in acquiring mm:\n\n  - The task is a\
  \ kernel thread (PF_KTHREAD)\n  - The task is exiting (PF_EXITING)\n\nChanges:\n\
  \n  - Add documentation comments for the return value of proc_mem_open().\n  - Add\
  \ checks in the caller to return -ESRCH when proc_mem_open()\n    returns NULL.\n\
  \nLink: https://lkml.kernel.org/r/20250404063357.78891-1-superman.xpt@gmail.com\n\
  Reported-by: syzbot+f9238a0a31f9b5603fef@syzkaller.appspotmail.com\nCloses: https://lore.kernel.org/all/000000000000f52642060d4e3750@google.com\n\
  Signed-off-by: Penglei Jiang <superman.xpt@gmail.com>\nCc: Al Viro <viro@zeniv.linux.org.uk>\n\
  Cc: Adrian Ratiu <adrian.ratiu@collabora.com>\nCc: Christian Brauner <brauner@kernel.org>\n\
  Cc: Felix Moessbauer <felix.moessbauer@siemens.com>\nCc: Jeff layton <jlayton@kernel.org>\n\
  Cc: Lorenzo Stoakes <lorenzo.stoakes@oracle.com>\nCc: Mateusz Guzik <mjguzik@gmail.com>\n\
  Cc: Thomas Gleinxer <tglx@linutronix.de>\nCc: xu xin <xu.xin16@zte.com.cn>\nCc:\
  \ Alexey Dobriyan <adobriyan@gmail.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- fs/proc
hunk_count: 6
covered_count: 1
