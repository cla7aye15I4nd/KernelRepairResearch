id: 25b3a0b24216651bc2af
bug_link: https://syzkaller.appspot.com/bug?extid=25b3a0b24216651bc2af
title: possible deadlock in ieee80211_change_mac
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 9118796dfa67a58d17281e019acab4f651eb8dfa
fix_commit: 74a7c93f45abba538914a65dd2ef2ea7cf7150e2
datetime: '2023-10-23T12:25:39+02:00'
fix_commit_message: "wifi: mac80211: fix change_address deadlock during unregister\n\
  \nWhen using e.g. bonding, and doing a sequence such as\n\n # iw wlan0 set type\
  \ __ap\n # ip link add name bond1 type bond\n # ip link set wlan0 master bond1\n\
  \ # iw wlan0 interface del\n\nwe deadlock, since the wlan0 interface removal will\
  \ cause\nbonding to reset the MAC address of wlan0.\n\nThe locking would be somewhat\
  \ difficult to fix, but since\nthis only happens during removal, we can simply ignore\
  \ the\nMAC address change at this time.\n\nReported-by: syzbot+25b3a0b24216651bc2af@syzkaller.appspotmail.com\n\
  Signed-off-by: Johannes Berg <johannes.berg@intel.com>\nLink: https://lore.kernel.org/r/20231012123447.9f9d7fd1f237.Ic3a5ef4391b670941a69cec5592aefc79d9c2890@changeid\n\
  Signed-off-by: Johannes Berg <johannes.berg@intel.com>\n"
submodule:
- net/mac80211
hunk_count: 1
covered_count: 1
