id: 0cb5bb0f4bf9e79db3b3
bug_link: https://syzkaller.appspot.com/bug?extid=0cb5bb0f4bf9e79db3b3
title: inconsistent lock state in padata_do_parallel (2)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 42c2d7d02977ef09d434b1f5b354f5bc6c1027ab
fix_commit: 58329c4312031603bb1786b44265c26d5065fe72
datetime: '2024-04-12T15:07:51+08:00'
fix_commit_message: 'padata: Disable BH when taking works lock on MT path


  As the old padata code can execute in softirq context, disable

  softirqs for the new padata_do_mutithreaded code too as otherwise

  lockdep will get antsy.


  Reported-by: syzbot+0cb5bb0f4bf9e79db3b3@syzkaller.appspotmail.com

  Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

  Acked-by: Daniel Jordan <daniel.m.jordan@oracle.com>

  Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

  '
submodule:
- kernel
hunk_count: 3
covered_count: 3
