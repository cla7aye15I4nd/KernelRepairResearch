id: 705209281e36404998f6
bug_link: https://syzkaller.appspot.com/bug?extid=705209281e36404998f6
title: kernel BUG in move_pages
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: aa8f91910bf5fb11dcd176e6efac2dbe2cecebea
fix_commit: 5d4747a6cc8e78ce74742d557fc9b7697fcacc95
datetime: '2024-01-12T15:20:49-08:00'
fix_commit_message: "userfaultfd: avoid huge_zero_page in UFFDIO_MOVE\n\nWhile testing\
  \ UFFDIO_MOVE ioctl, syzbot triggered VM_BUG_ON_PAGE caused by\na call to PageAnonExclusive()\
  \ with a huge_zero_page as a parameter. \nUFFDIO_MOVE does not yet handle zeropages\
  \ and returns EBUSY when one is\nencountered.  Add an early huge_zero_page check\
  \ in the PMD move path to\navoid this situation.\n\nLink: https://lkml.kernel.org/r/20240112013935.1474648-1-surenb@google.com\n\
  Fixes: adef440691ba (\"userfaultfd: UFFDIO_MOVE uABI\")\nReported-by: syzbot+705209281e36404998f6@syzkaller.appspotmail.com\n\
  Signed-off-by: Suren Baghdasaryan <surenb@google.com>\nAcked-by: David Hildenbrand\
  \ <david@redhat.com>\nCc: Andrea Arcangeli <aarcange@redhat.com>\nCc: Peter Xu <peterx@redhat.com>\n\
  Cc: Stephen Rothwell <sfr@canb.auug.org.au>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\n"
submodule:
- mm
hunk_count: 1
covered_count: 1
