id: 78d5b129a762182225aa
bug_link: https://syzkaller.appspot.com/bug?extid=78d5b129a762182225aa
title: 'UBSAN: shift-out-of-bounds in parse_audio_unit'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 5fa87a081b2d633b944d5a93f5767623ef2a961d
fix_commit: 2f38cf730caedaeacdefb7ff35b0a3c1168117f9
datetime: '2024-07-15T16:06:09+02:00'
fix_commit_message: 'ALSA: usb: Fix UBSAN warning in parse_audio_unit()


  A malformed USB descriptor may pass the lengthy mixer description with

  a lot of channels, and this may overflow the 32bit integer shift

  size, as caught by syzbot UBSAN test.  Although this won''t cause any

  real trouble, it''s better to address.


  This patch introduces a sanity check of the number of channels to bail

  out the parsing when too many channels are found.


  Reported-by: syzbot+78d5b129a762182225aa@syzkaller.appspotmail.com

  Closes: https://lore.kernel.org/0000000000000adac5061d3c7355@google.com

  Link: https://patch.msgid.link/20240715123619.26612-1-tiwai@suse.de

  Signed-off-by: Takashi Iwai <tiwai@suse.de>

  '
submodule:
- sound/usb
hunk_count: 1
covered_count: 1
