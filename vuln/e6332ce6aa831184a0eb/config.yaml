id: e6332ce6aa831184a0eb
bug_link: https://syzkaller.appspot.com/bug?extid=e6332ce6aa831184a0eb
title: 'UBSAN: shift-out-of-bounds in bch2_btree_node_read_done'
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: e3fd3faa453ce4cf4b6a0f3e29ee77d5d1b243a8
fix_commit: 9e7cfb35e2668e542c333ed3ec4b0a951dd332ee
datetime: '2024-06-19T18:27:23-04:00'
fix_commit_message: 'bcachefs: Check for invalid btree IDs


  We can only handle btree IDs up to 62, since the btree id (plus the type

  for interior btree nodes) has to fit ito a 64 bit bitmask - check for

  invalid ones to avoid invalid shifts later.


  Signed-off-by: Kent Overstreet <kent.overstreet@linux.dev>

  '
submodule:
- fs/bcachefs
hunk_count: 3
covered_count: 0
