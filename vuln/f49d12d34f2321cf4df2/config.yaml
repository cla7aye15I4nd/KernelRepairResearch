id: f49d12d34f2321cf4df2
bug_link: https://syzkaller.appspot.com/bug?extid=f49d12d34f2321cf4df2
title: kernel BUG at kernel/time/timer.c:LINE! (4)
source_page: https://syzkaller.appspot.com/upstream/fixed
trigger_commit: 33657a0a3eec844ebca3d12929e2dd2f57a7a1dc
fix_commit: f3f5ba42c58d56d50f539854d8cc188944e96087
datetime: '2019-10-24T18:58:16-03:00'
fix_commit_message: "media: imon: invalid dereference in imon_touch_event\n\nThe touch\
  \ timer is set up in intf1. If the second interface does not exist,\nthe timer and\
  \ touch input device are not setup and we get the following\nerror, when touch events\
  \ are reported via intf0.\n\nkernel BUG at kernel/time/timer.c:956!\ninvalid opcode:\
  \ 0000 [#1] SMP KASAN\nCPU: 0 PID: 0 Comm: swapper/0 Not tainted 5.4.0-rc1+ #0\n\
  Hardware name: Google Google Compute Engine/Google Compute Engine, BIOS Google 01/01/2011\n\
  RIP: 0010:__mod_timer kernel/time/timer.c:956 [inline]\nRIP: 0010:__mod_timer kernel/time/timer.c:949\
  \ [inline]\nRIP: 0010:mod_timer+0x5a2/0xb50 kernel/time/timer.c:1100\nCode: 45 10\
  \ c7 44 24 14 ff ff ff ff 48 89 44 24 08 48 8d 45 20 48 c7 44 24 18 00 00 00 00\
  \ 48 89 04 24 e9 5a fc ff ff e8 ae ce 0e 00 <0f> 0b e8 a7 ce 0e 00 4c 89 74 24 20\
  \ e9 37 fe ff ff e8 98 ce 0e 00\nRSP: 0018:ffff8881db209930 EFLAGS: 00010006\nRAX:\
  \ ffffffff86c2b200 RBX: 00000000ffffa688 RCX: ffffffff83efc583\nRDX: 0000000000000100\
  \ RSI: ffffffff812f4d82 RDI: ffff8881d2356200\nRBP: ffff8881d23561e8 R08: ffffffff86c2b200\
  \ R09: ffffed103a46abeb\nR10: ffffed103a46abea R11: ffff8881d2355f53 R12: dffffc0000000000\n\
  R13: 1ffff1103b64132d R14: ffff8881d2355f50 R15: 0000000000000006\nFS:  0000000000000000(0000)\
  \ GS:ffff8881db200000(0000) knlGS:0000000000000000\nCS:  0010 DS: 0000 ES: 0000\
  \ CR0: 0000000080050033\nCR2: 00007f75e2799000 CR3: 00000001d3b07000 CR4: 00000000001406f0\n\
  DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000\nDR3: 0000000000000000\
  \ DR6: 00000000fffe0ff0 DR7: 0000000000000400\nCall Trace:\n <IRQ>\n imon_touch_event\
  \ drivers/media/rc/imon.c:1348 [inline]\n imon_incoming_packet.isra.0+0x2546/0x2f10\
  \ drivers/media/rc/imon.c:1603\n usb_rx_callback_intf0+0x151/0x1e0 drivers/media/rc/imon.c:1734\n\
  \ __usb_hcd_giveback_urb+0x1f2/0x470 drivers/usb/core/hcd.c:1654\n usb_hcd_giveback_urb+0x368/0x420\
  \ drivers/usb/core/hcd.c:1719\n dummy_timer+0x120f/0x2fa2 drivers/usb/gadget/udc/dummy_hcd.c:1965\n\
  \ call_timer_fn+0x179/0x650 kernel/time/timer.c:1404\n expire_timers kernel/time/timer.c:1449\
  \ [inline]\n __run_timers kernel/time/timer.c:1773 [inline]\n __run_timers kernel/time/timer.c:1740\
  \ [inline]\n run_timer_softirq+0x5e3/0x1490 kernel/time/timer.c:1786\n __do_softirq+0x221/0x912\
  \ kernel/softirq.c:292\n invoke_softirq kernel/softirq.c:373 [inline]\n irq_exit+0x178/0x1a0\
  \ kernel/softirq.c:413\n exiting_irq arch/x86/include/asm/apic.h:536 [inline]\n\
  \ smp_apic_timer_interrupt+0x12f/0x500 arch/x86/kernel/apic/apic.c:1137\n apic_timer_interrupt+0xf/0x20\
  \ arch/x86/entry/entry_64.S:830\n </IRQ>\nRIP: 0010:default_idle+0x28/0x2e0 arch/x86/kernel/process.c:581\n\
  Code: 90 90 41 56 41 55 65 44 8b 2d 44 3a 8f 7a 41 54 55 53 0f 1f 44 00 00 e8 36\
  \ ee d0 fb e9 07 00 00 00 0f 00 2d fa dd 4f 00 fb f4 <65> 44 8b 2d 20 3a 8f 7a 0f\
  \ 1f 44 00 00 5b 5d 41 5c 41 5d 41 5e c3\nRSP: 0018:ffffffff86c07da8 EFLAGS: 00000246\
  \ ORIG_RAX: ffffffffffffff13\nRAX: 0000000000000007 RBX: ffffffff86c2b200 RCX: 0000000000000000\n\
  RDX: 0000000000000000 RSI: 0000000000000006 RDI: ffffffff86c2ba4c\nRBP: fffffbfff0d85640\
  \ R08: ffffffff86c2b200 R09: 0000000000000000\nR10: 0000000000000000 R11: 0000000000000000\
  \ R12: 0000000000000000\nR13: 0000000000000000 R14: 0000000000000000 R15: 0000000000000000\n\
  \ cpuidle_idle_call kernel/sched/idle.c:154 [inline]\n do_idle+0x3b6/0x500 kernel/sched/idle.c:263\n\
  \ cpu_startup_entry+0x14/0x20 kernel/sched/idle.c:355\n start_kernel+0x82a/0x864\
  \ init/main.c:784\n secondary_startup_64+0xa4/0xb0 arch/x86/kernel/head_64.S:241\n\
  Modules linked in:\n\nReported-by: syzbot+f49d12d34f2321cf4df2@syzkaller.appspotmail.com\n\
  Signed-off-by: Sean Young <sean@mess.org>\nSigned-off-by: Mauro Carvalho Chehab\
  \ <mchehab+samsung@kernel.org>\n"
submodule:
- drivers/media/rc
hunk_count: 1
covered_count: 1
